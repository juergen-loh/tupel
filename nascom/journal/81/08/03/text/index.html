<!doctype html>
<html lang="de">

<!-- navi-head.php / $Date: 2025-01-05 17:01:36 +0100 (So, 05. Jan 2025) $ -->
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta charset="utf-8">

	<link rel="shortcut icon" type="image/x-icon" href="../../../../../../nascom/nascom.ico">
	<link rel="icon" type="image/png" href="../../../../../../nascom/apple-touch-icon.png" sizes="32x32">
	<link rel="icon" type="image/png" href="../../../../../../nascom/apple-touch-icon.png" sizes="96x96">
	<link rel="apple-touch-icon" sizes="180x180" href="../../../../../../nascom/apple-touch-icon.png">

	<!--bootstrap-->
	<link rel="stylesheet" href="../../../../../../cdn/bootstrap/css/bootstrap.min.css">

	<!--font awesome-->
	<link rel="stylesheet" href="../../../../../../cdn/fontawesome/css/fontawesome.min.css">
	<link rel="stylesheet" href="../../../../../../cdn/fontawesome/css/solid.min.css">

	<link rel="stylesheet" type="text/css" href="../../../../../../style.css">
	<link rel="canonical" href="https://tupel.jloh.de/nascom/journal/81/08/03/text/">
<!-- /navi-head.php -->

	<!-- page.php / $Date: 2024-07-13 18:55:41 +0200 (Sa, 13. Jul 2024) $ -->

	<title>Nascom Journal - August 1981 - Ausgabe 8</title>
	<!-- Sun, 05 Jan 2025 16:01:37 GMT -->
	<meta name="keywords" content="Nascom Journal, Nascom Computer, Nascom 1, Nascom 2">
<!-- navi-body.php -->
</head>

<body>
	<nav class="navbar navbar-expand-md navbar-light bg-light style-navbar-top" id="top">
	<div class="container-fluid">
		<a class="navbar-brand" href="https://jloh.de/">
			<img src="../../../../../../favicon.ico" width="32" height="32" alt="JL" title="Homepage von Jürgen Loh">
		</a>
		<button
			class="navbar-toggler"
			type="button"
			data-bs-toggle="collapse"
			data-bs-target="#navbarSupportedContent"
			aria-controls="navbarSupportedContent"
			aria-expanded="false"
			aria-label="Toggle navigation"
		>
			<span class="navbar-toggler-icon"></span>
		</button>
		<div class="collapse navbar-collapse robots-nocontent" id="navbarSupportedContent">
			<ul class="navbar-nav md-auto">
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../z80-kit/">Z80-KIT</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../nascom/1/">Nascom 1</a>
				</li>
				<li class="nav-item">
					<a class="nav-link active" href="../../../../../../nascom/">Nascom Journal</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../nascom/magazines/issues/">Nascom Magazines</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../pico/">PICO</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../cpm-plus/">CP/M</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../">Tupel BBS</a>
				</li>
			</ul>
		</div>
	</div>
	</nav>

	<div class="container" style="max-width: 750px; color: #000; padding: 0 15px 0; background-color: #FFF">

<!--********************************************************************************-->

<!-- /navi-body.php / $Date: 2024-12-30 14:10:13 +0100 (Mo, 30. Dez 2024) $ -->
<table class="style-table-zeropadding" style="width: 100%">
	<tr>
		<td>
			<h1 class="h1Navi">Nascom Journal</h1>
		</td>
		<td>&nbsp;&nbsp;</td>
		<td style="vertical-align:top">
			<h2 class="h2Navi"><span class="nowrap">August 1981 &middot;</span> <span class="nowrap">Ausgabe 8</span></h2>
		</td>
	</tr>
</table>

<div id="head"><!-- Navigation oben -->
<table class="robots-nocontent style-table-zeropadding" style="width: 100%">
	<tr>
		<td class="navi-button">
			<a style="display: block" href="../../02/text/" title="Seite zurück"><span class="mirror-horizontal fas fa-play" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../01/text/" title="Erste Seite"><span class="mirror-horizontal fas fa-fast-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../../../81/07/01/text/" title="Heft zurück"><span class="mirror-horizontal fas fa-forward" aria-hidden=true></span></a>
		</td>
		<th class="navi-button">
			<a style="display: block" href="../../text/" title="Inhaltsverzeichnis">Seite 3 von 24</a>
		</th>
		<td class="navi-button">
			<a style="display: block" href="../../../../81/09/01/text/" title="Heft vor"><span class="fas fa-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../24/text/" title="Letzte Seite"><span class="fas fa-fast-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../04/text/" title="Seite vor"><span class="fas fa-play" aria-hidden=true></span></a>
		</td>
	</tr>
</table>
</div><!-- /Navigation oben -->

<!-- Die Seite -->
<div class="row" id="page"><div class="col-sm-12 hyphenate" style="border: 1px solid #000; padding-top: 1em; padding-bottom: 1em;">

<!-- 2(2) Spalten im Blocksatz: Start --><div class="style-multi-column-2 justify">

<h1 id="article1">
FORTH für den <span class="uppercase">Nascom</span>
</h1>
<h3>
von Günter Kreidl
</h3>
<p>
Es soll hier nicht wieder, wie es leider schon häufiger im
<span class="uppercase">Nascom-Journal</span> geschehen ist, auf mehreren Seiten ein Programm
ausführlich beschrieben werden, das dann anschließend zum Kauf
angeboten wird. Andererseits wird hier auch kein
&bdquo;betriebsfertiges&ldquo; FORTH-System vorgelegt, das man nur noch
einzutippen braucht. Vielmehr verstehe ich diesen und die folgenden
Beiträge als Einladung an die Leser, gemeinsam ein solches FORTH-System
zu entwickeln. Um eine Grundlage zu haben, wird in diesem Heft zunächst
der prinzipielle Aufbau von FORTH erläutert. Im 
<a href="../../../09/10/text/#article1">nächsten Heft</a>
erscheint dann das
<a href="../../../09/16/text/#article1">Assemblerlisting</a>
einer &bdquo;Schmalspurversion&ldquo; bzw.
eines TINY FORTH, das wir dann gemeinsam ausbauen und verbessern wollen.
</p>
<h4>
&bdquo;Fädelcode&ldquo;
</h4>
<p>
Wer öfters größere Programme in Assembler oder Maschinensprache
schreibt, hat sich vielleicht eine Bibliothek von Routinen
zusammengestellt, die dann universell einsetzbar sind. Große Teile
eines solchen Programms sehen dann oft so aus:
</p>
<p>
CALL Routine1<br>
Registeranpassung<br>
CALL Routine2<br>
Registeranpassung usw.
</p>
<p>
Unter Registeranpassung wird hier alles verstanden, was mit dem Retten
von Registerinhalten über die PUSH-Befehle und der Übergabe von
Parametern zwischen den Unterprogrammen zusammenhängt. Wenn man nun
statt der individuellen Registeranpassungen ein Standardsystem der
Parameterübergabe einführt, vereinfacht sich das Programm erheblich.
Nehmen wir einmal an, alle Parameter werden über den Stack übergeben.
Da dann auch keine Registerinhalte mehr gerettet werden müssen, besteht
das Programm nur noch aus Unterprogrammaufrufen:
</p>
<p>
CALL Routine1<br>
CALL Routine2 usw.
</p>
<p>
Jetzt kann man sich aber auch noch den CALL-Befehl selbst sparen, wenn
man stattdessen eine Routine einführt, die eine Reihe von aufeinander
folgenden Adressen eben als Adressen von Un&shy;ter&shy;pro&shy;gram&shy;men

<!-- 2 Spalten im Blocksatz: Spaltenwechsel -->

interpretiert. Wir brauchen also einen kleinen <span class="uppercase">Interpreter</span>, der diesen
speziellen Code, der nur aus einer Aneinanderreihung von Adressen von
Unterprogrammen besteht, abarbeiten kann. Dieser kleine Interpreter,
der nicht mehr als ca. 50 Bytes Speicherplatz belegt, und dieser
spezielle Code, den man im Englischen <span class="uppercase">Threaded Code</span> nennt, was ich hier
mit Fädelcode übersetzt habe, bilden das Kernstück von FORTH. Der
Interpreter ist wesentlich kleiner als bei anderen &bdquo;höheren&ldquo;
Programmiersprachen und wesentlich schneller (etwa 10 x so schnell wie
ein Basic-Interpreter).
</p>
<h4>
Bestandteile von FORTH
</h4>
<p>
Woraus besteht also die Programmiersprache FORTH? Zunächst einmal aus
einer Bibliothek von Routinen in Maschinensprache (sogenannten
&bdquo;Primitives&ldquo;). Aus diesen Routinen sind dann weitere Routinen
im Fädelcode zusammengesetzt. Beide Arten von Routinen können von dem
oben beschriebenen Interpreter aufgerufen werden. Diesen
<span class="uppercase">Threaded-Code-Interpreter</span> wollen wir den internen Interpreter nennen,
denn das System verfügt noch über einen anderen, den äußeren oder
Benutzerinterpreter, der interaktiv die Eingaben des Anwenders (Text
oder Zahlen) in Startadressen für den internen Interpreter umwandelt.
Der dritte Bestandteil von FORTH ist ein Compiler, der es ermöglicht,
der Sprache weitere Befehle als Threaded-Code -Routinen hinzuzufügen.
Ein ausgebautes FORTH-System enthält darüber hinaus noch einen Editor
und einen Assembler &ndash; und das alles in 5 &ndash; 6&nbsp;K Speicherplatz.
</p>
<h4>
Der interne Interpreter
</h4>
<p>
Der interne Interpreter imitiert gewisse Funktionen der CPU. Dazu
braucht er einen Programmzähler und einen eigenen Stack. Programmzähler
und Stackpointer befinden sich im Speicher, da die entsprechenden
CPU-Register natürlich anderweitig benutzt werden. Seine Funktion ist
einfach: er holt die nächste Adresse (aus dem Fädelcode!) aus dem
Speicher und führt einen Sprung dorthin aus. Diese Adresse ist entweder
die Adresse einer Routine in Maschinensprache &ndash; diese wird dann
ausgeführt und endet nicht mit einem Return-Befehl sondern mit einem:
</p>
<p>
JP NEXT (der Name des Interpreters)
</p>
<p>
&ndash; oder die Adresse einer Routine im Fädelcode. Eine solche muß
stets mit einer
</p>

<!-- 2 Spalten: Ende --></div>

</div></div>
<!-- /Die Seite -->

<!-- Navigation unten -->
<table class="robots-nocontent style-table-zeropadding" style="width: 100%">
	<tr>
		<td class="navi-button">
			<a style="display: block" href="../../02/text/" title="Seite zurück"><span class="mirror-horizontal fas fa-play" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../01/text/" title="Erste Seite"><span class="mirror-horizontal fas fa-fast-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../../../81/07/01/text/" title="Heft zurück"><span class="mirror-horizontal fas fa-forward" aria-hidden=true></span></a>
		</td>
		<th class="navi-button">
			<a style="display: block" href="../../text/" title="Inhaltsverzeichnis">Seite 3 von 24</a>
		</th>
		<td class="navi-button">
			<a style="display: block" href="../../../../81/09/01/text/" title="Heft vor"><span class="fas fa-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../24/text/" title="Letzte Seite"><span class="fas fa-fast-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../04/text/" title="Seite vor"><span class="fas fa-play" aria-hidden=true></span></a>
		</td>
	</tr>
</table>
<!-- /Navigation unten -->

<!-- navi-footer.php / $Date: 2023-03-11 15:22:20 +0100 (Sa, 11. Mrz 2023) $ -->

<!--********************************************************************************-->

	</div>

	<nav class="nav flex-column flex-md-row style-navbar-bottom robots-nocontent"> <!--nav-pills-->
		<a class="sm-fill nav-link" href="#top"><span title="Nach oben" class="fa fa-chevron-up" aria-hidden=true></span></a>
		<!--a class="sm-fill nav-link disabled">Text</a-->
		<a class="sm-fill nav-link" href="../">Grafik</a>
		<a class="sm-fill nav-link" href="../../thumb/text/">Miniatur&shy;bilder</a>
		<a class="sm-fill nav-link" href="../../../../../../nascom/journal/pdf/81-08.pdf" download>PDF</a>
		<a class="sm-fill nav-link" href="../../../../../../datenschutzerklaerung/">Datenschutzerklärung</a>
		<a class="sm-fill nav-link" href="../../../../../../impressum/">Impressum</a>
	</nav>

	<!--bootstrap-->
	<script src="../../../../../../cdn/bootstrap/js/bootstrap.bundle.min.js"></script>
</body>

<!-- /navi-footer.php -->
</html>

<!-- /page.php -->