<!doctype html>
<html lang="de">

<!-- navi-head.php / $Date: 2023-03-11 15:22:20 +0100 (Sa, 11. Mrz 2023) $ -->
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta charset="utf-8">

	<link rel="shortcut icon" type="image/x-icon" href="../../../../../../nascom/nascom.ico">
	<link rel="icon" type="image/png" href="../../../../../../nascom/apple-touch-icon.png" sizes="32x32">
	<link rel="icon" type="image/png" href="../../../../../../nascom/apple-touch-icon.png" sizes="96x96">
	<link rel="apple-touch-icon" sizes="180x180" href="../../../../../../nascom/apple-touch-icon.png">

	<!--bootstrap-->
	<link rel="stylesheet" href="../../../../../../cdn/bootstrap/css/bootstrap.min.css">

	<!--font awesome-->
	<link rel="stylesheet" href="../../../../../../cdn/fontawesome/css/fontawesome.min.css">
	<link rel="stylesheet" href="../../../../../../cdn/fontawesome/css/solid.min.css">

	<link rel="stylesheet" type="text/css" href="../../../../../../style.css">
<!-- /navi-head.php -->

	<!-- page.php / $Date: 2024-06-30 12:05:40 +0200 (So, 30. Jun 2024) $ -->

	<title>Nascom Journal - Oktober 1981 - Ausgabe 10</title>
	<!-- Sun, 30 Jun 2024 10:05:41 GMT -->
	<meta name="keywords" content="Nascom Journal, Nascom Computer, Nascom 1, Nascom 2">
<!-- navi-body.php -->
</head>

<body>
	<nav class="navbar navbar-expand-md navbar-light bg-light style-navbar-top" id="top">
	<div class="container-fluid">
		<a class="navbar-brand" href="https://jloh.de/">
			<img src="../../../../../../favicon.ico" width="32" height="32" alt="JL" title="Homepage von Jürgen Loh">
		</a>
		<button
			class="navbar-toggler"
			type="button"
			data-bs-toggle="collapse"
			data-bs-target="#navbarSupportedContent"
			aria-controls="navbarSupportedContent"
			aria-expanded="false"
			aria-label="Toggle navigation"
		>
			<span class="navbar-toggler-icon"></span>
		</button>
		<div class="collapse navbar-collapse robots-nocontent" id="navbarSupportedContent">
			<ul class="navbar-nav md-auto">
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../z80-kit/">Z80-KIT</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../nascom/1/">Nascom 1</a>
				</li>
				<li class="nav-item">
					<a class="nav-link active" href="../../../../../../nascom/">Nascom Journal</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../nascom/magazines/issues/">Nascom Magazines</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../pico/">PICO</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../cpm-plus/">CP/M</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../">Tupel BBS</a>
				</li>
			</ul>
		</div>
	</div>
	</nav>

	<div class="container" style="max-width: 750px; color: #000; padding: 0 15px 0; background-color: #FFF">

<!--********************************************************************************-->

<!-- /navi-body.php / $Date: 2024-06-30 12:05:40 +0200 (So, 30. Jun 2024) $ -->
<table class="style-table-zeropadding" style="width: 100%">
	<tr>
		<td>
			<h1 class="h1Navi">Nascom Journal</h1>
		</td>
		<td>&nbsp;&nbsp;</td>
		<td style="vertical-align:top">
			<h2 class="h2Navi"><span class="nowrap">Oktober 1981 &middot;</span> <span class="nowrap">Ausgabe 10</span></h2>
		</td>
	</tr>
</table>

<div id="head"><!-- Navigation oben -->
<table class="robots-nocontent style-table-zeropadding" style="width: 100%">
	<tr>
		<td class="navi-button">
			<a style="display: block" href="../../02/text/" title="Seite zurück"><span class="mirror-horizontal fas fa-play" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../01/text/" title="Erste Seite"><span class="fas fa-fast-backward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../../../81/09/01/text/" title="Heft zurück"><span class="fas fa-backward" aria-hidden=true></span></a>
		</td>
		<th class="navi-button">
			<a style="display: block" href="../../text/" title="Inhaltsverzeichnis">Seite 3 von 28</a>
		</th>
		<td class="navi-button">
			<a style="display: block" href="../../../../81/12/01/text/" title="Heft vor"><span class="fas fa-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../28/text/" title="Letzte Seite"><span class="fas fa-fast-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../04/text/" title="Seite vor"><span class="fas fa-play" aria-hidden=true></span></a>
		</td>
	</tr>
</table>
</div><!-- /Navigation oben -->

<!-- Die Seite -->
<div class="row" id="page"><div class="col-sm-12 hyphenate" style="border: 1px solid #000; padding-top: 1em; padding-bottom: 1em;">

<!-- 2(2) Spalten im Blocksatz: Start --><div class="style-multi-column-2 justify">

<p>
Ein weiterer Fehler betrifft die Funktion: &bdquo;&gt;&ldquo;. Sie
erwartet die Argumente genau in der umgekehrten Reihenfolge auf dem
Stack als es in FORTH üblich ist, und schließt außerdem den Fall A = B
nicht aus.
</p>
<p>
Hier ist die Korrektur einfach Zeile 6038 wird geändert in:
</p>
<pre class="donthyphenate">
JR NC,TESTE
</pre>
<p>
Die Funktion gibt nun &bdquo;Wahr&ldquo; (&nbsp;=&nbsp;FFFFH&nbsp;) auf den Stack, wenn
T-1 größer als T ist, sonst 0.
</p>
<p>
Die Funktion &bdquo;ROT&ldquo; ist zwar richtig beschrieben und
programmiert, aber leider genau umgekehrt definiert (&nbsp;Abwärtsrotation
statt Aufwärtsrotation&nbsp;) als es sonst in FORTH üblich ist. Um eine
Sprachverwirrung auszuschalten, werden wir auch hier eine Änderung
vornehmen. Es ist die Reihenfolge der PUSH-Befehle zu verändern in:
</p>
<pre class="donthyphenate">
6025  PUSH DE
6026  PUSH HL
6027  PUSH BC
</pre>
<p>
Die folgenden Änderungen sollen keine Fehler korrigieren, sondern
werden uns später beim Programmieren in FORTH sehr nützlich sein. Sie
verbessern die Zusammenarbeit mit dem Betriebssystem und gestalten sie
zugleich variabler. Wir nehmen diese Änderungen direkt in
Maschinensprache vor. Zunächst verwandeln wir die Constante
&bdquo;MEMORY&ldquo; in eine Variable. Wir tragen ab 1171H statt 5C 11
ein: 75 11.
</p>
<p>
Bevor wir die nächste Veränderung vornehmen führen wir zunächst einen
Kaltstart des FORTH-Systems aus und kehren dann sofort mit RESET oder
dem Befehl &bdquo;91 NAS-SYS&ldquo; ins Betriebssystem zurück. Nun fügen
wir eine zusätzliche Routine und ihren Namen direkt in
Maschinensprache ein mit Hilfe des MODIFY-Kommandos:
</p>
<pre class="donthyphenate">
16AB AD 16 E1 22 0C 0C DF ,M
16B3 E5 C3 3E 10.
1E4A 06 ,M ,0 ,D ,I ,F ,Y AB
1E52 16.
</pre>
<p>
Mit &bdquo;MODIFY&ldquo; kann das M-Kommando des Betriebssystems
aufgerufen werden. Der Startwert wird auf dem Stack übergeben, bei der
Rückkehr wird die nächste freie Speicheradresse ebenfalls auf dem Stack
übergeben. (In genau dieser Weise funktioniert das natürlich nur unter
NAS-SYS. T2/&#x200b;T4-Anwender müssen sich das etwas umschreiben.) Bevor wir
nun das System wieder starten können, müssen wir noch die Werte der
beiden Variablen &bdquo;CODE&ldquo; und &bdquo;NAMES&ldquo; verändern,
damit die

<!-- 2 Spalten im Blocksatz: Spaltenwechsel -->

neue Funktion vom Interpreter erkannt und ausgeführt wird, Wir benutzen
wieder das M Kommando und tragen die neuen Werte ein:
</p>
<pre class="donthyphenate">
1293 B7.
128F 4A.
</pre>
<p>
Wir staten nun den Interpreter mit E1000 und werden dann dieses
Tiny-FORTH zunächst dazu benutzen, das System selbst auszubauen und
Schritt für Schritt eine komfortable Programmiersprache zu entwickeln.
Wir beginnen mit den bereits bekannten Funktionen <span class="uppercase">Constant</span> und
<span class="uppercase">Variable</span>. Es sind definierende Funktionen, die einen Namen in das
Dictionary eintragen und ihnen Routinen im Code zuweisen, die einen
Wert (<span class="uppercase">Constant</span>) bzw eine Adresse (<span class="uppercase">Variable</span>) auf den Stack geben.
</p>
<pre class="donthyphenate">
: VARIABLE  GETWORD     ENTER
            VARBL CMPLW CMPLW ;
: CONSTANT  GETWORD     ENTER
            CONS  CMPLW CMPLW ;
4755 CONSTANT CODEADR
4158 CONSTANT NEXTADR
</pre>
<p>
Diese beiden Konstanten brauchen wir gleich!
</p>
<p>
Die folgende Funktion erklärt sich selbst:
</p>
<pre class="donthyphenate">
: CR 13 COUT ;
</pre>
<p>
Wir brauchen sie bereits bei der nächsten Funktion, ohne die man sich
gar nicht erst an größere Programmierversuche herantrauen sollte:
</p>
<pre class="donthyphenate">
: DEL NAMES PEEKW DUP PRINTS CR
      FIRST + DUP PEEKW CODEADR POKEW
      INC   INC   NAMES   POKEW       ;
</pre>
<p>
DEL löscht
die jeweils zuletzt compilierte Funktion sowie ihren Namen, der dabei
angezeigt wird. CODE&shy;ADR gibt dabei die Adresse der Variablen CODE, die
den nächsten freien Speicherplatz für den FORTH-Code enthält. Mit
diesem Trick machen wir uns eine Variable zugänglich, die zwar im Code,
nicht aber im Dictionary enthalten ist.
</p>
<p>
Die folgende Funktion, MCODE,
ist wiederum definierend. Sie erlaubt den Einbau von Routinen in
Maschinensprache in den FORTH-Code:
</p>
<pre class="donthyphenate">
: MCODE GETWORD ENTER CODEADR PEEKW
        DUP INC INC DUP ROT POKEW MODIFY
		DUP 195 SWAP POKEB  INC DUP
		NEXTADR SWAP POKEW INC INC
          CODEADR POKEW
</pre>
<p>
Wir wollen MCODE nun gleich benutzen, um eine Standard-FORTH-Routine in
Maschinencode zu schreiben:
</p>
<pre class="donthyphenate">
MCODE  OVER
1743 E1 D1 D5 E5 D5.
</pre>
<p>
OVER ist ein Befehl zur Stackmanipulation wie DUP und ROT. Die Funktion
kopiert den 2.
</p>

<!-- 2 Spalten: Ende --></div>

</div></div>
<!-- /Die Seite -->

<!-- Navigation unten -->
<table class="robots-nocontent style-table-zeropadding" style="width: 100%">
	<tr>
		<td class="navi-button">
			<a style="display: block" href="../../02/text/" title="Seite zurück"><span class="mirror-horizontal fas fa-play" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../01/text/" title="Erste Seite"><span class="fas fa-fast-backward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../../../81/09/01/text/" title="Heft zurück"><span class="fas fa-backward" aria-hidden=true></span></a>
		</td>
		<th class="navi-button">
			<a style="display: block" href="../../text/" title="Inhaltsverzeichnis">Seite 3 von 28</a>
		</th>
		<td class="navi-button">
			<a style="display: block" href="../../../../81/12/01/text/" title="Heft vor"><span class="fas fa-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../28/text/" title="Letzte Seite"><span class="fas fa-fast-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../04/text/" title="Seite vor"><span class="fas fa-play" aria-hidden=true></span></a>
		</td>
	</tr>
</table>
<!-- /Navigation unten -->

<!-- navi-footer.php / $Date: 2023-03-11 15:22:20 +0100 (Sa, 11. Mrz 2023) $ -->

<!--********************************************************************************-->

	</div>

	<nav class="nav flex-column flex-md-row style-navbar-bottom robots-nocontent"> <!--nav-pills-->
		<a class="sm-fill nav-link" href="#top"><span title="Nach oben" class="fa fa-chevron-up" aria-hidden=true></span></a>
		<!--a class="sm-fill nav-link disabled">Text</a-->
		<a class="sm-fill nav-link" href="../">Grafik</a>
		<a class="sm-fill nav-link" href="../../thumb/text/">Miniatur&shy;bilder</a>
		<a class="sm-fill nav-link" href="../../../../../../nascom/journal/pdf/81-10.pdf" download>PDF</a>
		<a class="sm-fill nav-link" href="../../../../../../datenschutzerklaerung/">Datenschutzerklärung</a>
		<a class="sm-fill nav-link" href="../../../../../../impressum/">Impressum</a>
	</nav>

	<!--bootstrap-->
	<script src="../../../../../../cdn/bootstrap/js/bootstrap.bundle.min.js"></script>
</body>

<!-- /navi-footer.php -->
</html>

<!-- /page.php -->