<!doctype html>
<html lang="de">

<!-- navi-head.php / $Date: 2025-01-05 17:13:18 +0100 (So, 05. Jan 2025) $ -->
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta charset="utf-8">

	<link rel="shortcut icon" type="image/x-icon" href="../../../../../../nascom/nascom.ico">
	<link rel="icon" type="image/png" href="../../../../../../nascom/apple-touch-icon.png" sizes="32x32">
	<link rel="icon" type="image/png" href="../../../../../../nascom/apple-touch-icon.png" sizes="96x96">
	<link rel="apple-touch-icon" sizes="180x180" href="../../../../../../nascom/apple-touch-icon.png">

	<!--bootstrap-->
	<link rel="stylesheet" href="../../../../../../cdn/bootstrap/css/bootstrap.min.css">

	<!--font awesome-->
	<link rel="stylesheet" href="../../../../../../cdn/fontawesome/css/fontawesome.min.css">
	<link rel="stylesheet" href="../../../../../../cdn/fontawesome/css/solid.min.css">

	<link rel="stylesheet" type="text/css" href="../../../../../../style.css">
	<link rel="canonical" href="https://tupel.jloh.de/nascom/journal/81/09/10/text/">
<!-- /navi-head.php -->

	<!-- page.php / $Date: 2024-07-13 18:55:41 +0200 (Sa, 13. Jul 2024) $ -->

	<title>Nascom Journal - September 1981 - Ausgabe 9</title>
	<!-- Sun, 16 Mar 2025 14:14:42 GMT -->
	<meta name="keywords" content="Nascom Journal, Nascom Computer, Nascom 1, Nascom 2">
<!-- navi-body.php -->
</head>

<body>
	<nav class="navbar navbar-expand-md navbar-light bg-light style-navbar-top" id="top">
	<div class="container-fluid">
		<a class="navbar-brand" href="https://jloh.de/">
			<img src="../../../../../../favicon.ico" width="32" height="32" alt="JL" title="Homepage von Jürgen Loh">
		</a>
		<button
			class="navbar-toggler"
			type="button"
			data-bs-toggle="collapse"
			data-bs-target="#navbarSupportedContent"
			aria-controls="navbarSupportedContent"
			aria-expanded="false"
			aria-label="Toggle navigation"
		>
			<span class="navbar-toggler-icon"></span>
		</button>
		<div class="collapse navbar-collapse robots-nocontent" id="navbarSupportedContent">
			<ul class="navbar-nav md-auto">
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../z80-kit/">Z80-KIT</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../nascom/1/">Nascom 1</a>
				</li>
				<li class="nav-item">
					<a class="nav-link active" href="../../../../../../nascom/">Nascom Journal</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../nascom/magazines/issues/">Nascom Magazines</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../pico/">PICO</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../cpm-plus/">CP/M</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../">Tupel BBS</a>
				</li>
			</ul>
		</div>
	</div>
	</nav>

	<div class="container" style="max-width: 750px; color: #000; padding: 0 15px 0; background-color: #FFF">

<!--********************************************************************************-->

<!-- /navi-body.php / $Date: 2025-03-16 15:14:42 +0100 (So, 16. Mrz 2025) $ -->
<table class="style-table-zeropadding" style="width: 100%">
	<tr>
		<td>
			<h1 class="h1Navi">Nascom Journal</h1>
		</td>
		<td>&nbsp;&nbsp;</td>
		<td style="vertical-align:top">
			<h2 class="h2Navi"><span class="nowrap">September 1981 &middot;</span> <span class="nowrap">Ausgabe 9</span></h2>
		</td>
	</tr>
</table>

<div id="head"><!-- Navigation oben -->
<table class="robots-nocontent style-table-zeropadding" style="width: 100%">
	<tr>
		<td class="navi-button">
			<a style="display: block" href="../../09/text/" title="Seite zurück"><span class="mirror-horizontal fas fa-play" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../01/text/" title="Erste Seite"><span class="mirror-horizontal fas fa-fast-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../../../81/08/01/text/" title="Heft zurück"><span class="mirror-horizontal fas fa-forward" aria-hidden=true></span></a>
		</td>
		<th class="navi-button">
			<a style="display: block" href="../../text/" title="Inhaltsverzeichnis">Seite 10 von 28</a>
		</th>
		<td class="navi-button">
			<a style="display: block" href="../../../../81/10/01/text/" title="Heft vor"><span class="fas fa-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../28/text/" title="Letzte Seite"><span class="fas fa-fast-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../11/text/" title="Seite vor"><span class="fas fa-play" aria-hidden=true></span></a>
		</td>
	</tr>
</table>
</div><!-- /Navigation oben -->

<!-- Die Seite -->
<div class="row" id="page"><div class="col-sm-12 hyphenate" style="border: 1px solid #000; padding-top: 1em; padding-bottom: 1em;">

<!-- 2(2) Spalten im Blocksatz: Start --><div class="style-multi-column-2 justify">

<h1 id="article1">
FORTH für den <span class="uppercase">Nascom</span>
</h1>
<h3>
Teil&nbsp;2 &ndash; von Günter Kreidl
</h3>
<p>
Im <a href="../../../08/03/text/#article1">letzten Heft</a>
wurde der prinzipielle Aufbau einer
Threaded-Code-Sprache beschrieben. In diesem Heft folgt nun das
Assembler-Listing einer 1. Version, die nach der Anleitung von Richard
Fritzson
(&bdquo;<!-- External Link --><a href="https://archive.org/details/kilobaudmagazine-1981-02/page/n76/mode/2up" title="Externer Link: Kilobaud Microcomputing Magazine (February 1981), page 76" target="_blank" rel="noreferrer">Write Your Own FORTH Interpreter</a><!-- /External Link -->&ldquo;,
<!-- External Link --><a href="https://archive.org/details/kilobaudmagazine-1981-02" title="Externer Link: Kilobaud Microcomputing Magazine (February 1981)" target="_blank" rel="noreferrer">Microcomputing, Februar 81</a><!-- /External Link -->;
&bdquo;<!-- External Link --><a href="https://archive.org/details/kilobaudmagazine-1981-03/page/n41/mode/2up" title="Externer Link: Kilobaud Microcomputing Magazine (March 1981), page 44" target="_blank" rel="noreferrer">Write Your Own Pseudo-FORTH Compiler</a><!-- /External Link -->&ldquo;,
<!-- External Link --><a href="https://archive.org/details/kilobaudmagazine-1981-03" title="Externer Link: Kilobaud Microcomputing Magazine (March 1981)" target="_blank" rel="noreferrer">ebenda, März 81</a><!-- /External Link -->)
geschrieben wurde. Wie der Titel des zweiten Aufsatzes schon
sagt, hat sich &bdquo;der Sohn vom Fritz&ldquo; nicht streng an die
Terminologie des Standard-FORTH gehalten, falls es so etwas im strengen
Sinne überhaupt gibt. Erst nach der Fertigstellung dieser Version kam
mir ein Verzeichnis des Standard-FORTH der FORTH Interest Group in die
Hände &ndash; zu spät, um noch Anpassungen vorzunehmen. Programmaufbau,
Threaded-Code-Routinen und Konstruktion des &bdquo;Dictionary&ldquo;
habe ich von Fritzson übernommen. Die Maschinencode-Routinen wurden
vom
<!-- External Link --><a href="https://de.wikipedia.org/wiki/Intel_8080" title="Externer Link" target="_blank" rel="noreferrer">8080</a><!-- /External Link -->-Assembler-Code
in
<!-- External Link --><a href="https://de.wikipedia.org/wiki/Zilog_Z80" title="Externer Link: Z80" target="_blank" rel="noreferrer">Z-80</a><!-- /External Link -->-Code
umgeschrieben und teilweise mit
den effektiveren Z-80-Befehlen verbessert. Die Hauptschwächen der
Vorlage (nur positive Zahlen, keine Überlaufkontrolle bei den
mathematischen Funktionen, keine Syntax-Kontrolle) wurden noch nicht
verbessert. Ich habe jedoch eine Reihe von logischmathematischen
Operationen hinzugefügt und eine Software-Schnittstelle zum
Betriebs-System, die den Einbau fast aller Unterprogramme des Monitors in
FORTH-Programme ermöglicht. Diese Routine ist allerdings spezifisch auf
NAS-SYS zugeschnitten und muß von T2/&#x200b;T4-Benutzern neu geschrieben
werden. Ansonsten ist das Programm auch mit T2/&#x200b;T4 lauffähig, wenn man
den Aufruf der Ein- und Ausgaberoutinen ändert (es wurde Platz für
CALL-Befehle gelassen) und die Steuerzeichen für den Bildschirm
austauscht. Geändert habe ich auch die Speicheraufteilung. Stacks und
Puffer wurden aus dem Programmbereich entfernt. Sie belegen den Bereich
von E00 bis 1000 Hex. Das Programm belegt beim erstmaligen Start den
Speicher von 1000 bis 1871 Hex. Beim Aufruf des Interpreters wird dann
das &bdquo;Dictionary&ldquo; an die Obergrenze des Speichers (im Listing
2000 Hex) verschoben. Das ursprüngliche &bdquo;Dictionary&ldquo; und die
Verschiebungsroutine werden dann von dem neu compilierten Code
überschrieben, so daß also der Code von unten

<!-- 2 Spalten im Blocksatz: Spaltenwechsel -->

nach oben und das &bdquo;Dictionary&ldquo; von oben nach unten
aufeinander zuwachsen. Ein gegenseitiges Überschreiben wird dabei
verhindert (<span class="uppercase">Dictionary Full</span>). Die Initialisierungsroutine wurde ganz
neu geschrieben, da die alte keinen Warmstart ermöglichte. Beim ersten
Start wird die Verschiebungsroutine aufgerufen, bei jedem neuen Start
(ebenfalls mit E 1000) findet man das System in dem Zustand vor, in dem
man es verlassen hat. Will man ein durch neu compilierte Befehle
erweitertes System auf Cassette speichern, muß man den Bereich von 1000
bis 2000 abspeichern. Man kann aber auch eine Funktion definieren, die
den Programmtext auf Cassette speichert. (Mehr darüber im
<a href="../../../10/02/text/#article3">nächsten Heft</a>)
Überhaupt lassen sich die meisten der gegenüber dem
Standard-FORTH fehlenden Operationen mit dem System selbst relativ
leicht compilieren. Die oben beschriebenen Schwächen hingegen lassen
sich nur durch bessere Maschinenprogramme beheben. Ich hoffe hierbei
auf die rege Mitarbeit der Leser des Journals.
</p>
<h4>
Zum Assemblerlisting
</h4>
<p>
Da ich bei meinem <span class="uppercase">Nascom</span> nur 5&nbsp;KB Speicher für den Quelltext zur
Verfügung habe, mußte ich das Programm in Blöcken assemblieren. Deshalb
wurden alle nicht lokalen Marken durch EQU-Definitionen im Block 0
ersetzt. Damit das Programm trotzdem leicht zu ändern ist, sind die
Adressen nicht absolut sondern relativ definiert, jeweils durch die
Länge der vorangehenden Routine. Aus dem gleichen Grund habe ich auf
alle Kommentare verzichtet, nur der Name der Routine wird jeweils als
Kommentar angehängt. Es folgt darum unten eine Kurzbeschreibung aller
Routinen, die von FORTH aus aufgerufen werden können. Die nicht im
&bdquo;Dictionary&ldquo; enthaltenen Unterprogramme werden im
<a href="../../../10/02/text/#article3">nächsten Heft</a>
erläutert. In der Beschreibung bedeutet &bdquo;T&ldquo; den obersten
Wert auf dem Stack, &bdquo;T&minus;1&ldquo; den zweitobersten etc.
&bdquo;X&ldquo; steht für das brit. Pfundzeichen, &sect; für das
Dollarzeichen.
</p>
<p>
An das Assemblerlisting schließt sich noch eine Demonstration des
Programms an. Mit der U-Option lief die Schreibmaschine mit, als das
Programm aufgerufen wurde. Alle Eingaben und alle Antworten des
Interpreters bis zum Rücksprung ins Betriebssystem wurden so
dokumentiert. Ich hoffe, daß dies eine Hilfe bei der Inbetriebnahme des
Programms darstellt.
</p>

<!-- 2 Spalten: Ende --></div>

</div></div>
<!-- /Die Seite -->

<!-- Navigation unten -->
<table class="robots-nocontent style-table-zeropadding" style="width: 100%">
	<tr>
		<td class="navi-button">
			<a style="display: block" href="../../09/text/" title="Seite zurück"><span class="mirror-horizontal fas fa-play" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../01/text/" title="Erste Seite"><span class="mirror-horizontal fas fa-fast-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../../../81/08/01/text/" title="Heft zurück"><span class="mirror-horizontal fas fa-forward" aria-hidden=true></span></a>
		</td>
		<th class="navi-button">
			<a style="display: block" href="../../text/" title="Inhaltsverzeichnis">Seite 10 von 28</a>
		</th>
		<td class="navi-button">
			<a style="display: block" href="../../../../81/10/01/text/" title="Heft vor"><span class="fas fa-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../28/text/" title="Letzte Seite"><span class="fas fa-fast-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../11/text/" title="Seite vor"><span class="fas fa-play" aria-hidden=true></span></a>
		</td>
	</tr>
</table>
<!-- /Navigation unten -->

<!-- navi-footer.php / $Date: 2023-03-11 15:22:20 +0100 (Sa, 11. Mrz 2023) $ -->

<!--********************************************************************************-->

	</div>

	<nav class="nav flex-column flex-md-row style-navbar-bottom robots-nocontent"> <!--nav-pills-->
		<a class="sm-fill nav-link" href="#top"><span title="Nach oben" class="fa fa-chevron-up" aria-hidden=true></span></a>
		<!--a class="sm-fill nav-link disabled">Text</a-->
		<a class="sm-fill nav-link" href="../">Grafik</a>
		<a class="sm-fill nav-link" href="../../thumb/text/">Miniatur&shy;bilder</a>
		<a class="sm-fill nav-link" href="../../../../../../nascom/journal/pdf/81-09.pdf" download>PDF</a>
		<a class="sm-fill nav-link" href="../../../../../../datenschutzerklaerung/">Datenschutzerklärung</a>
		<a class="sm-fill nav-link" href="../../../../../../impressum/">Impressum</a>
	</nav>

	<!--bootstrap-->
	<script src="../../../../../../cdn/bootstrap/js/bootstrap.bundle.min.js"></script>
</body>

<!-- /navi-footer.php -->
</html>

<!-- /page.php -->