<!doctype html>
<html lang="de">

<!-- navi-head.php / $Date: 2023-03-11 15:22:20 +0100 (Sa, 11. Mrz 2023) $ -->
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta charset="utf-8">

	<link rel="shortcut icon" type="image/x-icon" href="../../../../../../nascom/nascom.ico">
	<link rel="icon" type="image/png" href="../../../../../../nascom/apple-touch-icon.png" sizes="32x32">
	<link rel="icon" type="image/png" href="../../../../../../nascom/apple-touch-icon.png" sizes="96x96">
	<link rel="apple-touch-icon" sizes="180x180" href="../../../../../../nascom/apple-touch-icon.png">

	<!--bootstrap-->
	<link rel="stylesheet" href="../../../../../../cdn/bootstrap/css/bootstrap.min.css">

	<!--font awesome-->
	<link rel="stylesheet" href="../../../../../../cdn/fontawesome/css/fontawesome.min.css">
	<link rel="stylesheet" href="../../../../../../cdn/fontawesome/css/solid.min.css">

	<link rel="stylesheet" type="text/css" href="../../../../../../style.css">
<!-- /navi-head.php -->

	<!-- page.php / $Date: 2024-07-13 18:55:41 +0200 (Sa, 13. Jul 2024) $ -->

	<title>Nascom Journal - Dezember 1981 - Ausgabe 11/12</title>
	<!-- Sun, 15 Dec 2024 13:31:40 GMT -->
	<meta name="keywords" content="Nascom Journal, Nascom Computer, Nascom 1, Nascom 2">
<!-- navi-body.php -->
</head>

<body>
	<nav class="navbar navbar-expand-md navbar-light bg-light style-navbar-top" id="top">
	<div class="container-fluid">
		<a class="navbar-brand" href="https://jloh.de/">
			<img src="../../../../../../favicon.ico" width="32" height="32" alt="JL" title="Homepage von Jürgen Loh">
		</a>
		<button
			class="navbar-toggler"
			type="button"
			data-bs-toggle="collapse"
			data-bs-target="#navbarSupportedContent"
			aria-controls="navbarSupportedContent"
			aria-expanded="false"
			aria-label="Toggle navigation"
		>
			<span class="navbar-toggler-icon"></span>
		</button>
		<div class="collapse navbar-collapse robots-nocontent" id="navbarSupportedContent">
			<ul class="navbar-nav md-auto">
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../z80-kit/">Z80-KIT</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../nascom/1/">Nascom 1</a>
				</li>
				<li class="nav-item">
					<a class="nav-link active" href="../../../../../../nascom/">Nascom Journal</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../nascom/magazines/issues/">Nascom Magazines</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../pico/">PICO</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../cpm-plus/">CP/M</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../">Tupel BBS</a>
				</li>
			</ul>
		</div>
	</div>
	</nav>

	<div class="container" style="max-width: 750px; color: #000; padding: 0 15px 0; background-color: #FFF">

<!--********************************************************************************-->

<!-- /navi-body.php / $Date: 2024-12-15 14:31:39 +0100 (So, 15. Dez 2024) $ -->
<table class="style-table-zeropadding" style="width: 100%">
	<tr>
		<td>
			<h1 class="h1Navi">Nascom Journal</h1>
		</td>
		<td>&nbsp;&nbsp;</td>
		<td style="vertical-align:top">
			<h2 class="h2Navi"><span class="nowrap">Dezember 1981 &middot;</span> <span class="nowrap">Ausgabe 11/12</span></h2>
		</td>
	</tr>
</table>

<div id="head"><!-- Navigation oben -->
<table class="robots-nocontent style-table-zeropadding" style="width: 100%">
	<tr>
		<td class="navi-button">
			<a style="display: block" href="../../02/text/" title="Seite zurück"><span class="mirror-horizontal fas fa-play" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../01/text/" title="Erste Seite"><span class="mirror-horizontal fas fa-fast-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../../../81/10/01/text/" title="Heft zurück"><span class="mirror-horizontal fas fa-forward" aria-hidden=true></span></a>
		</td>
		<th class="navi-button">
			<a style="display: block" href="../../text/" title="Inhaltsverzeichnis">Seite 3 von 55</a>
		</th>
		<td class="navi-button">
			<a style="display: block" href="../../../../82/01/01/text/" title="Heft vor"><span class="fas fa-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../55/text/" title="Letzte Seite"><span class="fas fa-fast-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../04/text/" title="Seite vor"><span class="fas fa-play" aria-hidden=true></span></a>
		</td>
	</tr>
</table>
</div><!-- /Navigation oben -->

<!-- Die Seite -->
<div class="row" id="page"><div class="col-sm-12 hyphenate" style="border: 1px solid #000; padding-top: 1em; padding-bottom: 1em;">

<!-- 2(2) Spalten im Blocksatz: Start --><div class="style-multi-column-2 justify">

<h1 id="article1">
FORTH für den <span class="uppercase">Nascom</span>
</h1>
<h3>
Teil&nbsp;4 von Günter Kreidl
</h3>
<p>
Zunächst einige Fehlerkorrekturen zum
<a href="../../../10/02/text/#article3">letzten Beitrag</a>:
Die als &bdquo;&lt;&ldquo; bezeichnete Funktion
muß natürlich &bdquo;&lt;=&ldquo; heißen (da hab&rsquo; ich
einfach gepennt!). Bei der Beschreibung der
Funktion FILL muß es heißen: &bdquo;an die Adresse
(T-2)&ldquo;. Außerdem ist im Druck bei der
Funktion MCODE das abschließende Semicolon
verloren gegangen. Nun aber zu den neuen
Funktionen:
</p>
<pre class="donthyphenate">
: SPACE 32 COUT ;
: SPACES 1 FOR SPACE LOOP ;
: CLS 12 COUT ;
</pre>
<p>
SPACES erwartet die gewünschte Anzahl der
Leerzeichen als Argument auf dem Stack, sie
kann z.B. so aufgerufen werden &bdquo;10 SPACES&ldquo;.
</p>
<pre class="donthyphenate">
3113 CONSTANT CURSADR
: LINE       64 * 1994 + CURSADR POKEW ;
: POSITION   DEC CURSADR MEM+ ;
: SCREEN     SWAP LINE POSITION ;
</pre>
<p>
Die ersten beiden Funktionen erwarten je
einen Wert auf dem Stack und setzen den
Cursor in die entsprechende Zeile bzw. Position
einer Zeile. SCREEN kombiniert diese
beiden Funktionen und erwartet deshalb zwei
Werte: &bdquo;(Zeile) (Position) SCREEN&ldquo;.
</p>
<p>
Einige weitere recht triviale Funktionen:
</p>
<pre class="donthyphenate">
: '         SCAN  IF FIRST POP PEEKB
                  ELSE ERROR TYPE THEN ;
: PRINTHEX  3084 POKEW 102 NAS-SYS     ;
: =         CONBXA PRINTS              ;
: .         DUP =                      ;
: BACKSPACE 8 COUT                     ;
</pre>
<p>
Die Funktion &bdquo;'&ldquo; gibt den dezimalen Wert eines ASCII-Zeichens
auf den Stack. Folgendes Beispiel illustriert mehrere Funktionen
gleichzeitig:
</p>
<pre class="donthyphenate">
' S . 2 SPACES PRINTHEX
83  0053  (Antwort des Interpreters)
</pre>
<p>
Die Tastaturabfrage <span class="uppercase">Terminal</span>? muß wieder in Maschinencode
programmiert werden, Sie gibt 0 auf den Stack, wenn keine Eingabe von
der Tastatur erfolgt ist, sonst den Wert des Zeichens und &minus;1 (=FFFFH) :
</p>
<pre class="donthyphenate">
MCODE TERMINAL?
XXXX DF 62 21 00 00 30 07 6F
XXXX 26 00 E5 21 FF FF E5.
</pre>
<p>
Die Adressen XXXX werden vom Monitor angegeben. Die folgende Funktion
druckt das jeweils gewünschte &bdquo;Dictionary&ldquo; aus, dessen
Startadresse auf dem Stack übergeben wird

<!-- 2 Spalten im Blocksatz: Spaltenwechsel -->

(z.B. mit NAMES PEEKW für den Interpreter).
</p>
<pre class="donthyphenate">
PRINTDIC REPEAT DUP FIRST DUP EQZ UNTIL
                  + SWAP PRINTS 2 SPACES
                  INC INC           LOOP
           CLEAR ;
</pre>
<p>
In der Grundversion belegt der Interpreter 4&nbsp;KB Speicher, wobei das
Dictionary am oberen Ende des Speicherbereichs liegt. Es ist nun sehr
leicht möglich und mit den gezeigten Erweiterungen auch bald nötig, das
Dictionary zu verschieben. Die obere und untere Grenze sind durch die
Variablen MEMORY und NAMES gegeben, und die Verschiebung wird mit der
Funktion MOVE&shy;BYTES ausgeführt.
</p>
<p>
Anschließend müssen die Variablen NAMES und MEMORY natürlich angepaßt
werden und ebenfalls eine Variable CDICT, die aber nicht im Dictionary
enthalten ist und deshalb absolut eingegeben werden muß (bei 1297H bzw.
4759 dezimal). Will man nun das erweiterte Programm auf Cassette
speichern, so müssen zwei getrennte Blöcke gespeichert werden, Das
geschieht mit der folgenden Funktion:
</p>
<pre class="donthyphenate">
: WRITEM 4096 3084 POKEW CODEADR PEEKW
         3086 POKEW 87 NAS-SYS
         NAMES PEEKW 3084 POKEW MEMORY
         PEEKW INC 3086 POKEW 87 NAS-SYS ;
</pre>
<p>
Es folgt nun ein neuer, vereinfachter
Interpreter, den wir für den Bildschirm-Editor brauchen sowie die
Hilfsvariable:
</p>
<pre class="donthyphenate">
NEGONE VARIABLE IFLAG
: INTERPRETER  NEGONE IFLAG POKEW READLINE
    REPEAT     SCAN IFLAG PEEKW * EQZ UNTIL
               NAMES PEEKW LOOKUP
              IF  EXECUTE
              ELSE CONAXB EQZ IF ERROR TYPE
                   PRINTS ZERO IFLAG POKEW
              THEN THEN LOOP
     IFLAG PEEKW EQZ IF CLEAR THEN  ;
</pre>
<p>
Dieser Interpreter arbeitet ähnlich wie
die Funktion <span class="uppercase">Interact</span>, nur ohne Prompt-Zeichen und ohne Anzeige des
obersten Stackwertes. Mit Hilfe der folgenden Funktion kann man von
<span class="uppercase">Interact</span> nach <span class="uppercase">Interpreter</span> umsteigen und umgekehrt:
</p>
<pre class="donthyphenate">
: ENTRY  GETWORD NAMES PEEKW LOOKUP
         IF    EXEC POKEW
         ELSE ERROR TYPE PRINTS THEN  ;
</pre>
<p>
Der Aufruf erfolgt mit &bdquo;ENTRY <span class="uppercase">Interpreter</span>&ldquo;. Für
den Editor benötigen wir noch eine Variable, Konstanten und eine
Hilfsfunktion:
</p>
<pre class="donthyphenate">
ONE VARIABLE RFLAG
CADR BLINK CONSTANT BLADR
</pre>

<!-- 2 Spalten: Ende --></div>

</div></div>
<!-- /Die Seite -->

<!-- Navigation unten -->
<table class="robots-nocontent style-table-zeropadding" style="width: 100%">
	<tr>
		<td class="navi-button">
			<a style="display: block" href="../../02/text/" title="Seite zurück"><span class="mirror-horizontal fas fa-play" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../01/text/" title="Erste Seite"><span class="mirror-horizontal fas fa-fast-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../../../81/10/01/text/" title="Heft zurück"><span class="mirror-horizontal fas fa-forward" aria-hidden=true></span></a>
		</td>
		<th class="navi-button">
			<a style="display: block" href="../../text/" title="Inhaltsverzeichnis">Seite 3 von 55</a>
		</th>
		<td class="navi-button">
			<a style="display: block" href="../../../../82/01/01/text/" title="Heft vor"><span class="fas fa-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../55/text/" title="Letzte Seite"><span class="fas fa-fast-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../04/text/" title="Seite vor"><span class="fas fa-play" aria-hidden=true></span></a>
		</td>
	</tr>
</table>
<!-- /Navigation unten -->

<!-- navi-footer.php / $Date: 2023-03-11 15:22:20 +0100 (Sa, 11. Mrz 2023) $ -->

<!--********************************************************************************-->

	</div>

	<nav class="nav flex-column flex-md-row style-navbar-bottom robots-nocontent"> <!--nav-pills-->
		<a class="sm-fill nav-link" href="#top"><span title="Nach oben" class="fa fa-chevron-up" aria-hidden=true></span></a>
		<!--a class="sm-fill nav-link disabled">Text</a-->
		<a class="sm-fill nav-link" href="../">Grafik</a>
		<a class="sm-fill nav-link" href="../../thumb/text/">Miniatur&shy;bilder</a>
		<a class="sm-fill nav-link" href="../../../../../../nascom/journal/pdf/81-12.pdf" download>PDF</a>
		<a class="sm-fill nav-link" href="../../../../../../datenschutzerklaerung/">Datenschutzerklärung</a>
		<a class="sm-fill nav-link" href="../../../../../../impressum/">Impressum</a>
	</nav>

	<!--bootstrap-->
	<script src="../../../../../../cdn/bootstrap/js/bootstrap.bundle.min.js"></script>
</body>

<!-- /navi-footer.php -->
</html>

<!-- /page.php -->