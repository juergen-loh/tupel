<!doctype html>
<html lang="de">

<!-- navi-head.php / $Date: 2025-01-05 17:13:18 +0100 (So, 05. Jan 2025) $ -->
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta charset="utf-8">

	<link rel="shortcut icon" type="image/x-icon" href="../../../../../../nascom/nascom.ico">
	<link rel="icon" type="image/png" href="../../../../../../nascom/apple-touch-icon.png" sizes="32x32">
	<link rel="icon" type="image/png" href="../../../../../../nascom/apple-touch-icon.png" sizes="96x96">
	<link rel="apple-touch-icon" sizes="180x180" href="../../../../../../nascom/apple-touch-icon.png">

	<!--bootstrap-->
	<link rel="stylesheet" href="../../../../../../cdn/bootstrap/css/bootstrap.min.css">

	<!--font awesome-->
	<link rel="stylesheet" href="../../../../../../cdn/fontawesome/css/fontawesome.min.css">
	<link rel="stylesheet" href="../../../../../../cdn/fontawesome/css/solid.min.css">

	<link rel="stylesheet" type="text/css" href="../../../../../../style.css">
	<link rel="canonical" href="https://tupel.jloh.de/nascom/journal/83/09/08/text/">
<!-- /navi-head.php -->

	<!-- page.php / $Date: 2024-07-13 18:55:41 +0200 (Sa, 13. Jul 2024) $ -->

	<title>80-Bus Journal - September 1983 - Ausgabe 9</title>
	<!-- Sun, 05 Jan 2025 16:13:18 GMT -->
	<meta name="keywords" content="80-Bus Journal, Nascom Computer, Nascom 1, Nascom 2">
<!-- navi-body.php -->
</head>

<body>
	<nav class="navbar navbar-expand-md navbar-light bg-light style-navbar-top" id="top">
	<div class="container-fluid">
		<a class="navbar-brand" href="https://jloh.de/">
			<img src="../../../../../../favicon.ico" width="32" height="32" alt="JL" title="Homepage von Jürgen Loh">
		</a>
		<button
			class="navbar-toggler"
			type="button"
			data-bs-toggle="collapse"
			data-bs-target="#navbarSupportedContent"
			aria-controls="navbarSupportedContent"
			aria-expanded="false"
			aria-label="Toggle navigation"
		>
			<span class="navbar-toggler-icon"></span>
		</button>
		<div class="collapse navbar-collapse robots-nocontent" id="navbarSupportedContent">
			<ul class="navbar-nav md-auto">
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../z80-kit/">Z80-KIT</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../nascom/1/">Nascom 1</a>
				</li>
				<li class="nav-item">
					<a class="nav-link active" href="../../../../../../nascom/">Nascom Journal</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../nascom/magazines/issues/">Nascom Magazines</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../pico/">PICO</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../cpm-plus/">CP/M</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../">Tupel BBS</a>
				</li>
			</ul>
		</div>
	</div>
	</nav>

	<div class="container" style="max-width: 750px; color: #000; padding: 0 15px 0; background-color: #FFF">

<!--********************************************************************************-->

<!-- /navi-body.php / $Date: 2024-12-30 14:10:13 +0100 (Mo, 30. Dez 2024) $ -->
<table class="style-table-zeropadding" style="width: 100%">
	<tr>
		<td>
			<h1 class="h1Navi">80-Bus Journal</h1>
		</td>
		<td>&nbsp;&nbsp;</td>
		<td style="vertical-align:top">
			<h2 class="h2Navi"><span class="nowrap">September 1983 &middot;</span> <span class="nowrap">Ausgabe 9</span></h2>
		</td>
	</tr>
</table>

<div id="head"><!-- Navigation oben -->
<table class="robots-nocontent style-table-zeropadding" style="width: 100%">
	<tr>
		<td class="navi-button">
			<a style="display: block" href="../../07/text/" title="Seite zurück"><span class="mirror-horizontal fas fa-play" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../01/text/" title="Erste Seite"><span class="mirror-horizontal fas fa-fast-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../../../83/07/01/text/" title="Heft zurück"><span class="mirror-horizontal fas fa-forward" aria-hidden=true></span></a>
		</td>
		<th class="navi-button">
			<a style="display: block" href="../../text/" title="Inhaltsverzeichnis">Seite 8 von 28</a>
		</th>
		<td class="navi-button">
			<a style="display: block" href="../../../../83/11/01/text/" title="Heft vor"><span class="fas fa-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../28/text/" title="Letzte Seite"><span class="fas fa-fast-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../09/text/" title="Seite vor"><span class="fas fa-play" aria-hidden=true></span></a>
		</td>
	</tr>
</table>
</div><!-- /Navigation oben -->

<!-- Die Seite -->
<div class="row" id="page"><div class="col-sm-12 hyphenate" style="border: 1px solid #000; padding-top: 1em; padding-bottom: 1em;">

<!-- Kasten über ganze Spalte: Start --><div style="border-style: solid; padding: 10px; border-width: 2px;  width: 100%; ">
<img class="img-fluid mx-auto d-block " src="../../Image-08-1.jpeg" alt="" width="450" height="101">
<!-- Kasten: Ende --></div>

<br>

<!-- 2(2) Spalten im Blocksatz: Start --><div class="style-multi-column-2 justify">

<p>
Nun ist der Controller bereit, vom Rechner
Befehle entgegenzunehmen. Dafür stellt er
folgende Register zur Verfügung:
</p>

<table style="width: 100%">
<tr><td>FDCCMD</td><td>Kommandoregister</td></tr>
<tr><td>FDCTRK</td><td>speichert die Spurnummer</td></tr>
<tr><td>FDCSEC</td><td>speichert die Sektornummer</td></tr>
<tr><td>FDCDAT</td><td>Speicher für Schreib/&#x200b;Lesedaten</td></tr>
<tr><td>FDCSTA</td><td>gibt Fehlermeldungen aus</td></tr>
</table>

<p>
Mit dem Out-Befehl (Taste O) und der entsprechenden Portadresse (sind
dem Anfang des
<a href="../../11/text/#article1">Assemblerlistings</a>
zu entnehmen) können zu Testzwecken
direkt Kommandos an den FDC ausgegeben werden.
</p>
<p>
Als Beispiel:
</p>
<p>
O&nbsp;0C&nbsp;03 &nbsp; &nbsp; läßt den Schreib/&#x200b;Lesekopf auf Spur 00 zurückfahren (dazu sollte
man die Schnecke des Laufwerks manuell vorstellen, damit&rsquo;s auch eine
Strecke zum fahren gibt)
</p>
<p>
Die möglichen Befehle sind ebenfalls am Beginn
des Listings zusammengestellt.
</p>
<p>
Nach der Ausführung eines solchen
Befehls macht der FDC einen Interrupt, der ihn in unserem Programm in
die Routine FLPINT springen läßt. Zu Testzwecken wird dort das Wort
&bdquo;INT&ldquo; auf den Bildschirm geschrieben gefolgt von der Adresse,
die nach dem Programmteil steht, der durch den Interrupt unterbrochen
wurde. Dieser Teil der Interruptroutine wird nach erfolgten Testläufen
wieder entfernt.
</p>
<p>
Die Hauptaufgabe des Interruptprogramms ist es festzustellen, ob die
Unterbrechung innerhalb einer Schleife geschah. Ist dies der Fall, wird
das Programm außerhalb der Schleife fortgesetzt.
</p>
<p>
Dieser Programmiertrick erlaubt es, mit einer Endlosschleife auf einen
Interrupt zu warten. (z.B. in Zeile 1880). Handelt es sich um NMIs, so
wird nach Rückkehr aus der NMI-Routine (hier Lesen eines Bytes von
Diskette) in die Schleife zurückgekehrt und auf den nächsten NMI
gewartet. Erst der Interrupt von der <!-- External Link --><a href="https://www.zilog.com/docs/z80/ps0180.pdf" title="Externer Link: Z80 PIO" target="_blank" rel="noreferrer">PIO</a><!-- /External Link -->, der anzeigt, daß die gesamte
Aktion abgearbeitet ist, entläßt das

<!-- 2 Spalten im Blocksatz: Spaltenwechsel -->

Programm auf oben erwähnte Weise aus der Schleife.
</p>
<p>
Nach diesen Schleifen, die in allen Programmteilen in gleicher Art
auftauchen, wird jeweils der Inhalt des Statusregisters (FDCSTA) in den
Akku gelesen. In der gegenwärtigen Form des Programms wird diese
Information noch nicht weiterverarbeitet. Setzt man aber einen
<span class="uppercase">Breakpoint</span> dahinter (E7H) kann man nach Ausführung des Kommandos im
Akku die Fehlermeldungen ablesen, die zeigen ob der Befehl vom
Controller richtig durchgeführt wurde.
</p>
<p>
Mit dem QUERY-Befehl (Taste Q) kann dieses Register auch direkt auf den
Bildschirm geholt werden.&#x200b;(Q 0C).
</p>
<p>
Die wichtigsten Fehlermeldungen, die uns häufig großes Kopfzerbrechen
bereitet haben, finden Sie in der folgenden Tabelle:
</p>
<table style="width: 100%">
<tr><td>80 &nbsp;</td><td>Not Ready</td><td>;Laufwerk nicht bereit</td></tr>
<tr><td>10</td><td>Record Not Found</td><td>;Sektor nicht gefunden</td></tr>
<tr><td>04</td><td>Lost Data</td><td>;Daten verloren</td></tr>
<tr><td>08</td><td>CRC Error</td><td>;Prüfsummenfehler</td></tr>
<tr><td>00</td><td></td><td>;Hurra, gewonnen</td></tr>
</table>
<p>
Da die Fehlermeldungen bei den verschiedenen Befehlen unterschiedlich
sind, folgt eine Tabelle mit der Bedeutung der Bits:
</p>

<p id="article1">
Bild 5
</p>
<img class="img-fluid" src="../../Image-08-2.jpeg" alt="" width="301" height="185">

<!-- 2 Spalten: Ende --></div>

</div></div>
<!-- /Die Seite -->

<!-- Navigation unten -->
<table class="robots-nocontent style-table-zeropadding" style="width: 100%">
	<tr>
		<td class="navi-button">
			<a style="display: block" href="../../07/text/" title="Seite zurück"><span class="mirror-horizontal fas fa-play" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../01/text/" title="Erste Seite"><span class="mirror-horizontal fas fa-fast-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../../../83/07/01/text/" title="Heft zurück"><span class="mirror-horizontal fas fa-forward" aria-hidden=true></span></a>
		</td>
		<th class="navi-button">
			<a style="display: block" href="../../text/" title="Inhaltsverzeichnis">Seite 8 von 28</a>
		</th>
		<td class="navi-button">
			<a style="display: block" href="../../../../83/11/01/text/" title="Heft vor"><span class="fas fa-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../28/text/" title="Letzte Seite"><span class="fas fa-fast-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../09/text/" title="Seite vor"><span class="fas fa-play" aria-hidden=true></span></a>
		</td>
	</tr>
</table>
<!-- /Navigation unten -->

<!-- navi-footer.php / $Date: 2023-03-11 15:22:20 +0100 (Sa, 11. Mrz 2023) $ -->

<!--********************************************************************************-->

	</div>

	<nav class="nav flex-column flex-md-row style-navbar-bottom robots-nocontent"> <!--nav-pills-->
		<a class="sm-fill nav-link" href="#top"><span title="Nach oben" class="fa fa-chevron-up" aria-hidden=true></span></a>
		<!--a class="sm-fill nav-link disabled">Text</a-->
		<a class="sm-fill nav-link" href="../">Grafik</a>
		<a class="sm-fill nav-link" href="../../thumb/text/">Miniatur&shy;bilder</a>
		<a class="sm-fill nav-link" href="../../../../../../nascom/journal/pdf/83-09.pdf" download>PDF</a>
		<a class="sm-fill nav-link" href="../../../../../../datenschutzerklaerung/">Datenschutzerklärung</a>
		<a class="sm-fill nav-link" href="../../../../../../impressum/">Impressum</a>
	</nav>

	<!--bootstrap-->
	<script src="../../../../../../cdn/bootstrap/js/bootstrap.bundle.min.js"></script>
</body>

<!-- /navi-footer.php -->
</html>

<!-- /page.php -->