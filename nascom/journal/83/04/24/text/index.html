<!doctype html>
<html lang="de">

<!-- navi-head.php / $Date: 2023-03-11 15:22:20 +0100 (Sa, 11. Mrz 2023) $ -->
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta charset="utf-8">

	<link rel="shortcut icon" type="image/x-icon" href="../../../../../../nascom/nascom.ico">
	<link rel="icon" type="image/png" href="../../../../../../nascom/apple-touch-icon.png" sizes="32x32">
	<link rel="icon" type="image/png" href="../../../../../../nascom/apple-touch-icon.png" sizes="96x96">
	<link rel="apple-touch-icon" sizes="180x180" href="../../../../../../nascom/apple-touch-icon.png">

	<!--bootstrap-->
	<link rel="stylesheet" href="../../../../../../cdn/bootstrap/css/bootstrap.min.css">

	<!--font awesome-->
	<link rel="stylesheet" href="../../../../../../cdn/fontawesome/css/fontawesome.min.css">
	<link rel="stylesheet" href="../../../../../../cdn/fontawesome/css/solid.min.css">

	<link rel="stylesheet" type="text/css" href="../../../../../../style.css">
<!-- /navi-head.php -->

	<!-- page.php / $Date: 2024-06-30 12:05:40 +0200 (So, 30. Jun 2024) $ -->

	<title>80-Bus Journal - April 1983 - Ausgabe 4</title>
	<!-- Sun, 30 Jun 2024 10:05:41 GMT -->
	<meta name="keywords" content="80-Bus Journal, Nascom Computer, Nascom 1, Nascom 2">
<!-- navi-body.php -->
</head>

<body>
	<nav class="navbar navbar-expand-md navbar-light bg-light style-navbar-top" id="top">
	<div class="container-fluid">
		<a class="navbar-brand" href="https://jloh.de/">
			<img src="../../../../../../favicon.ico" width="32" height="32" alt="JL" title="Homepage von Jürgen Loh">
		</a>
		<button
			class="navbar-toggler"
			type="button"
			data-bs-toggle="collapse"
			data-bs-target="#navbarSupportedContent"
			aria-controls="navbarSupportedContent"
			aria-expanded="false"
			aria-label="Toggle navigation"
		>
			<span class="navbar-toggler-icon"></span>
		</button>
		<div class="collapse navbar-collapse robots-nocontent" id="navbarSupportedContent">
			<ul class="navbar-nav md-auto">
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../z80-kit/">Z80-KIT</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../nascom/1/">Nascom 1</a>
				</li>
				<li class="nav-item">
					<a class="nav-link active" href="../../../../../../nascom/">Nascom Journal</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../nascom/magazines/issues/">Nascom Magazines</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../pico/">PICO</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../cpm-plus/">CP/M</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../">Tupel BBS</a>
				</li>
			</ul>
		</div>
	</div>
	</nav>

	<div class="container" style="max-width: 750px; color: #000; padding: 0 15px 0; background-color: #FFF">

<!--********************************************************************************-->

<!-- /navi-body.php / $Date: 2024-06-30 12:05:40 +0200 (So, 30. Jun 2024) $ -->
<table class="style-table-zeropadding" style="width: 100%">
	<tr>
		<td>
			<h1 class="h1Navi">80-Bus Journal</h1>
		</td>
		<td>&nbsp;&nbsp;</td>
		<td style="vertical-align:top">
			<h2 class="h2Navi"><span class="nowrap">April 1983 &middot;</span> <span class="nowrap">Ausgabe 4</span></h2>
		</td>
	</tr>
</table>

<div id="head"><!-- Navigation oben -->
<table class="robots-nocontent style-table-zeropadding" style="width: 100%">
	<tr>
		<td class="navi-button">
			<a style="display: block" href="../../23/text/" title="Seite zurück"><span class="mirror-horizontal fas fa-play" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../01/text/" title="Erste Seite"><span class="fas fa-fast-backward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../../../83/03/01/text/" title="Heft zurück"><span class="fas fa-backward" aria-hidden=true></span></a>
		</td>
		<th class="navi-button">
			<a style="display: block" href="../../text/" title="Inhaltsverzeichnis">Seite 24 von 28</a>
		</th>
		<td class="navi-button">
			<a style="display: block" href="../../../../83/05/01/text/" title="Heft vor"><span class="fas fa-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../28/text/" title="Letzte Seite"><span class="fas fa-fast-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../25/text/" title="Seite vor"><span class="fas fa-play" aria-hidden=true></span></a>
		</td>
	</tr>
</table>
</div><!-- /Navigation oben -->

<!-- Die Seite -->
<div class="row" id="page"><div class="col-sm-12 hyphenate" style="border: 1px solid #000; padding-top: 1em; padding-bottom: 1em;">

<!-- 2(2) Spalten im Blocksatz: Start --><div class="style-multi-column-2 justify">

<h1 id="article1">
Data Conversion
</h1>
<h3>
von <span class="uppercase">Günter Kreidl</span>
</h3>
<p>
Ich kann mich den Lobliedern von Michael Bach über das
<a href="../../../../82/05/21/text/#article1">BLS-<span class="uppercase">Pascal</span></a>
nur anschließen, nachdem ich meine ersten Programmierversuche hinter mir
habe. Es handelt sich bei dieser <span class="uppercase">Pascal</span>-Version zwar nur um eine
Untermenge des Standard-<span class="uppercase">Pascal</span>, dafür aber um einen echten Compiler
(kein Zwischencode). Der compilierte Code ist schnell und etwa um den
Faktor 2-4 mal umfangreicher als optimal assemblierter Code. Dafür
braucht man aber eine Fülle von Funktionen nicht jedesmal neu zu
programmieren wie beim Arbeiten in Assembler. Die Programmierzeit
verkürzt sich entsprechend. Besonders hervorzuheben sind die
Stringfunktionen (in Standard-<span class="uppercase">Pascal</span> nicht enthalten), die 11-stellige
Rechengenauigkeit und die Kombinationsmöglichkeiten mit
Maschinenprogrammen über die Befehle CODE, EX&shy;TER&shy;NAL, CALL und MEM.
Diese Kombinationsmöglichkeit soll hier an einem Beispiel gezeigt
werden.
</p>
<p>
In kaufmännischen Anwendungen rechnet man häufig mit
B(inär)C(odierten)D(ezimal)-Zahlen, wobei je ein Halbbyte eine Stelle
mit einem Wert zwischen 0 und 9 enthält. Rechenroutinen für ein solches
&bdquo;gepacktes&ldquo; BCD-Format habe ich im
<a href="../../../../82/01/25/text/#article1"><span class="uppercase">Nascom</span>-Journal 1</a> und
<a href="../../../../82/07/20/text/#article1">7/8-82</a>
vorgestellt. Die meisten Interpreter und Compiler können aber
das BCD-Format nicht verarbeiten (im neuen ANSI-BASIC-Standard wird
aber die Darstellung der Zahlen im BCD-Format vorgeschrieben!), so auch
das
<span class="uppercase"><!-- External Link --><a href="https://de.wikipedia.org/wiki/Turbo_Pascal#Geschichte" title="Externer Link: Blue Label Software Pascal" target="_blank" rel="noreferrer">BLS-Pascal</a><!-- /External Link --></span>.
Es gibt nun verschiedene Möglichkeiten, hier Abhilfe zu
schaffen. Man könnte die Rechenroutinen für BCD-Zahlen als Externals
definieren und so den <span class="uppercase">Pascal</span>-Befehlssatz erweitern, man kann aber auch
einfach die Datenformate ineinander umsetzen. Auch hiefür gibt es zwei
Möglichkeiten: Man könnte ein Maschinenprogramm schreiben, das direkt
BCD-Code in Binärcode umrechnet und umgekehrt. Ich habe hier aber den
einfacheren (und langsameren) Weg gewählt, wobei jedes Zahlenformat
zunächst in &bdquo;Klartext&ldquo;, d.h. in einen String umgewandelt wird
und dieser String dann wiederum in das andere Zahlenformat. Dabei wird
die Funktion &bdquo;VALUE&ldquo; aus dem BLS-Programming-Manual
verwendet, die zu diesem Zweck aber verändert werden mußte. In der im
Manual abgedruckten Form ist sie sowieso falsch; außerdem

<!-- 2 Spalten im Blocksatz: Spaltenwechsel -->

kann sie auch keine führenden Leerstellen verkraften. Die Stellenzahl
des BCD-Formats kann vorgegeben werden mit folgenden Einschränkungen:
Es wird die Anzahl in Bytes festgelegt, wobei jedes Byte zwei Stellen
aufweist; es sind fest zwei Nachkommastellen vorgegeben, wie sie im
kaufmännischen Rechnen benötigt werden; das &bdquo;vorderste&ldquo;
Halbbyte enthält das Vorzeichen (0 = +, 1 = &minus;). In drei Bytes kann man
so die Zahlen von &minus;999.99 bis +999.99 unterbringen. Das
Fließkommaformat des
<!-- External Link --><a href="https://de.wikipedia.org/wiki/Turbo_Pascal#Geschichte" title="Externer Link: Blue Label Software Pascal" target="_blank" rel="noreferrer">BLS-Pascal</a><!-- /External Link -->
benötigt 6&nbsp;Bytes pro Zahl. In einem
Fakturierprogramm konnte ich durch Verwendung des BCD-Formats (dringend
benötigte) 6&nbsp;KByte Speicherplatz einsparen.
</p>
<p>
Es müssen 3 EX&shy;TER&shy;NALS definiert werden, die hier im Assemblerlisting
aufgeführt sind. BCD&shy;WRITE&shy;LN schaltet eine Ausgaberoutine (über UOUT)
ein. Jetzt kann mit WRITE&shy;LN die Zahl (REAL) in einen Puffer geschrieben
werden. CON&shy;VERTA (Länge in Bytes) verwandelt den String im Puffer in
eine BCD-Zahl und übergibt die Anfangsadresse dieser Zahl dem
aufrufenden <span class="uppercase">Pascal</span>-Programm zur Weiterverarbeitung. CON&shy;VERTB (Länge in
Bytes, Adresse der BCD-Zahl) wandelt die BCD-Zahl in einen String um,
der dem aufrufenden <span class="uppercase">Pascal</span>-Programm übergeben wird. Die <span class="uppercase">Pascal</span>-Funktion
VALUE wandelt wiederum den String in eine Zahl vom Typ REAL um. Aus
diesen Hilfsfunktionen sind die vollständigen Umwandlungsfunktionen
zusammengesetzt. CON&shy;VERT.BCD wandelt eine Zahl vom Typ REAL in eine
BCD-Zahl um, deren Adresse im Speicher als Ergebnis der Funktion
übergeben wird. BCD.CON&shy;VERT(L,A) berechnet aus einer BCD-Zahl der Länge
L (in Bytes) an der Adresse A den zugehörigen Zahlenwert vom Typ REAL.
</p>
<img class="img-fluid" src="../../Image-24-1.jpeg" alt="" width="260" height="257">

<!-- 2 Spalten: Ende --></div>

</div></div>
<!-- /Die Seite -->

<!-- Navigation unten -->
<table class="robots-nocontent style-table-zeropadding" style="width: 100%">
	<tr>
		<td class="navi-button">
			<a style="display: block" href="../../23/text/" title="Seite zurück"><span class="mirror-horizontal fas fa-play" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../01/text/" title="Erste Seite"><span class="fas fa-fast-backward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../../../83/03/01/text/" title="Heft zurück"><span class="fas fa-backward" aria-hidden=true></span></a>
		</td>
		<th class="navi-button">
			<a style="display: block" href="../../text/" title="Inhaltsverzeichnis">Seite 24 von 28</a>
		</th>
		<td class="navi-button">
			<a style="display: block" href="../../../../83/05/01/text/" title="Heft vor"><span class="fas fa-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../28/text/" title="Letzte Seite"><span class="fas fa-fast-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../25/text/" title="Seite vor"><span class="fas fa-play" aria-hidden=true></span></a>
		</td>
	</tr>
</table>
<!-- /Navigation unten -->

<!-- navi-footer.php / $Date: 2023-03-11 15:22:20 +0100 (Sa, 11. Mrz 2023) $ -->

<!--********************************************************************************-->

	</div>

	<nav class="nav flex-column flex-md-row style-navbar-bottom robots-nocontent"> <!--nav-pills-->
		<a class="sm-fill nav-link" href="#top"><span title="Nach oben" class="fa fa-chevron-up" aria-hidden=true></span></a>
		<!--a class="sm-fill nav-link disabled">Text</a-->
		<a class="sm-fill nav-link" href="../">Grafik</a>
		<a class="sm-fill nav-link" href="../../thumb/text/">Miniatur&shy;bilder</a>
		<a class="sm-fill nav-link" href="../../../../../../nascom/journal/pdf/83-04.pdf" download>PDF</a>
		<a class="sm-fill nav-link" href="../../../../../../datenschutzerklaerung/">Datenschutzerklärung</a>
		<a class="sm-fill nav-link" href="../../../../../../impressum/">Impressum</a>
	</nav>

	<!--bootstrap-->
	<script src="../../../../../../cdn/bootstrap/js/bootstrap.bundle.min.js"></script>
</body>

<!-- /navi-footer.php -->
</html>

<!-- /page.php -->