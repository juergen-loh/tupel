<!doctype html>
<html lang="de">

<!-- navi-head.php / $Date: 2023-03-11 15:22:20 +0100 (Sa, 11. Mrz 2023) $ -->
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta charset="utf-8">

	<link rel="shortcut icon" type="image/x-icon" href="../../../../../../nascom/nascom.ico">
	<link rel="icon" type="image/png" href="../../../../../../nascom/apple-touch-icon.png" sizes="32x32">
	<link rel="icon" type="image/png" href="../../../../../../nascom/apple-touch-icon.png" sizes="96x96">
	<link rel="apple-touch-icon" sizes="180x180" href="../../../../../../nascom/apple-touch-icon.png">

	<!--bootstrap-->
	<link rel="stylesheet" href="../../../../../../cdn/bootstrap/css/bootstrap.min.css">

	<!--font awesome-->
	<link rel="stylesheet" href="../../../../../../cdn/fontawesome/css/fontawesome.min.css">
	<link rel="stylesheet" href="../../../../../../cdn/fontawesome/css/solid.min.css">

	<link rel="stylesheet" type="text/css" href="../../../../../../style.css">
<!-- /navi-head.php -->

	<!-- page.php / $Date: 2024-07-13 18:55:41 +0200 (Sa, 13. Jul 2024) $ -->

	<title>80-Bus Journal - Juni 1983 - Ausgabe 6</title>
	<!-- Wed, 01 Jan 2025 19:19:14 GMT -->
	<meta name="keywords" content="80-Bus Journal, Nascom Computer, Nascom 1, Nascom 2">
<!-- navi-body.php -->
</head>

<body>
	<nav class="navbar navbar-expand-md navbar-light bg-light style-navbar-top" id="top">
	<div class="container-fluid">
		<a class="navbar-brand" href="https://jloh.de/">
			<img src="../../../../../../favicon.ico" width="32" height="32" alt="JL" title="Homepage von Jürgen Loh">
		</a>
		<button
			class="navbar-toggler"
			type="button"
			data-bs-toggle="collapse"
			data-bs-target="#navbarSupportedContent"
			aria-controls="navbarSupportedContent"
			aria-expanded="false"
			aria-label="Toggle navigation"
		>
			<span class="navbar-toggler-icon"></span>
		</button>
		<div class="collapse navbar-collapse robots-nocontent" id="navbarSupportedContent">
			<ul class="navbar-nav md-auto">
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../z80-kit/">Z80-KIT</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../nascom/1/">Nascom 1</a>
				</li>
				<li class="nav-item">
					<a class="nav-link active" href="../../../../../../nascom/">Nascom Journal</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../nascom/magazines/issues/">Nascom Magazines</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../pico/">PICO</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../cpm-plus/">CP/M</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../">Tupel BBS</a>
				</li>
			</ul>
		</div>
	</div>
	</nav>

	<div class="container" style="max-width: 750px; color: #000; padding: 0 15px 0; background-color: #FFF">

<!--********************************************************************************-->

<!-- /navi-body.php / $Date: 2024-12-30 14:10:13 +0100 (Mo, 30. Dez 2024) $ -->
<table class="style-table-zeropadding" style="width: 100%">
	<tr>
		<td>
			<h1 class="h1Navi">80-Bus Journal</h1>
		</td>
		<td>&nbsp;&nbsp;</td>
		<td style="vertical-align:top">
			<h2 class="h2Navi"><span class="nowrap">Juni 1983</span> &middot; <span class="nowrap">Ausgabe 6</span></h2>
		</td>
	</tr>
</table>

<div id="head"><!-- Navigation oben -->
<table class="robots-nocontent style-table-zeropadding" style="width: 100%">
	<tr>
		<td class="navi-button">
			<a style="display: block" href="../../13/text/" title="Seite zurück"><span class="mirror-horizontal fas fa-play" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../01/text/" title="Erste Seite"><span class="mirror-horizontal fas fa-fast-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../../../83/05/01/text/" title="Heft zurück"><span class="mirror-horizontal fas fa-forward" aria-hidden=true></span></a>
		</td>
		<th class="navi-button">
			<a style="display: block" href="../../text/" title="Inhaltsverzeichnis">Seite 14 von 28</a>
		</th>
		<td class="navi-button">
			<a style="display: block" href="../../../../83/07/01/text/" title="Heft vor"><span class="fas fa-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../28/text/" title="Letzte Seite"><span class="fas fa-fast-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../15/text/" title="Seite vor"><span class="fas fa-play" aria-hidden=true></span></a>
		</td>
	</tr>
</table>
</div><!-- /Navigation oben -->

<!-- Die Seite -->
<div class="row" id="page"><div class="col-sm-12 hyphenate" style="border: 1px solid #000; padding-top: 1em; padding-bottom: 1em;">

<!-- 2(2) Spalten im Blocksatz: Start --><div class="style-multi-column-2 justify">

<h1 id="article1">
BLS+
</h1>
<h3>
von <span class="uppercase">Günter Kreidl</span>
</h3>
<p>
Will man lange Programme in
<!-- External Link --><a href="https://de.wikipedia.org/wiki/Turbo_Pascal#Geschichte" title="Externer Link: Blue Label Software Pascal" target="_blank" rel="noreferrer">BLS-Pascal</a><!-- /External Link -->
schreiben, ist es nicht mehr
möglich, Quelltext und compilierten Code gleichzeitig im Speicher zu
haben. Dann bleibt nur der
Weg über die Cassette, und das dauert.......! Das gleiche
gilt, wenn man das Programm an eine bestimmte Adresse compilieren will.
Vorher muß man dann natürlich auch noch den Quelltext abspeichern, und
das dauert ebenfalls lange. Vor allem das Austesten der Programme wird
dann sehr zeitraubend. Der Einbau einer zweiten Speicherbank in meinen
<span class="uppercase">Nascom</span> (im Artikel
&bdquo;<a href="../../04/text/#article2">Huckepack-Bus</a>&ldquo;
beschrieben) brachte mich
auf die Idee, den Umweg über die Cassette einzusparen. Ich wollte den
Compiler dazu bringen, den Code direkt in die zweite Speicherbank zu
compilieren. Dazu suchte ich alle Stellen heraus, in denen der
Compiler auf die Cassettenroutinen von NAS-SYS zurückgreift und fügte
hier die entsprechenden Änderungen ein. Dabei werden Unterprogramme aus
einem Block von Banking-Routinen benötigt, die bei mir ab 0D00H im
Speicher stehen und weiter unten noch näher beschrieben werden. (Aus
Platzgründen mußte das Listing an
<a href="../../06/text/#article2">anderer Stelle</a>,
im Anschluß an den Artikel
&bdquo;<a href="../../04/text/#article2">Huckepack-Bus</a>&ldquo;,
abgedruckt werden!) Ich habe hier
einfach die Änderungen aufgelistet, die ich an der Tape-Version
vorgenommen habe, um die Cassettenroutinen auszuschalten und durch die
Banking-Routine Bank-Write-Repeat (BWREP) bei 0D34 zu ersetzen. Das
Programm sollte dann auf der zweiten Speicherbank direkt lauffähig
sein, doch spielt der Execute-Befehl bei meinem Banking-System nicht
immer ganz richtig mit (liegt an der Verwendung von Port 0!). Dann
empfiehlt sich, den Inhalt der beiten Speicherbänke mit BSWAP zu
vertauschen.
</p>
<p>
Folgende Bytes sind auf 0 zu setzen: 2A96/7, 2AA3/4,
2B53/4, 2B59/A, 36CF/36D0, 36DD &ndash; F, 36E1/2, 36E4/5, 36E9/A, 36F1-4,
36F6/7. Zu ändern ist außerdem bei<br>
36DA: 7D DF 6F in 22 1E 0C<br>
und bei:<br>
36EE: DF 6D 79 in CD 34 0D.
</p>
<h4 class="uppercase">
Banking-Routinen
</h4>
<p>
Das
<a href="../../06/text/#article2">Listing</a>,
enthält einige Unterprogramme, die von
Anwenderprogrammen aufgerufen werden können, und einige
Funktionen, die direkt von NAS-SYS im Kommando-Modus
aufgerufen werden können.
</p>
<p>
SWITCH schaltet von einer Bank auf die andere.
</p>
<p>
BCOPY schreibt ein Byte von der aktuellen Bank auf die
andere.
</p>
<p>
BWRITE schreibt ein Byte in die andere Bank an die Adresse
(0C1E); der Adreß-Zeiger bei C1E wird gleichzeitig

<!-- 2 Spalten im Blocksatz: Spaltenwechsel -->

inkrementiert.
</p>
<p>
BCREP kopiert einen Block der Länge BC von der aktuellen
Seite (HL) nach (DE) auf der anderen.
</p>
<p>
BWREP schreibt B Bytes in den Bereich ab (C1E) auf der
anderen Seite.
</p>
<p>
BSW wird mit &bdquo;E D3C&ldquo; aufgerufen und schaltet auf die andere
Bank.
</p>
<p>
BCOP wird mit &bdquo;E D41 XXXX YYYY ZZZZ&ldquo; aufgerufen und kopiert
einen Block der Länge ZZZZ von XXXX auf der aktuellen Seite nach YYYY
auf der anderen Seite. BSWAP wird mit &bdquo;E D5C XXXX YYYY&ldquo;
aufgerufen und vertauscht den Block der Lange YYYY ab XXXX auf beiden
Seiten.
</p>
<p>
<a href="../../06/text/#article1">2P/M</a>
ist eine kleine Zugabe: mein erster Versuch, 2 Programme
gleichzeitig laufen zu lassen. Es wird ein <!-- External Link --><a href="https://www.zilog.com/docs/z80/ps0181.pdf" title="Externer Link: Z80 CTC" target="_blank" rel="noreferrer">CTC</a><!-- /External Link -->-Kanal benötigt, der ca.
alle 20msec einen Interrupt erzeugt. Dann wird zu der Routine PSW
verzweigt, die alle Register rettet und auf das Programm in der anderen
Bank umschaltet. Ich benutze hier die Bank-Urnschaltung; es ist aber
ebensogut möglich, beide Programme auf einer Speicher-Seite ablaufen zu
lassen. Dann muß das Unterprogramm SWITCH weggelassen werden. Eine
interessante (und für die Arbeit am Journal sehr wichtige) Anwendung
ergab sich für mein Formatierprogramm. Ich formatiere den Text jetzt in
die zweite Speicherbank und lasse ihn dann von einem im Hintergrund
laufenden Druckprogramm ausdrucken, während ich z.&nbsp;B. bereits mit dem
Texteditor neuen Text eingebe. Man startet ein Hintergrund-Programm mit
&bdquo;ED7A XXXX YYYY&ldquo;, wobei XXXX die Startadresse und YYYY die
Obergrenze des Stacks für das Hintergrundprogramm darstellen. Es müssen
unbedingt verschiedene Stackbereiche für Vorder- und
Hintergrundprogramm vorgesehen werden. Für eine eventuelle
Parameterübergabe empfehlen sich Speicherstellen im Bereich C00-FFF,
der ja beiden Banks gemeinsam ist.
</p>

<h1 id="article2">
ZEAP-Utilities
</h1>
<h3>
von <span class="uppercase">David Kastrup</span>
</h3>
<h4>
Hilfsprogramme fuer ZEAP:
</h4>
<p>
Shift: ED00 disp line verschiebt die Zeilen ab line um disp nach hinten
(Wer groessere Programme zu editieren hat, weiss das zu schaetzen).
</p>
<p>
Kommentarkill: Kommentar ueberfluessig.
</p>
<p>
Konvert: E1000 start macht aus ASM-Files ZEAP-Files mit Startadresse
start.
</p>
<p>
G-Entferner: Programme, die mit dem G-Befehl aufgezeichnet worden sind,
lassen sich damit laden ohne gestartet zu werden. Gibt man Exxxx disp
so wird (bei <span class="uppercase">Nassys</span>&nbsp;3&nbsp;) mit Displacement geladen.
</p>

<!-- 2 Spalten: Ende --></div>

</div></div>
<!-- /Die Seite -->

<!-- Navigation unten -->
<table class="robots-nocontent style-table-zeropadding" style="width: 100%">
	<tr>
		<td class="navi-button">
			<a style="display: block" href="../../13/text/" title="Seite zurück"><span class="mirror-horizontal fas fa-play" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../01/text/" title="Erste Seite"><span class="mirror-horizontal fas fa-fast-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../../../83/05/01/text/" title="Heft zurück"><span class="mirror-horizontal fas fa-forward" aria-hidden=true></span></a>
		</td>
		<th class="navi-button">
			<a style="display: block" href="../../text/" title="Inhaltsverzeichnis">Seite 14 von 28</a>
		</th>
		<td class="navi-button">
			<a style="display: block" href="../../../../83/07/01/text/" title="Heft vor"><span class="fas fa-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../28/text/" title="Letzte Seite"><span class="fas fa-fast-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../15/text/" title="Seite vor"><span class="fas fa-play" aria-hidden=true></span></a>
		</td>
	</tr>
</table>
<!-- /Navigation unten -->

<!-- navi-footer.php / $Date: 2023-03-11 15:22:20 +0100 (Sa, 11. Mrz 2023) $ -->

<!--********************************************************************************-->

	</div>

	<nav class="nav flex-column flex-md-row style-navbar-bottom robots-nocontent"> <!--nav-pills-->
		<a class="sm-fill nav-link" href="#top"><span title="Nach oben" class="fa fa-chevron-up" aria-hidden=true></span></a>
		<!--a class="sm-fill nav-link disabled">Text</a-->
		<a class="sm-fill nav-link" href="../">Grafik</a>
		<a class="sm-fill nav-link" href="../../thumb/text/">Miniatur&shy;bilder</a>
		<a class="sm-fill nav-link" href="../../../../../../nascom/journal/pdf/83-06.pdf" download>PDF</a>
		<a class="sm-fill nav-link" href="../../../../../../datenschutzerklaerung/">Datenschutzerklärung</a>
		<a class="sm-fill nav-link" href="../../../../../../impressum/">Impressum</a>
	</nav>

	<!--bootstrap-->
	<script src="../../../../../../cdn/bootstrap/js/bootstrap.bundle.min.js"></script>
</body>

<!-- /navi-footer.php -->
</html>

<!-- /page.php -->