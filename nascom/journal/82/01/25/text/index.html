<!doctype html>
<html lang="de">

<!-- navi-head.php / $Date: 2023-03-11 15:22:20 +0100 (Sa, 11. Mrz 2023) $ -->
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta charset="utf-8">

	<link rel="shortcut icon" type="image/x-icon" href="../../../../../../nascom/nascom.ico">
	<link rel="icon" type="image/png" href="../../../../../../nascom/apple-touch-icon.png" sizes="32x32">
	<link rel="icon" type="image/png" href="../../../../../../nascom/apple-touch-icon.png" sizes="96x96">
	<link rel="apple-touch-icon" sizes="180x180" href="../../../../../../nascom/apple-touch-icon.png">

	<!--bootstrap-->
	<link rel="stylesheet" href="../../../../../../cdn/bootstrap/css/bootstrap.min.css">

	<!--font awesome-->
	<link rel="stylesheet" href="../../../../../../cdn/fontawesome/css/fontawesome.min.css">
	<link rel="stylesheet" href="../../../../../../cdn/fontawesome/css/solid.min.css">

	<link rel="stylesheet" type="text/css" href="../../../../../../style.css">
<!-- /navi-head.php -->

	<!-- page.php / $Date: 2024-07-13 18:55:41 +0200 (Sa, 13. Jul 2024) $ -->

	<title>Nascom Journal - Januar 1982 - Ausgabe 1</title>
	<!-- Sun, 15 Dec 2024 13:32:46 GMT -->
	<meta name="keywords" content="Nascom Journal, Nascom Computer, Nascom 1, Nascom 2">
<!-- navi-body.php -->
</head>

<body>
	<nav class="navbar navbar-expand-md navbar-light bg-light style-navbar-top" id="top">
	<div class="container-fluid">
		<a class="navbar-brand" href="https://jloh.de/">
			<img src="../../../../../../favicon.ico" width="32" height="32" alt="JL" title="Homepage von Jürgen Loh">
		</a>
		<button
			class="navbar-toggler"
			type="button"
			data-bs-toggle="collapse"
			data-bs-target="#navbarSupportedContent"
			aria-controls="navbarSupportedContent"
			aria-expanded="false"
			aria-label="Toggle navigation"
		>
			<span class="navbar-toggler-icon"></span>
		</button>
		<div class="collapse navbar-collapse robots-nocontent" id="navbarSupportedContent">
			<ul class="navbar-nav md-auto">
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../z80-kit/">Z80-KIT</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../nascom/1/">Nascom 1</a>
				</li>
				<li class="nav-item">
					<a class="nav-link active" href="../../../../../../nascom/">Nascom Journal</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../nascom/magazines/issues/">Nascom Magazines</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../pico/">PICO</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../cpm-plus/">CP/M</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../">Tupel BBS</a>
				</li>
			</ul>
		</div>
	</div>
	</nav>

	<div class="container" style="max-width: 750px; color: #000; padding: 0 15px 0; background-color: #FFF">

<!--********************************************************************************-->

<!-- /navi-body.php / $Date: 2024-12-15 14:31:39 +0100 (So, 15. Dez 2024) $ -->
<table class="style-table-zeropadding" style="width: 100%">
	<tr>
		<td>
			<h1 class="h1Navi">Nascom Journal</h1>
		</td>
		<td>&nbsp;&nbsp;</td>
		<td style="vertical-align:top">
			<h2 class="h2Navi"><span class="nowrap">Januar 1982 &middot;</span> <span class="nowrap">Ausgabe 1</span></h2>
		</td>
	</tr>
</table>

<div id="head"><!-- Navigation oben -->
<table class="robots-nocontent style-table-zeropadding" style="width: 100%">
	<tr>
		<td class="navi-button">
			<a style="display: block" href="../../24/text/" title="Seite zurück"><span class="mirror-horizontal fas fa-play" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../01/text/" title="Erste Seite"><span class="mirror-horizontal fas fa-fast-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../../../81/12/01/text/" title="Heft zurück"><span class="mirror-horizontal fas fa-forward" aria-hidden=true></span></a>
		</td>
		<th class="navi-button">
			<a style="display: block" href="../../text/" title="Inhaltsverzeichnis">Seite 25 von 35</a>
		</th>
		<td class="navi-button">
			<a style="display: block" href="../../../../82/02/01/text/" title="Heft vor"><span class="fas fa-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../35/text/" title="Letzte Seite"><span class="fas fa-fast-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../26/text/" title="Seite vor"><span class="fas fa-play" aria-hidden=true></span></a>
		</td>
	</tr>
</table>
</div><!-- /Navigation oben -->

<!-- Die Seite -->
<div class="row" id="page"><div class="col-sm-12 hyphenate" style="border: 1px solid #000; padding-top: 1em; padding-bottom: 1em;">

<!-- 2(2) Spalten im Blocksatz: Start --><div class="style-multi-column-2 justify">

<h1 id="article1">
Seite(n) für<br>
Einsteiger
</h1>
<h4>
BCD-Arithmetik für Einsteiger
</h4>
<p>
Bei der Programmierung arithmetischer Prozeduren sind zwei verschiedene
Zahlenrepräsentationen üblich, einmal im Binärformat, üblicherweise im
Zweierkomplement (Damit rechnen z.B. fast alle Basic-Interpreter), zum
anderen als Binär-Codierte-Dezimalzahlen. Um diese Darstellung zu
erläutern, sei zunächst auf die hexadezimale Darstellung
zurückgegriffen, die Günter Böhm im letzten <span class="uppercase">Nascom</span>-Journal erklärt hat.
Dabei wird jedes Byte in zwei Hälften (&bdquo;Nibbles&ldquo;) zerlegt,
die durch die Hex-Ziffern 0&nbsp;&ndash; F dargestellt werden. Schränkt man diesen
Wertebereich nun auf die Werte 0 &minus;9 ein, so kann man mit einem Byte die
Dezimalzahlen 00&nbsp;&ndash; 99 darstellen, also mit jedem Nibble eine
Dezimalstelle. Es handelt sich um eine Abbildung des Dezimalsystems auf
das binäre System des Prozessors, wobei nur eine Untermenge der
möglichen binären Werte zugelassen ist. Wie kann der Prozessor nun mit
solchen Werten rechnen?
</p>
<h4>
Der DAA-Befehl
</h4>
<p>
Der
<!-- External Link --><a href="https://de.wikipedia.org/wiki/Zilog_Z80" title="Externer Link" target="_blank" rel="noreferrer">Z80</a><!-- /External Link -->
verfügt wie die meisten Prozessoren über einen besonderen
Befehl für das Rechnen mit BCD-Werten: Decimal-Adjust-Accumulator. Um
die Arbeitsweise dieses Befehls zu verstehen, nehmen wir einmal an, der
Akku enthalte den Wert 09, und wir würden 01 addieren. Der Akku enthält
dann den Wert 0A, also einen Wert, der im BCD-System nicht zugelassen
ist. Der Befehl DAA prüft den Akkumulator und addiert (in diesem Fall!)
den Wert 06 hinzu. Das führt zu einem Uebertrag vom niederwertigen
Nibble in den höherwertigen. Im Akku steht dann der Wert 10, also ein
im BCD-System zugelassener Wert. Steht im Akku der Wert 99 und wir
addieren wiederum 01, so steht zunächst 9A. Lautet der nächste Befehl
DAA, so wird 66 hinzuaddiert. Das ergibt den Wert 00 und gleichzeitig
wird das Carry-Flag gesetzt. Damit kann dann ein Uebertrag in die
nächste Stelle (in einem weiteren Byte) vorgenommen werden. Der
DAA-Befehl arbeitet nach folgenden Befehlen:
</p>
<pre class="donthyphenate">
ADD, ADC, INC, SUB, SBC, DEC, NEG
</pre>
<p>
Einschränkung: Er wirkt nur auf den Akku und

<!-- 2 Spalten im Blocksatz: Spaltenwechsel -->

die Operanden müssen BCD-Format haben.
</p>
<h4>
RRD und RLD
</h4>
<p>
Wenn man im BCD-Format Rechenprogramme erstellen will, muß man des
öfteren auf einzelne Nibble, also Halbbytes zugreifen. Der
<!-- External Link --><a href="https://de.wikipedia.org/wiki/Zilog_Z80" title="Externer Link" target="_blank" rel="noreferrer">Z80</a><!-- /External Link -->
verfügt
deshalb über zwei spezielle Befehle, die diesen Zugriff auf einfache
Weise ermöglichen: Rotate Right Decimal und Rotate Left Decimal. Ich
will die Arbeitsweise am Beispiel RLD erläutern. Das Register HL muß
auf eine Speicherstelle zeigen. Mit RLD wird dann das niederwertige
Nibble von A an die Stelle des niederwertiges Nibble von (HL) gesetzt,
der dort vorher stehende Wert wird in das höherwertige Nibble von (HL)
geschoben, und der Wert, der zuvor in diesem höherwertigen Nibble
stand, steht nun im niederwertigen Halbbyte des Akkus. (Graphische
Darstellung in den
<!-- External Link --><a href="https://de.wikipedia.org/wiki/Zilog_Z80" title="Externer Link" target="_blank" rel="noreferrer">Z80</a><!-- /External Link -->-Unterlagen
zu Hilfe nehmen!) Mit RLD und RRD
kann man also einzelne Stellen des &bdquo;gepackten&ldquo; BCD-Formats
(zwei Stellen pro Byte) in den Akku holen.
</p>
<h4>
Anwendungen
</h4>
<p>
Das BCD-Format kommt hauptsächlich dann zur Anwendung, wenn man mit
beliebiger, frei programmierbarer Stellenzahl arbeiten will, wenn die
benötigte Stellenzahl oder Genauigkeit größer ist, als z.B. in den
arithmetischen Routinen der meisten Basic-Interpreter (Man versuche
einmal, dem Finanzamt zu verklickern, daß der Heimcomputer eben nur auf
8 Stellen genau rechnen kann!), oder wenn bei der
Binär-Dezimal-Umwandlung keine Rundungsfehler auftreten dürfen. Ich
persönlich finde das Programmieren von arithmetischen Routinen im
BCD-Format durchsichtiger und leichter zu &bdquo;entwanzen&ldquo;. Die
BCD-Zahlen brauchen jedoch etwa 2,5 mal soviel Speicherplatz wie reine
Binärzahlen und die Rechengeschwindigkeit ist um den gleichen Faktor
langsamer.
</p>
<p>
Wer die Arbeitsweise der in diesem Heft vorgestellten BCD-Routinen
näher kennenlernen will, der sollte einmal das zugehörige Testprogramm
mit Breakpoints in den Schleifen laufen lassen, und sich bei jedem
Breakpoint mit dem Tabulate-Kommando die Rechenregister anzeigen lassen.
</p>
<p>
Günter Kreidl
</p>
<div id="nascompl">
<div class="text-end"><img class="img-fluid" src="../../Image-25-1.jpeg" alt="NASCOMPL:&#32;&#10;LISTING AUF DER&#32;&#10;NÄCHSTEN SEITE!" width="239" height="95"></div>
</div>

<!-- Linie --><div class="hline" style="width: 100%; margin:auto;  border-top:2px solid #000; padding: 0; margin-top: 3px; margin-bottom: 3px"></div>

<!-- 2 Spalten: Ende --></div>

</div></div>
<!-- /Die Seite -->

<!-- Navigation unten -->
<table class="robots-nocontent style-table-zeropadding" style="width: 100%">
	<tr>
		<td class="navi-button">
			<a style="display: block" href="../../24/text/" title="Seite zurück"><span class="mirror-horizontal fas fa-play" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../01/text/" title="Erste Seite"><span class="mirror-horizontal fas fa-fast-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../../../81/12/01/text/" title="Heft zurück"><span class="mirror-horizontal fas fa-forward" aria-hidden=true></span></a>
		</td>
		<th class="navi-button">
			<a style="display: block" href="../../text/" title="Inhaltsverzeichnis">Seite 25 von 35</a>
		</th>
		<td class="navi-button">
			<a style="display: block" href="../../../../82/02/01/text/" title="Heft vor"><span class="fas fa-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../35/text/" title="Letzte Seite"><span class="fas fa-fast-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../26/text/" title="Seite vor"><span class="fas fa-play" aria-hidden=true></span></a>
		</td>
	</tr>
</table>
<!-- /Navigation unten -->

<!-- navi-footer.php / $Date: 2023-03-11 15:22:20 +0100 (Sa, 11. Mrz 2023) $ -->

<!--********************************************************************************-->

	</div>

	<nav class="nav flex-column flex-md-row style-navbar-bottom robots-nocontent"> <!--nav-pills-->
		<a class="sm-fill nav-link" href="#top"><span title="Nach oben" class="fa fa-chevron-up" aria-hidden=true></span></a>
		<!--a class="sm-fill nav-link disabled">Text</a-->
		<a class="sm-fill nav-link" href="../">Grafik</a>
		<a class="sm-fill nav-link" href="../../thumb/text/">Miniatur&shy;bilder</a>
		<a class="sm-fill nav-link" href="../../../../../../nascom/journal/pdf/82-01.pdf" download>PDF</a>
		<a class="sm-fill nav-link" href="../../../../../../datenschutzerklaerung/">Datenschutzerklärung</a>
		<a class="sm-fill nav-link" href="../../../../../../impressum/">Impressum</a>
	</nav>

	<!--bootstrap-->
	<script src="../../../../../../cdn/bootstrap/js/bootstrap.bundle.min.js"></script>
</body>

<!-- /navi-footer.php -->
</html>

<!-- /page.php -->