<!doctype html>
<html lang="de">

<!-- navi-head.php / $Date: 2023-03-11 15:22:20 +0100 (Sa, 11. Mrz 2023) $ -->
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta charset="utf-8">

	<link rel="shortcut icon" type="image/x-icon" href="../../../../../../nascom/nascom.ico">
	<link rel="icon" type="image/png" href="../../../../../../nascom/apple-touch-icon.png" sizes="32x32">
	<link rel="icon" type="image/png" href="../../../../../../nascom/apple-touch-icon.png" sizes="96x96">
	<link rel="apple-touch-icon" sizes="180x180" href="../../../../../../nascom/apple-touch-icon.png">

	<!--bootstrap-->
	<link rel="stylesheet" href="../../../../../../cdn/bootstrap/css/bootstrap.min.css">

	<!--font awesome-->
	<link rel="stylesheet" href="../../../../../../cdn/fontawesome/css/fontawesome.min.css">
	<link rel="stylesheet" href="../../../../../../cdn/fontawesome/css/solid.min.css">

	<link rel="stylesheet" type="text/css" href="../../../../../../style.css">
<!-- /navi-head.php -->

	<!-- page.php / $Date: 2024-06-16 15:50:29 +0200 (So, 16. Jun 2024) $ -->

	<title>80-Bus News - April&ndash;June 1982 - Volume 1 - Issue 2</title>
	<!-- Sun, 30 Jun 2024 14:37:39 GMT -->
	<meta name="keywords" content="80-Bus News, Nascom Computer, Nascom 1, Nascom 2">
	<link rel="stylesheet" type="text/css" href="../../../style.css">
<!-- navi-body.php -->
</head>

<body>
	<nav class="navbar navbar-expand-md navbar-light bg-light style-navbar-top" id="top">
	<div class="container-fluid">
		<a class="navbar-brand" href="https://jloh.de/">
			<img src="../../../../../../favicon.ico" width="32" height="32" alt="JL" title="Homepage von JÃ¼rgen Loh">
		</a>
		<button
			class="navbar-toggler"
			type="button"
			data-bs-toggle="collapse"
			data-bs-target="#navbarSupportedContent"
			aria-controls="navbarSupportedContent"
			aria-expanded="false"
			aria-label="Toggle navigation"
		>
			<span class="navbar-toggler-icon"></span>
		</button>
		<div class="collapse navbar-collapse robots-nocontent" id="navbarSupportedContent">
			<ul class="navbar-nav md-auto">
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../z80-kit/">Z80-KIT</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../nascom/1/">Nascom 1</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../nascom/">Nascom Journal</a>
				</li>
				<li class="nav-item">
					<a class="nav-link active" href="../../../../../../nascom/magazines/issues/">Nascom Magazines</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../pico/">PICO</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../cpm-plus/">CP/M</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../">Tupel BBS</a>
				</li>
			</ul>
		</div>
	</div>
	</nav>

	<div class="container" style="max-width: 750px; color: #000; padding: 0 15px 0; background-color: #FFF">

<!--********************************************************************************-->

<!-- /navi-body.php / $Date: 2024-06-30 12:05:40 +0200 (So, 30. Jun 2024) $ -->
<table class="style-table-zeropadding" style="width: 100%">
<tr>
<td>
<h1 class="h1Navi">80-Bus News</h1>
</td>
<td>&nbsp;&nbsp;</td>
<td style="vertical-align:top">
<h2 class="h2Navi">April&ndash;June 1982 &middot; <span class="nowrap">Volume 1 &middot;</span> <span class="nowrap">Issue 2</span></h2>
</td>
</tr>
</table>
<!-- Navigation top -->
<table class="robots-nocontent style-table-zeropadding" style="width: 100%">
	<tr>
		<td class="navi-button">
			<a style="display: block" href="../../22/text/" title="Previous page"><span class="mirror-horizontal fas fa-play" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../01/text/" title="First page"><span class="fas fa-fast-backward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../../11/01/text/" title="Previous issue"><span class="fas fa-backward" aria-hidden=true></span></a>
		</td>
		<th class="navi-button">
			<a style="display: block" href="../../text/" title="Table of Contents">Page 23 of 55</a>
		</th>
		<td class="navi-button">
			<a style="display: block" href="../../../13/01/text/" title="Next issue"><span class="fas fa-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../55/text/" title="Last page"><span class="fas fa-fast-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../24/text/" title="Next page"><span class="fas fa-play" aria-hidden=true></span></a>
		</td>
	</tr>
</table>
<!-- The page -->
<div class="row" lang="en">
<div class="col-sm-12 mag-80-bus-news issue-12 page-23" style="border: 1px solid #000; padding-top: 1em; padding-bottom: 1em;" lang="en" id="page">
<!-- 1 column: start --><div>
<p>
Now we can see the affects of the DAA instruction, or at least it will become
clear if you can unscramble the above table. Remember, the DAA instruction is to
enable the use of packed BCD arithmetic. All right, what is packed BCD arithmetic.
Well you all know we&rsquo;ve got eight bits available in the accumulator, and to date we&rsquo;ve
been plugging it with data in HEX, two digits at a time, the characters 0 thro&rsquo; F. Now
BCD stands for Binary Coded Decimal, and uses four bits to represent a decimal number,
0 thro&rsquo; 9. As we&rsquo;ve got eight pits in the accumulator we can accommodate two decimal
numbers, giving a decimal number range of 0 thro&rsquo; 99. The packed bit in &lsquo;packed BCD&rsquo;
simply means that there is more than one digit.
</p>
<p>
OK, so let&rsquo;s add two numbers in decimal:
</p>
<pre class="indent2">
 15
+27
---
 42
</pre>
<p class="noindent">
Now lets add the packed binary representations of the two numbers
</p>
<table class="indent2">
<tr><td><pre> 0001 0101</pre></td><td><p class="indent2">see that 0001 is the 1 and 0101 is the 5</p></td></tr>
<tr><td><pre>+0010 0111</pre></td><td></td></tr>
<tr><td><pre>----------</pre></td><td></td></tr>
<tr><td><pre> 0011 1100</pre></td><td><p class="indent2">Something went wrong, the result is 3C</p></td></tr>
</table>
<p>
Well it&rsquo;s obvious what has happened, the numbers were added in pure binary and not in
packed BCD, now the Z80 doesn&rsquo;t have an &lsquo;ADD packed BCD&rsquo; instruction, but the DAA
instruction is provided to affect the result in such a way that the effect of having
an &lsquo;ADD packed BCD&rsquo; instruction IS provided. The reason for doing it this way is
because only one &lsquo;correction&rsquo; instruction is required for seven operations, whereas
seven additional instructions would be needed in the Z80 if this were to be
implemented directly. Add up the numbers, low nibble first, 0101 + 0111 = 1100 = C,
notice there is no &lsquo;carry&rsquo; into the high nibble, so the invisible &lsquo;half carry&rsquo; flag,
H, is not set. By the same process, 00001 + 0010 = 0011 = 3, again, there is no carry,
so the C flag wasn&rsquo;t set. The result is 3C with neither the H or C flags set. Now to
determine what the DAA instruction will do with it. By inspection, it looks as if the
second row in the table satisfies these conditions, the upper digit is between 0 and 8
and there was no C, the H flag is 0 and the lower digit is between A and F. So the
table says the DAA instruction will add 06 to the 3C in the accumulator and there will
be no carry. Let&rsquo;s try it:
</p>
<table class="indent2">
<tr><td><pre> 0011 1100</pre></td><td></td></tr>
<tr><td><pre>+0000 0110</pre></td><td></td></tr>
<tr><td><pre>----------</pre></td><td></td></tr>
<tr><td><pre> 0100 0010</pre></td><td><p class="indent">Well the result is now 42 which is what we wanted.</p></td></tr>
</table>
<p>
Got it, w &ndash; e &ndash; l &ndash; l, I know it&rsquo;s difficult, but if you indulge in a bit of
practice you&rsquo;ll soon see how it works. Go on try a few random two digit numbers and
see if you can work it out from the table. Anyway, if you relate the above to the
previous episode you&rsquo;ll see how it all falls into place. As I said then, the trick is
really knowing how the instructions work, and making use of what is provided.
</p>
<p>
So, having put the lid on the DAA instruction and how B2HEX works, onto the
subject of todays lecture on the painful art. A thought has just passed its way
through my feeble brain! If you&rsquo;ve been waiting for me to get on with the job of
explaining this opaque business, and have been moving towards the light at the rate at
which I write this stuff, aren&rsquo;t you fed up with it yet? If not, there are still some
masochists out there!
</p>
<!-- 1 column: end --></div>

</div>
</div>
<!-- /The page -->
<!-- Navigation bottom -->
<table class="robots-nocontent style-table-zeropadding" style="width: 100%">
	<tr>
		<td class="navi-button">
			<a style="display: block" href="../../22/text/" title="Previous page"><span class="mirror-horizontal fas fa-play" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../01/text/" title="First page"><span class="fas fa-fast-backward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../../11/01/text/" title="Previous issue"><span class="fas fa-backward" aria-hidden=true></span></a>
		</td>
		<th class="navi-button">
			<a style="display: block" href="../../text/" title="Table of Contents">Page 23 of 55</a>
		</th>
		<td class="navi-button">
			<a style="display: block" href="../../../13/01/text/" title="Next issue"><span class="fas fa-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../55/text/" title="Last page"><span class="fas fa-fast-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../24/text/" title="Next page"><span class="fas fa-play" aria-hidden=true></span></a>
		</td>
	</tr>
</table>

<!-- navi-footer.php / $Date: 2023-03-11 15:22:20 +0100 (Sa, 11. Mrz 2023) $ -->

<!--********************************************************************************-->

	</div>

	<nav class="nav flex-column flex-md-row style-navbar-bottom robots-nocontent"> <!--nav-pills-->
		<a class="sm-fill nav-link" href="#top"><span title="Nach oben" class="fa fa-chevron-up" aria-hidden=true></span></a>
		<a class="sm-fill nav-link" href="../">Graphic</a>
		<a class="sm-fill nav-link" href="https://80bus.co.uk.mirror.jloh.de/publications/magazines/80bus_news_12.pdf#page=23" target="_blank">PDF</a>
		<a class="sm-fill nav-link" href="../../../../../../datenschutzerklaerung/">Privacy Statement</a>
		<a class="sm-fill nav-link" href="../../../../../../impressum/">Imprint</a>
	</nav>

	<!--bootstrap-->
	<script src="../../../../../../cdn/bootstrap/js/bootstrap.bundle.min.js"></script>
</body>

<!-- /navi-footer.php -->
</html>

<!-- /page.php -->