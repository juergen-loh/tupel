<!doctype html>
<html lang="de">

<!-- navi-head.php / $Date: 2023-03-11 15:22:20 +0100 (Sa, 11. Mrz 2023) $ -->
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta charset="utf-8">

	<link rel="shortcut icon" type="image/x-icon" href="../../../../../../nascom/nascom.ico">
	<link rel="icon" type="image/png" href="../../../../../../nascom/apple-touch-icon.png" sizes="32x32">
	<link rel="icon" type="image/png" href="../../../../../../nascom/apple-touch-icon.png" sizes="96x96">
	<link rel="apple-touch-icon" sizes="180x180" href="../../../../../../nascom/apple-touch-icon.png">

	<!--bootstrap-->
	<link rel="stylesheet" href="../../../../../../cdn/bootstrap/css/bootstrap.min.css">

	<!--font awesome-->
	<link rel="stylesheet" href="../../../../../../cdn/fontawesome/css/fontawesome.min.css">
	<link rel="stylesheet" href="../../../../../../cdn/fontawesome/css/solid.min.css">

	<link rel="stylesheet" type="text/css" href="../../../../../../style.css">
<!-- /navi-head.php -->

	<!-- page.php / $Date: 2024-07-13 18:55:41 +0200 (Sa, 13. Jul 2024) $ -->

	<title>80-Bus News - April&ndash;June 1982 - Volume 1 - Issue 2</title>
	<!-- Wed, 01 Jan 2025 19:19:14 GMT -->
	<meta name="keywords" content="80-Bus News, Nascom Computer, Nascom 1, Nascom 2">
	<link rel="stylesheet" type="text/css" href="../../../style.css">
<!-- navi-body.php -->
</head>

<body>
	<nav class="navbar navbar-expand-md navbar-light bg-light style-navbar-top" id="top">
	<div class="container-fluid">
		<a class="navbar-brand" href="https://jloh.de/">
			<img src="../../../../../../favicon.ico" width="32" height="32" alt="JL" title="Homepage von JÃ¼rgen Loh">
		</a>
		<button
			class="navbar-toggler"
			type="button"
			data-bs-toggle="collapse"
			data-bs-target="#navbarSupportedContent"
			aria-controls="navbarSupportedContent"
			aria-expanded="false"
			aria-label="Toggle navigation"
		>
			<span class="navbar-toggler-icon"></span>
		</button>
		<div class="collapse navbar-collapse robots-nocontent" id="navbarSupportedContent">
			<ul class="navbar-nav md-auto">
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../z80-kit/">Z80-KIT</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../nascom/1/">Nascom 1</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../nascom/">Nascom Journal</a>
				</li>
				<li class="nav-item">
					<a class="nav-link active" href="../../../../../../nascom/magazines/issues/">Nascom Magazines</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../pico/">PICO</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../cpm-plus/">CP/M</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../">Tupel BBS</a>
				</li>
			</ul>
		</div>
	</div>
	</nav>

	<div class="container" style="max-width: 750px; color: #000; padding: 0 15px 0; background-color: #FFF">

<!--********************************************************************************-->

<!-- /navi-body.php / $Date: 2024-12-30 14:10:13 +0100 (Mo, 30. Dez 2024) $ -->
<table class="style-table-zeropadding" style="width: 100%">
<tr>
<td>
<h1 class="h1Navi">80-Bus News</h1>
</td>
<td>&nbsp;&nbsp;</td>
<td style="vertical-align:top">
<h2 class="h2Navi">April&ndash;June 1982 &middot; <span class="nowrap">Volume 1 &middot;</span> <span class="nowrap">Issue 2</span></h2>
</td>
</tr>
</table>
<!-- Navigation top -->
<table class="robots-nocontent style-table-zeropadding" style="width: 100%">
	<tr>
		<td class="navi-button">
			<a style="display: block" href="../../21/text/" title="Previous page"><span class="mirror-horizontal fas fa-play" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../01/text/" title="First page"><span class="mirror-horizontal fas fa-fast-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../../11/01/text/" title="Previous issue"><span class="mirror-horizontal fas fa-forward" aria-hidden=true></span></a>
		</td>
		<th class="navi-button">
			<a style="display: block" href="../../text/" title="Table of Contents">Page 22 of 55</a>
		</th>
		<td class="navi-button">
			<a style="display: block" href="../../../13/01/text/" title="Next issue"><span class="fas fa-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../55/text/" title="Last page"><span class="fas fa-fast-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../23/text/" title="Next page"><span class="fas fa-play" aria-hidden=true></span></a>
		</td>
	</tr>
</table>
<!-- The page -->
<div class="row" lang="en">
<div class="col-sm-12 mag-80-bus-news issue-12 page-22" style="border: 1px solid #000; padding-top: 1em; padding-bottom: 1em;" lang="en" id="page">
<!-- 12 columns: start 10 --><div class="row"><div class="col-sm-10">
<h1 id="article1" class="uppercase">
The Kiddies Guide To Z80 Assembler Programming
</h1>
<!-- 12 columns: change 2 --></div><div class="col-sm-2">
<h3 class="author">
by D. R. Hunt
</h3>
<!-- 12 columns: end --></div></div>
<!-- 1 column: start --><div>
<p class="noindent">
The Crossroads of personal computing (it goes on and on).
</p>
<!-- 1 column: end --></div>
<br>
<!-- 4 columns: start --><div class="row"><div class="col-sm-3">
<h4>
Part: The Sixth
</h4>
<!-- 4 columns: change 3 --></div><div class="col-sm-9">
<p class="noindent" style="text-align: right">
Getting stuck.<br>
Nobody&rsquo;s perfect, we all make mistakes don&rsquo;t we!
</p>
<!-- 4 columns: end --></div></div>
<br>
<!-- 1 column: start --><div>
<p>
Well it had to happen, four episodes and all I get is fan mail, I had to go
and blow it on the fifth now didn&rsquo;t I. Yet, strange, only two letters and one phone
call to tell me. Either no one out there is reading this rubbish, or no one out there
understands it, or you are all so poor (having taken out a second mortgage to buy the
darned thing in the first place), you can&rsquo;t afford a stamp. Well, having been caught
by the way B2HEX worked half way through writing the last episode, I wasn&rsquo;t thorough
enough in checking the thing myself. When making use of tricks to do useful things in
programs, I said you needed to know exactly how an instruction worked, and then
proceeded to waffle on about how the DAA instruction went about its &lsquo;doings&rsquo;. Got it
wrong didn&rsquo;t I?. Made it up from what I thought it did, didn&rsquo;t I? Didn&rsquo;t look in the
<!-- External Link --><a href="https://www.zilog.com/" title="External Link" target="_blank" rel="noreferrer">Zilog</a><!-- /External Link -->
 bible, did I? Oh what the heck, I made a dogs&rsquo; breakfast of it and now I&rsquo;ve
proved what I said in the first episode, that I&rsquo;m not qualified to write this stuff
anyway. Call that an excuse? Yeah!! Want to make something of it?
</p>
<p>
So it&rsquo;s sackcloth and ashes time, I consulted the Zilog bible (not the little
one in the Nascom manual, the big fat &lsquo;Zilog Programming Manual&rsquo;), and intoned one
hundred times as a penance, &ldquo;The DAA instruction works as follows ......&rdquo;. Now I must
impart the truth and explain exactly how it does work. Fortunately (for me) the
remainder of my description of the B2HEX routine is correct, even down to the
introduction of the ADC 40H as a &lsquo;fiddle factor&rsquo;. It was only the way the DAA dealt
with it which was wrong.
</p>
<p>
So here goes. Firstly, the invisible &lsquo;Half Carry&rsquo; flag is not affected by the
DAA instruction itself, in fact, it is the preceding arithmetic instruction which sets
the H flag for the DAA instruction to use. The instructions which affect the H flag
are ADD, ADC, INC, SUB, SBC, DEC and NEG. The DAA instruction works conditionally in
the following manner:
</p>
<table class="daa-tab">
<tr><td>Prece&shy;ding<br>ope&shy;ration</td>
	<td colspan=4>Result of preceding operation in A and F</td>
	<td colspan=2>Action taken and<br>result of using DAA</td></tr>
<tr><td></td>
	<td>Con&shy;dition<br>of<br>C flag<br>before DAA</td>
	<td>HEX<br>value in<br>upper<br>digit<br>(bits 4,<br>5,6,7)</td>
	<td>Con&shy;dition<br>of<br>H flag<br>before DAA</td>
	<td>HEX<br>value in<br>lower<br>digit<br>(bits 0,<br>1,2,3)</td>
	<td>Number<br>added to<br>A by DAA</td>
	<td>Con&shy;dition<br>of<br>C flag<br>after DAA</td></tr>
<tr><td>ADD<br>ADC<br>INC</td>
	<td>0<br>0<br>0<br>0<br>0<br>0<br>1<br>1<br>1</td>
	<td>0 &ndash; 9<br>0 &ndash; 8<br>0 &ndash; 9<br>A &ndash; F<br>9 &ndash; F<br>A &ndash; F<br>0 &ndash; 2<br>0 &ndash; 2<br>0 &ndash; 3</td>
	<td>0<br>0<br>1<br>0<br>0<br>1<br>0<br>0<br>1</td>
	<td>0 &ndash; 9<br>A &ndash; F<br>0 &ndash; 3<br>0 &ndash; 9<br>A &ndash; F<br>0 &ndash; 3<br>0 &ndash; 9<br>A &ndash; F<br>0 &ndash; 3</td>
	<td>00<br>06<br>06<br>60<br>66<br>66<br>60<br>66<br>66</td>
	<td>0<br>0<br>0<br>1<br>1<br>1<br>1<br>1<br>1</td></tr>
<tr><td>SUB<br>SBC<br>DEC<br>NEG</td>
	<td>0<br>0<br>1<br>1</td>
	<td>0 &ndash; 9<br>0 &ndash; 8<br>7 &ndash; F<br>6 &ndash; F</td>
	<td>0<br>1<br>0<br>1</td>
	<td>0 &ndash; 9<br>6 &ndash; F<br>0 &ndash; 9<br>6 &ndash; F</td>
	<td>00<br>FA<br>A0<br>9A</td>
	<td>0<br>1<br>1<br>1</td></tr>
</table>
<!-- 1 column: end --></div>

</div>
</div>
<!-- /The page -->
<!-- Navigation bottom -->
<table class="robots-nocontent style-table-zeropadding" style="width: 100%">
	<tr>
		<td class="navi-button">
			<a style="display: block" href="../../21/text/" title="Previous page"><span class="mirror-horizontal fas fa-play" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../01/text/" title="First page"><span class="mirror-horizontal fas fa-fast-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../../11/01/text/" title="Previous issue"><span class="mirror-horizontal fas fa-forward" aria-hidden=true></span></a>
		</td>
		<th class="navi-button">
			<a style="display: block" href="../../text/" title="Table of Contents">Page 22 of 55</a>
		</th>
		<td class="navi-button">
			<a style="display: block" href="../../../13/01/text/" title="Next issue"><span class="fas fa-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../55/text/" title="Last page"><span class="fas fa-fast-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../23/text/" title="Next page"><span class="fas fa-play" aria-hidden=true></span></a>
		</td>
	</tr>
</table>

<!-- navi-footer.php / $Date: 2023-03-11 15:22:20 +0100 (Sa, 11. Mrz 2023) $ -->

<!--********************************************************************************-->

	</div>

	<nav class="nav flex-column flex-md-row style-navbar-bottom robots-nocontent"> <!--nav-pills-->
		<a class="sm-fill nav-link" href="#top"><span title="Nach oben" class="fa fa-chevron-up" aria-hidden=true></span></a>
		<a class="sm-fill nav-link" href="../">Graphic</a>
		<a class="sm-fill nav-link" href="https://80bus.co.uk.mirror.jloh.de/publications/magazines/80bus_news_12.pdf#page=22" target="_blank">PDF</a>
		<a class="sm-fill nav-link" href="../../../../../../datenschutzerklaerung/">Privacy Statement</a>
		<a class="sm-fill nav-link" href="../../../../../../impressum/">Imprint</a>
	</nav>

	<!--bootstrap-->
	<script src="../../../../../../cdn/bootstrap/js/bootstrap.bundle.min.js"></script>
</body>

<!-- /navi-footer.php -->
</html>

<!-- /page.php -->