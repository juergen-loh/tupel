<!doctype html>
<html lang="de">

<!-- navi-head.php / $Date: 2023-03-11 15:22:20 +0100 (Sa, 11. Mrz 2023) $ -->
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta charset="utf-8">

	<link rel="shortcut icon" type="image/x-icon" href="../../../../../../nascom/nascom.ico">
	<link rel="icon" type="image/png" href="../../../../../../nascom/apple-touch-icon.png" sizes="32x32">
	<link rel="icon" type="image/png" href="../../../../../../nascom/apple-touch-icon.png" sizes="96x96">
	<link rel="apple-touch-icon" sizes="180x180" href="../../../../../../nascom/apple-touch-icon.png">

	<!--bootstrap-->
	<link rel="stylesheet" href="../../../../../../cdn/bootstrap/css/bootstrap.min.css">

	<!--font awesome-->
	<link rel="stylesheet" href="../../../../../../cdn/fontawesome/css/fontawesome.min.css">
	<link rel="stylesheet" href="../../../../../../cdn/fontawesome/css/solid.min.css">

	<link rel="stylesheet" type="text/css" href="../../../../../../style.css">
<!-- /navi-head.php -->

	<!-- page.php / $Date: 2024-07-13 18:55:41 +0200 (Sa, 13. Jul 2024) $ -->

	<title>80-Bus News - January&ndash;February 1983 - Volume 2 - Issue 1</title>
	<!-- Sun, 15 Dec 2024 13:34:17 GMT -->
	<meta name="keywords" content="80-Bus News, Nascom Computer, Nascom 1, Nascom 2">
	<link rel="stylesheet" type="text/css" href="../../../style.css">
<!-- navi-body.php -->
</head>

<body>
	<nav class="navbar navbar-expand-md navbar-light bg-light style-navbar-top" id="top">
	<div class="container-fluid">
		<a class="navbar-brand" href="https://jloh.de/">
			<img src="../../../../../../favicon.ico" width="32" height="32" alt="JL" title="Homepage von JÃ¼rgen Loh">
		</a>
		<button
			class="navbar-toggler"
			type="button"
			data-bs-toggle="collapse"
			data-bs-target="#navbarSupportedContent"
			aria-controls="navbarSupportedContent"
			aria-expanded="false"
			aria-label="Toggle navigation"
		>
			<span class="navbar-toggler-icon"></span>
		</button>
		<div class="collapse navbar-collapse robots-nocontent" id="navbarSupportedContent">
			<ul class="navbar-nav md-auto">
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../z80-kit/">Z80-KIT</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../nascom/1/">Nascom 1</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../nascom/">Nascom Journal</a>
				</li>
				<li class="nav-item">
					<a class="nav-link active" href="../../../../../../nascom/magazines/issues/">Nascom Magazines</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../pico/">PICO</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../cpm-plus/">CP/M</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../">Tupel BBS</a>
				</li>
			</ul>
		</div>
	</div>
	</nav>

	<div class="container" style="max-width: 750px; color: #000; padding: 0 15px 0; background-color: #FFF">

<!--********************************************************************************-->

<!-- /navi-body.php / $Date: 2024-12-15 14:31:39 +0100 (So, 15. Dez 2024) $ -->
<table class="style-table-zeropadding" style="width: 100%">
<tr>
<td>
<h1 class="h1Navi">80-Bus News</h1>
</td>
<td>&nbsp;&nbsp;</td>
<td style="vertical-align:top">
<h2 class="h2Navi">January&ndash;February 1983 &middot; <span class="nowrap">Volume 2 &middot;</span> <span class="nowrap">Issue 1</span></h2>
</td>
</tr>
</table>
<!-- Navigation top -->
<table class="robots-nocontent style-table-zeropadding" style="width: 100%">
	<tr>
		<td class="navi-button">
			<a style="display: block" href="../../11/text/" title="Previous page"><span class="mirror-horizontal fas fa-play" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../01/text/" title="First page"><span class="mirror-horizontal fas fa-fast-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../../14/01/text/" title="Previous issue"><span class="mirror-horizontal fas fa-forward" aria-hidden=true></span></a>
		</td>
		<th class="navi-button">
			<a style="display: block" href="../../text/" title="Table of Contents">Page 12 of 56</a>
		</th>
		<td class="navi-button">
			<a style="display: block" href="../../../22/01/text/" title="Next issue"><span class="fas fa-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../56/text/" title="Last page"><span class="fas fa-fast-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../13/text/" title="Next page"><span class="fas fa-play" aria-hidden=true></span></a>
		</td>
	</tr>
</table>
<!-- The page -->
<div class="row" lang="en">
<div class="col-sm-12 mag-80-bus-news issue-21 page-12" style="border: 1px solid #000; padding-top: 1em; padding-bottom: 1em;" lang="en" id="page">
<!-- 1 column: start --><div>
<p class="continued">
until one instruction later. This is to allow the RETI to take effect. In the
event that it is possible for it to do so, the Interrupt service routine must
clear the interrupt condition before it executes the RETI. Otherwise, a further
interrupt will not show up. Say we interrupt on A0 or Al high. If A0 goes high
and causes an interrupt, we go to the interrupt service routine. While there, Al
goes high, but the <!-- External Link --><a href="https://www.zilog.com/docs/z80/ps0180.pdf" title="External Link: Z80 PIO" target="_blank" rel="noreferrer">PIO</a><!-- /External Link -->
 does not signal for a further interrupt. Why? Its
instructions are to signal for interrupt if A0 is high OR Al is high (or both).
This means that the internal flag for an interrupt is set and remains set until
the RETI. The service routine should clear A0 (if it doesn&rsquo;t clear itself
automatically), so that on the RETI instruction, the condition that caused the
interrupt has gone false. If after the RETI the interrupt condition is again
present&nbsp;&ndash; having gone false&nbsp;&ndash; then a new interrupt is signaled. If the interrupt
condition has not cleared, for whatever reason, the PIO knows that it has
signaled for an interrupt for that condition. Remember that the PIO is smart, but
not smart enough to distinguish between different causes of interrupts. Anything
that causes a valid interrupt within the PIO is equal to any other valid
interrupt cause.
</p>
<p>
The <!-- External Link --><a href="https://www.zilog.com/docs/z80/ps0181.pdf" title="External Link: Z80 CTC" target="_blank" rel="noreferrer">CTC</a><!-- /External Link -->
 is another interesting chip. It contains four channels, which can
be configured as counters or timers. Each channel can be programmed to count down
the system clock, divided by specified scaling factors, or to sample transitions
of an external line, and interrupt on a specified count. This chip could, for
example, allow you to use the standard Nascom UART so as to give interrupt driven
cassette handling. In certain machines it is used to give a time of day clock, at
the annoyance of having to enter the time as part of powerup procedure. I would
not recommend it in such an application. Instead, I&rsquo;d recommend most strongly a
Real Time Clock, such as already written about in both
<a href="../../../../inmc-80-news/05/67/text/#article2">INMC80</a> and
<a href="../../../../micropower/23/02/text/#article1">Micropower</a>.
A use for the CTC that <!-- External Link --><a href="https://www.zilog.com/" title="External Link" target="_blank" rel="noreferrer">Zilog</a><!-- /External Link -->
 suggest is
to use one of these units to prioritise
four non Z80 system interrupts. The ready lines from these peripherals are
connected to the four ports of the CTC, and it is configured to react to a count
of one. Then when one of these lines goes active, the Interrupt service routine
proceeds to service the appropriate peripheral, as if it were a Z80 type
peripheral.
</p>
<p>
Those who read David Parkinson&rsquo;s interesting article on finding and
optimising the most used sections of code in a program may like to know that it
would be possible to program a CTC to cause regular interrupts to the program for
profiling purposes, if you are SURE that the program does not disable interrupts
at any stage. Alternately, an output from one channel could be made to cause an
NMI at intervals in lieu of the little circuit he used.
</p>
<p>
All this sounds very complex&nbsp;&ndash; put it does work! Moreover, it works even
if you don&rsquo;t understand why, so long as you do the correct things! What I have
written above is all contained in the device manuals, and in the event of any
difference between what I have written and they state, they should take priority.
I know from my own experience that the interrupts do work, but that it takes a
considerable amount of study and work on them to master them. I append a list of
references which I have found to be of use. I hope they will prove useful to
other Nascom and Gemini users.
</p>
<h4>
References:
</h4>
<p class="noindent">
&ldquo;<!-- External Link --><a href="https://worldradiohistory.com/UK/Personal-Computer-World/80s/PCW-1980-06-S-OCR.pdf#page=62" title="External Link: Personal Computer World, June 1980, page 60" target="_blank" rel="noreferrer">May I Interrupt?</a><!-- /External Link -->&rdquo;, PCW Vol&nbsp;3, No&nbsp;6, June 1980, pages&nbsp;60-63/111<br>
<a href="../../../../inmc-news/02/06/text/#article1">Notes on PIO operation</a>, INMC No.&nbsp;2, pages&nbsp;6-8<br>
<a href="../../../../inmc-news/06/19/text/#article2">Understanding the PIO</a>, INMC No.&nbsp;6, pages&nbsp;19-20<br>
<a href="../../../../inmc-80-news/01/24/text/#article1">Using the PIO</a>, INMC80 No.&nbsp;1, pages&nbsp;24-25<br>
<a href="../../../11/17/text/#article1">DIY Real Time Clock</a>, 80-Bus News No.&nbsp;1, Pages&nbsp;17-24<br>
<!-- External Link --><a href="https://www.zilog.com/docs/z80/ps0180.pdf" title="External Link: Z80 PIO" target="_blank" rel="noreferrer">Mostek (or Zilog) Parallel I/O Controller Manual</a><!-- /External Link -->
<br>
<!-- External Link --><a href="https://www.zilog.com/docs/z80/ps0181.pdf" title="External Link: Z80 CTC" target="_blank" rel="noreferrer">Mostek (or Zilog) Counter Timer Circuit Manual</a><!-- /External Link -->
<br>
<a href="../../../../micropower/21/02/text/#article1">Washing Machine controls Nascom</a>, Micropower Vol2, No.&nbsp;1, pages&nbsp;2-6<br>
<a href="../../../../micropower/23/02/text/#article1">The French Connection</a>, Micropower Vol&nbsp;2, No.&nbsp;3, pages&nbsp;2-5 (a RTC circuit!)<br>
<!-- External Link --><a href="https://worldradiohistory.com/UK/Personal-Computer-World/80s/PCW-1980-10-S-OCR.pdf#page=84" title="External Link: Personal Computer World, October 1980, page 82" target="_blank" rel="noreferrer">Parkinson&rsquo;s Pep-Up</a><!-- /External Link -->, PCW Vol&nbsp;3, No.&nbsp;10, October 1980, pages&nbsp;82-83/123
</p>
<!-- Linie --><div class="hline" style="width: 20%; margin:auto;  border-top:1px solid #000; padding: 0; margin-top: 3px; margin-bottom: 3px"></div>
<!-- 1 column: end --></div>

</div>
</div>
<!-- /The page -->
<!-- Navigation bottom -->
<table class="robots-nocontent style-table-zeropadding" style="width: 100%">
	<tr>
		<td class="navi-button">
			<a style="display: block" href="../../11/text/" title="Previous page"><span class="mirror-horizontal fas fa-play" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../01/text/" title="First page"><span class="mirror-horizontal fas fa-fast-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../../14/01/text/" title="Previous issue"><span class="mirror-horizontal fas fa-forward" aria-hidden=true></span></a>
		</td>
		<th class="navi-button">
			<a style="display: block" href="../../text/" title="Table of Contents">Page 12 of 56</a>
		</th>
		<td class="navi-button">
			<a style="display: block" href="../../../22/01/text/" title="Next issue"><span class="fas fa-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../56/text/" title="Last page"><span class="fas fa-fast-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../13/text/" title="Next page"><span class="fas fa-play" aria-hidden=true></span></a>
		</td>
	</tr>
</table>

<!-- navi-footer.php / $Date: 2023-03-11 15:22:20 +0100 (Sa, 11. Mrz 2023) $ -->

<!--********************************************************************************-->

	</div>

	<nav class="nav flex-column flex-md-row style-navbar-bottom robots-nocontent"> <!--nav-pills-->
		<a class="sm-fill nav-link" href="#top"><span title="Nach oben" class="fa fa-chevron-up" aria-hidden=true></span></a>
		<a class="sm-fill nav-link" href="../">Graphic</a>
		<a class="sm-fill nav-link" href="https://80bus.co.uk.mirror.jloh.de/publications/magazines/80bus_news_21.pdf#page=12" target="_blank">PDF</a>
		<a class="sm-fill nav-link" href="../../../../../../datenschutzerklaerung/">Privacy Statement</a>
		<a class="sm-fill nav-link" href="../../../../../../impressum/">Imprint</a>
	</nav>

	<!--bootstrap-->
	<script src="../../../../../../cdn/bootstrap/js/bootstrap.bundle.min.js"></script>
</body>

<!-- /navi-footer.php -->
</html>

<!-- /page.php -->