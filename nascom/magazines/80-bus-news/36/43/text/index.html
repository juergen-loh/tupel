<!doctype html>
<html lang="de">

<!-- navi-head.php / $Date: 2023-03-11 15:22:20 +0100 (Sa, 11. Mrz 2023) $ -->
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta charset="utf-8">

	<link rel="shortcut icon" type="image/x-icon" href="../../../../../../nascom/nascom.ico">
	<link rel="icon" type="image/png" href="../../../../../../nascom/apple-touch-icon.png" sizes="32x32">
	<link rel="icon" type="image/png" href="../../../../../../nascom/apple-touch-icon.png" sizes="96x96">
	<link rel="apple-touch-icon" sizes="180x180" href="../../../../../../nascom/apple-touch-icon.png">

	<!--bootstrap-->
	<link rel="stylesheet" href="../../../../../../cdn/bootstrap/css/bootstrap.min.css">

	<!--font awesome-->
	<link rel="stylesheet" href="../../../../../../cdn/fontawesome/css/fontawesome.min.css">
	<link rel="stylesheet" href="../../../../../../cdn/fontawesome/css/solid.min.css">

	<link rel="stylesheet" type="text/css" href="../../../../../../style.css">
<!-- /navi-head.php -->

	<!-- page.php / $Date: 2024-07-13 18:55:41 +0200 (Sa, 13. Jul 2024) $ -->

	<title>80-Bus News - November&ndash;December 1984 - Volume 3 - Issue 6</title>
	<!-- Wed, 01 Jan 2025 19:19:14 GMT -->
	<meta name="keywords" content="80-Bus News, Nascom Computer, Nascom 1, Nascom 2">
	<link rel="stylesheet" type="text/css" href="../../../style.css">
<!-- navi-body.php -->
</head>

<body>
	<nav class="navbar navbar-expand-md navbar-light bg-light style-navbar-top" id="top">
	<div class="container-fluid">
		<a class="navbar-brand" href="https://jloh.de/">
			<img src="../../../../../../favicon.ico" width="32" height="32" alt="JL" title="Homepage von JÃ¼rgen Loh">
		</a>
		<button
			class="navbar-toggler"
			type="button"
			data-bs-toggle="collapse"
			data-bs-target="#navbarSupportedContent"
			aria-controls="navbarSupportedContent"
			aria-expanded="false"
			aria-label="Toggle navigation"
		>
			<span class="navbar-toggler-icon"></span>
		</button>
		<div class="collapse navbar-collapse robots-nocontent" id="navbarSupportedContent">
			<ul class="navbar-nav md-auto">
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../z80-kit/">Z80-KIT</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../nascom/1/">Nascom 1</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../nascom/">Nascom Journal</a>
				</li>
				<li class="nav-item">
					<a class="nav-link active" href="../../../../../../nascom/magazines/issues/">Nascom Magazines</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../pico/">PICO</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../cpm-plus/">CP/M</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../">Tupel BBS</a>
				</li>
			</ul>
		</div>
	</div>
	</nav>

	<div class="container" style="max-width: 750px; color: #000; padding: 0 15px 0; background-color: #FFF">

<!--********************************************************************************-->

<!-- /navi-body.php / $Date: 2024-12-30 14:10:13 +0100 (Mo, 30. Dez 2024) $ -->
<table class="style-table-zeropadding" style="width: 100%">
<tr>
<td>
<h1 class="h1Navi">80-Bus News</h1>
</td>
<td>&nbsp;&nbsp;</td>
<td style="vertical-align:top">
<h2 class="h2Navi">November&ndash;December 1984 &middot; <span class="nowrap">Volume 3 &middot;</span> <span class="nowrap">Issue 6</span></h2>
</td>
</tr>
</table>
<!-- Navigation top -->
<table class="robots-nocontent style-table-zeropadding" style="width: 100%">
	<tr>
		<td class="navi-button">
			<a style="display: block" href="../../42/text/" title="Previous page"><span class="mirror-horizontal fas fa-play" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../01/text/" title="First page"><span class="mirror-horizontal fas fa-fast-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../../35/01/text/" title="Previous issue"><span class="mirror-horizontal fas fa-forward" aria-hidden=true></span></a>
		</td>
		<th class="navi-button">
			<a style="display: block" href="../../text/" title="Table of Contents">Page 43 of 55</a>
		</th>
		<td class="navi-button">
			<a style="display: block" href="../../../41/01/text/" title="Next issue"><span class="fas fa-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../55/text/" title="Last page"><span class="fas fa-fast-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../44/text/" title="Next page"><span class="fas fa-play" aria-hidden=true></span></a>
		</td>
	</tr>
</table>
<!-- The page -->
<div class="row" lang="en">
<div class="col-sm-12 mag-80-bus-news issue-36 page-43" style="border: 1px solid #000; padding-top: 1em; padding-bottom: 1em;" lang="en" id="page">
<!-- 4 columns: start 3 --><div class="row"><div class="col-sm-9">
<h2 id="article1" class="uppercase">
<u>Put A Real Time Clock Into Your CBIOS</u>
</h2>
<!-- 4 columns: change --></div><div class="col-sm-3">
<h3 class="author">
<u>By C. Bowden</u>
</h3>
<!-- 4 columns: end --></div></div>
<!-- 1 column: start --><div>
<p>
This article explains how I managed to alter my CBIOS so that I was able
to display the Date and Time on screen, using a Gemini
<!-- External Link --><a href="https://80bus.co.uk.mirror.jloh.de/pages/gemini/gm816.htm" title="External Link" target="_blank" rel="noreferrer">GM816</a><!-- /External Link -->
I/O card which contains a REAL TIME CLOCK. Readers may already have
an R.T.C. available on either the Gemini
<!-- External Link --><a href="https://80bus.co.uk.mirror.jloh.de/pages/gemini/gm822.htm" title="External Link" target="_blank" rel="noreferrer">GM822</a><!-- /External Link -->
or GM816 card, or some other commercial or homebrew
card. Many readers will also either have a &lsquo;source&rsquo; listing of their CBIOS, or
be using one of the &lsquo;SYS&rsquo; CBIOS&rsquo;s, in which case, the method described can be
used with appropriate modification. If no listing is available, I have given
at the end of the article some suggestions that may help, although I have not
tried them.
</p>
<p>
The idea of having a real time clock on my computer has appealed to me
for some time. I have used a couple at work. One was a simple scheme, using a
58174A hung onto the <!-- External Link --><a href="https://www.zilog.com/docs/z80/ps0180.pdf" title="External Link: Z80 PIO" target="_blank" rel="noreferrer">PIO</a><!-- /External Link -->
 of a Nascom&nbsp;2 that is running all the time carrying
out a control job. The other one, in a Gemini GALAXY 2, used the card produced
by E.V. Computing that attaches to the Gemini
<!-- External Link --><a href="https://80bus.co.uk.mirror.jloh.de/pages/gemini/gm812.htm" title="External Link" target="_blank" rel="noreferrer">GM812</a><!-- /External Link -->
<!-- External Link --><a href="https://80bus.co.uk.mirror.jloh.de/pages/gemini/gm812.htm" title="External Link" target="_blank" rel="noreferrer">IVC</a><!-- /External Link -->
card. The latter
solution is particularly nice as it does not interfere with the main CPU at
all, and the time updates irrespective of any task that the main CPU is doing.
The card offers several other features too, but the cost is of course higher.
</p>
<p>
Having an RTC in the machine is of course all very well, but it is
obviously an advantage to be able to see the date and time displayed on the
screen at all times, and also to be able to &lsquo;call&rsquo; up the clock from user
programs. A number of example programs have been printed in this magazine from
time to time, describing how to build and/or program such clocks, but little
has appeared on how to incorporate one into CP/M (versions 1.4 and 2.2 &ndash;
version 3 supports a clock).
</p>
<p>
After some thought and a bit of trial and error, I succeeded in doing
this with reasonable success. In this article I will describe how I did this
with CP/M&nbsp;2.2, using a Gemini GM816 I/O card and SYS version 16. Much of the
methods used will be applicable to other software and hardware.
</p>
<p>
When considering the use of a Clock, there are several questions that
must be answered before it can be decided whether a particular method is
satisfactory. The first consideration is one of accuracy. How accurate must
the clock be, and how accurate must the display be? The two are not
necessarily the same. The Clock hardware used might be highly accurate, with
errors of less than a few seconds in a year, but if the clock display is only
updated every hour, then that is the limit of accuracy that can be obtained
from the display. (A program might still read the clock much more accurately.)
For most purposes, it would probably be acceptable for the clock to be
accurate to better than a few seconds a day, with a display that updates at
about once every second. This was my target, and it was easily attained, but
with one minor restriction. There may be occasions when the Screen clock
display will &lsquo;freeze&rsquo; for a minute or two, although it will then be corrected
at the next update.
</p>
<p>
This restriction can best be explained by investigating how a clock might
be incorporated into CP/M. Most clocks are capable of causing an Interrupt,
and the clocks mentioned are no exception. There is however a distinct problem
in using an Interrupt. Firstly, none of the simple clock chip systems generate
a vector (although one used via a PIO can use the PIO vector). Use of most of
the <span class="uppercase">Restart</span> vectors is also not available for the same reason, unless
</p>
<!-- 1 column: end --></div>

</div>
</div>
<!-- /The page -->
<!-- Navigation bottom -->
<table class="robots-nocontent style-table-zeropadding" style="width: 100%">
	<tr>
		<td class="navi-button">
			<a style="display: block" href="../../42/text/" title="Previous page"><span class="mirror-horizontal fas fa-play" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../01/text/" title="First page"><span class="mirror-horizontal fas fa-fast-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../../35/01/text/" title="Previous issue"><span class="mirror-horizontal fas fa-forward" aria-hidden=true></span></a>
		</td>
		<th class="navi-button">
			<a style="display: block" href="../../text/" title="Table of Contents">Page 43 of 55</a>
		</th>
		<td class="navi-button">
			<a style="display: block" href="../../../41/01/text/" title="Next issue"><span class="fas fa-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../55/text/" title="Last page"><span class="fas fa-fast-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../44/text/" title="Next page"><span class="fas fa-play" aria-hidden=true></span></a>
		</td>
	</tr>
</table>

<!-- navi-footer.php / $Date: 2023-03-11 15:22:20 +0100 (Sa, 11. Mrz 2023) $ -->

<!--********************************************************************************-->

	</div>

	<nav class="nav flex-column flex-md-row style-navbar-bottom robots-nocontent"> <!--nav-pills-->
		<a class="sm-fill nav-link" href="#top"><span title="Nach oben" class="fa fa-chevron-up" aria-hidden=true></span></a>
		<a class="sm-fill nav-link" href="../">Graphic</a>
		<a class="sm-fill nav-link" href="https://80bus.co.uk.mirror.jloh.de/publications/magazines/80bus_news_36.pdf#page=43" target="_blank">PDF</a>
		<a class="sm-fill nav-link" href="../../../../../../datenschutzerklaerung/">Privacy Statement</a>
		<a class="sm-fill nav-link" href="../../../../../../impressum/">Imprint</a>
	</nav>

	<!--bootstrap-->
	<script src="../../../../../../cdn/bootstrap/js/bootstrap.bundle.min.js"></script>
</body>

<!-- /navi-footer.php -->
</html>

<!-- /page.php -->