<!doctype html>
<html lang="de">

<!-- navi-head.php / $Date: 2023-03-11 15:22:20 +0100 (Sa, 11. Mrz 2023) $ -->
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta charset="utf-8">

	<link rel="shortcut icon" type="image/x-icon" href="../../../../../../nascom/nascom.ico">
	<link rel="icon" type="image/png" href="../../../../../../nascom/apple-touch-icon.png" sizes="32x32">
	<link rel="icon" type="image/png" href="../../../../../../nascom/apple-touch-icon.png" sizes="96x96">
	<link rel="apple-touch-icon" sizes="180x180" href="../../../../../../nascom/apple-touch-icon.png">

	<!--bootstrap-->
	<link rel="stylesheet" href="../../../../../../cdn/bootstrap/css/bootstrap.min.css">

	<!--font awesome-->
	<link rel="stylesheet" href="../../../../../../cdn/fontawesome/css/fontawesome.min.css">
	<link rel="stylesheet" href="../../../../../../cdn/fontawesome/css/solid.min.css">

	<link rel="stylesheet" type="text/css" href="../../../../../../style.css">
<!-- /navi-head.php -->

	<!-- page.php / $Date: 2024-06-16 15:50:29 +0200 (So, 16. Jun 2024) $ -->

	<title>80-Bus News - May&ndash;June 1983 - Volume 2 - Issue 3</title>
	<!-- Sun, 30 Jun 2024 10:05:41 GMT -->
	<meta name="keywords" content="80-Bus News, Nascom Computer, Nascom 1, Nascom 2">
	<link rel="stylesheet" type="text/css" href="../../../style.css">
<!-- navi-body.php -->
</head>

<body>
	<nav class="navbar navbar-expand-md navbar-light bg-light style-navbar-top" id="top">
	<div class="container-fluid">
		<a class="navbar-brand" href="https://jloh.de/">
			<img src="../../../../../../favicon.ico" width="32" height="32" alt="JL" title="Homepage von JÃ¼rgen Loh">
		</a>
		<button
			class="navbar-toggler"
			type="button"
			data-bs-toggle="collapse"
			data-bs-target="#navbarSupportedContent"
			aria-controls="navbarSupportedContent"
			aria-expanded="false"
			aria-label="Toggle navigation"
		>
			<span class="navbar-toggler-icon"></span>
		</button>
		<div class="collapse navbar-collapse robots-nocontent" id="navbarSupportedContent">
			<ul class="navbar-nav md-auto">
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../z80-kit/">Z80-KIT</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../nascom/1/">Nascom 1</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../nascom/">Nascom Journal</a>
				</li>
				<li class="nav-item">
					<a class="nav-link active" href="../../../../../../nascom/magazines/issues/">Nascom Magazines</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../pico/">PICO</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../cpm-plus/">CP/M</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../">Tupel BBS</a>
				</li>
			</ul>
		</div>
	</div>
	</nav>

	<div class="container" style="max-width: 750px; color: #000; padding: 0 15px 0; background-color: #FFF">

<!--********************************************************************************-->

<!-- /navi-body.php / $Date: 2024-06-30 12:05:40 +0200 (So, 30. Jun 2024) $ -->
<table class="style-table-zeropadding" style="width: 100%">
<tr>
<td>
<h1 class="h1Navi">80-Bus News</h1>
</td>
<td>&nbsp;&nbsp;</td>
<td style="vertical-align:top">
<h2 class="h2Navi">May&ndash;June 1983 &middot; <span class="nowrap">Volume 2 &middot;</span> <span class="nowrap">Issue 3</span></h2>
</td>
</tr>
</table>
<!-- Navigation top -->
<table class="robots-nocontent style-table-zeropadding" style="width: 100%">
	<tr>
		<td class="navi-button">
			<a style="display: block" href="../../30/text/" title="Previous page"><span class="mirror-horizontal fas fa-play" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../01/text/" title="First page"><span class="fas fa-fast-backward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../../22/01/text/" title="Previous issue"><span class="fas fa-backward" aria-hidden=true></span></a>
		</td>
		<th class="navi-button">
			<a style="display: block" href="../../text/" title="Table of Contents">Page 31 of 59</a>
		</th>
		<td class="navi-button">
			<a style="display: block" href="../../../24/01/text/" title="Next issue"><span class="fas fa-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../59/text/" title="Last page"><span class="fas fa-fast-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../32/text/" title="Next page"><span class="fas fa-play" aria-hidden=true></span></a>
		</td>
	</tr>
</table>
<!-- The page -->
<div class="row" lang="en">
<div class="col-sm-12 mag-80-bus-news issue-23 page-31" style="border: 1px solid #000; padding-top: 1em; padding-bottom: 1em;" lang="en" id="page">
<div class="DisAssemblyRomBasic"><!-- 1 column: start --><div>
<table>
<colgroup><col><col><col><col></colgroup>

<tr><th colspan=3><p>The workings of <span class="uppercase">Nascom</span> ROM BASIC Ver 4.7</p></th><th><p>PAGE 8</p></th></tr>

<tr><td colspan=4><p>
******** How variables and arrays are stored ********
</p></td></tr>
<tr><td colspan=4><p>
Variables such as AB AB$ and FN AB are all stored in the simple variable area
of memory. The start address of this area is held in PROGND and the end address
is held in VAREND.
</p></td></tr>
<tr><td colspan=4><p>
If AB=10 and AB$="TEXT&rdquo; and FN AB(XY) had been defined then the memory would
look like this
</p></td></tr>

<tr><td colspan=4>
<table class="list2">
<colgroup><col><col></colgroup>

<tr><td><p>42 41</p></td><td><p>
Name of AB in reverse (42 41 = &ldquo;B&rdquo; &ldquo;A")
</p></td></tr>
<tr><td><p>00 00 20 84</p></td><td><p>
Floating point value for 10
</p></td></tr>

</table>
<tr><td colspan=4>
<table class="list2">
<colgroup><col><col></colgroup>

<tr><td><p>C2 41</p></td><td><p>
Name for AB$ (C2 is &ldquo;B&rdquo; with bit 7 set)
</p></td></tr>
<tr><td><p>04</p></td><td><p>
Length of string (4 characters)
</p></td></tr>
<tr><td><p>??</p></td><td><p>
This byte unused for string
</p></td></tr>
<tr><td><p>LL HH</p></td><td><p>
Address where &ldquo;TEXT&rdquo; is to be found
</p></td></tr>

</table>
<tr><td colspan=4>
<table class="list2">
<colgroup><col><col></colgroup>

<tr><td><p>42 C1</p></td><td><p>
Name of FN AB (C1 is &ldquo;A&rdquo; with bit 7 set)
</p></td></tr>
<tr><td><p>LL HH</p></td><td><p>
Address of function (After &ldquo;=")
</p></td></tr>
<tr><td><p>59 58</p></td><td><p>
Argument name in reverse (59 58 = &ldquo;Y&rdquo; &ldquo;X")
</p></td></tr>

</table>
</tr>

<tr><td colspan=4><p>
Arrays such as AB(1,3) and AB$(3,1) are stored in the array area of memory. The
start address of this area is held in VAREND and the end address is held in
ARREND.
</p></td></tr>
<tr><td colspan=4><p>
If DIM AB(1,3),&#x200b;AB$(3,1) had been entered then the memory would look like this:&ndash;
</p></td></tr>

<tr><td colspan=4>
<table class="list2">
<colgroup><col><col></colgroup>

<tr><td><p>42 41</p></td><td><p>
Name of array AB in reverse
</p></td></tr>
<tr><td><p>25 00</p></td><td><p>
Bytes used for array (0025 = 37)
</p></td></tr>
<tr><td><p>02</p></td><td><p>
2 dimensions
</p></td></tr>
<tr><td><p>04 00</p></td><td><p>
Size of second dimension including zero element
</p></td></tr>
<tr><td><p>02 00</p></td><td><p>
Size of first dimension including zero element
</p></td></tr>
<tr><td><p>00 00 00 00</p></td><td><p>
AB(0,0)
</p></td></tr>
<tr><td><p>00 00 00 00</p></td><td><p>
AB(1,0)
</p></td></tr>
<tr><td><p>00 00 00 00</p></td><td><p>
AB(0,1)
</p></td></tr>
<tr><td><p>00 00 00 00</p></td><td><p>
AB(1,1)
</p></td></tr>
<tr><td><p>00 00 00 00</p></td><td><p>
AB(0,2)
</p></td></tr>
<tr><td><p>00 00 00 00</p></td><td><p>
AB(1,2)
</p></td></tr>
<tr><td><p>00 00 00 00</p></td><td><p>
AB(0,3)
</p></td></tr>
<tr><td><p>00 00 00 00</p></td><td><p>
AB(1,3)
</p></td></tr>

</table>
<tr class="nopad"><td colspan=4>
<table class="list2">
<colgroup><col><col></colgroup>

<tr><td><p>C2 41</p></td><td><p>
Name of array AB$ in reverse
</p></td></tr>
<tr><td><p>25 00</p></td><td><p>
Bytes used for array (0025 = 37)
</p></td></tr>
<tr><td><p>02</p></td><td><p>
2 dimensions
</p></td></tr>
<tr><td><p>02 00</p></td><td><p>
Size of second dimension including zero element
</p></td></tr>
<tr><td><p>04 00</p></td><td><p>
Size of first dimension including zero element
</p></td></tr>
<tr><td><p>00 00 00 00</p></td><td><p>
AB$(0,0)
</p></td></tr>
<tr><td><p>00 00 00 00</p></td><td><p>
AB$(1,0)
</p></td></tr>
<tr><td><p>00 00 00 00</p></td><td><p>
AB$(2,0)
</p></td></tr>
<tr><td><p>00 00 00 00</p></td><td><p>
AB$(3,0)
</p></td></tr>
<tr><td><p>00 00 00 00</p></td><td><p>
AB$(0,1)
</p></td></tr>
<tr><td><p>00 00 00 00</p></td><td><p>
AB$(1,1)
</p></td></tr>
<tr><td><p>00 00 00 00</p></td><td><p>
AB$(2,1)
</p></td></tr>
<tr><td><p>00 00 00 00</p></td><td><p>
AB$(3,1)
</p></td></tr>

</table>

<tr><td></td><td></td><td></td><td></td></tr>

</table>
<!-- Linie --><div class="hline" style="width: 100%; margin:auto;  border-top:2px solid #000; padding: 0; margin-top: 3px; margin-bottom: 3px"></div>
<table>
<colgroup><col><col><col><col></colgroup>

<tr><th colspan=3><p>The workings of <span class="uppercase">Nascom</span> ROM BASIC Ver 4.7</p></th><th><p>PAGE 9</p></th></tr>

<tr><td colspan=4><p>
******** Usage of the stack for GOSUB/&#x200b;RETURN and FOR/&#x200b;NEXT ********
</p></td></tr>

<tr><td colspan=4><h4>
<u>GOSUB and RETURN usage of the stack</u>
</h4></td></tr>

<tr><td colspan=4><p>
When a GOSUB is executed the address of where to RETURN to and the number of
the line to RETURN to are PUSHed on the stack as follows:&ndash;
</p></td></tr>

<tr><td colspan=4>
<table class="list3">
<colgroup><col><col><col></colgroup>

<tr><td><p>HIGH MEMORY:</p></td><td><p>XX XX</p></td><td><p>Address of where to RETURN to</p></td></tr>
<tr><td><p></p></td><td><p>XX XX</p></td><td><p>Number of line to RETURN to</p></td></tr>
<tr><td><p>STACK POINTER:</p></td><td><p>8C</p></td><td><p>GOSUB token as marker</p></td></tr>

</table>

<tr><td colspan=4><p>
This GOSUB block remains on the stack until a RETURN is executed at which point
BASIC looks back through the stack until it finds a GOSUB block and then sets
the stack there and then POPs the line number and the address of the statement
after the GOSUB and continues execution.
</p></td></tr>

<tr><td colspan=4><p>
The fact that the stack is set to this GOSUB block kills all active FOR loops
which were set up inside the subroutine.
</p></td></tr>

<tr><td colspan=4><p>
</p></td></tr>

<tr><td colspan=4><h4>
<u>FOR and NEXT usage of the stack</u>
</h4></td></tr>

<tr><td colspan=4><p>
When a FOR is executed the address of the first statement in the loop,
the line number of the loop statement, the TO value, the STEP value and
the sign of the STEP are all PUSHed onto the stack as follows:&ndash;
</p></td></tr>

<tr><td colspan=4>
<table class="list3">
<colgroup><col><col><col></colgroup>

<tr><td><p>HIGH MEMORY:</p></td><td><p>XX XX</p></td><td><p>Address of first statement in loop</p></td></tr>
<tr><td></td><td><p>XX XX</p></td><td><p>Line number of loop statement</p></td></tr>
<tr><td></td><td><p>XX XX XX XX</p></td><td><p>TO value in floating point</p></td></tr>
<tr><td></td><td><p>XX XX XX XX</p></td><td><p>STEP value in floating point</p></td></tr>
<tr><td></td><td><p>XX</p></td><td><p>Sign of STEP</p></td></tr>
<tr><td></td><td><p>XX XX</p></td><td><p>Address of index variable</p></td></tr>
<tr><td><p>STACK POINTER:</p></td><td><p>81</p></td><td><p>FOR token as marker</p></td></tr>

</table>

<tr><td colspan=4><p>
This FOR block remains on the stack until a matching NEXT is executed. When
next is executed BASIC looks back through the stack to find the matching FOR
block. If it is found then the STEP value is added to the value of the index
variable and the result is compared with the TO value. With the use of the TO
value and the sign of the step BASIC knows if the loop has been completed or
not. If it has not been completed then the FOR block remains on the stack until
the loop has been completed. The stack is set to point to this FOR block and
effectively kills all FORs nested within this loop. When the loop is completed
the FOR block is removed from the stack and execution continues from after the
NEXT instruction.
</p></td></tr>

<tr class="nopad"><td colspan=4><p>
If the FOR block cannot be found then a &ldquo;?NF Error&rdquo; occurs.
</p></td></tr>

<tr><td></td><td></td><td></td><td></td></tr>
</table>

<!-- 1 column: end --></div>
</div>
</div>
</div>
<p>
	NASCOM ROM BASIC dis-assembled is available in <a href="../../../files/8kbasic.asm">ASM</a>
	and <a href="../../../files/8kbasic.lst">LST</a> file format.
</p>
<!-- /The page -->
<!-- Navigation bottom -->
<table class="robots-nocontent style-table-zeropadding" style="width: 100%">
	<tr>
		<td class="navi-button">
			<a style="display: block" href="../../30/text/" title="Previous page"><span class="mirror-horizontal fas fa-play" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../01/text/" title="First page"><span class="fas fa-fast-backward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../../22/01/text/" title="Previous issue"><span class="fas fa-backward" aria-hidden=true></span></a>
		</td>
		<th class="navi-button">
			<a style="display: block" href="../../text/" title="Table of Contents">Page 31 of 59</a>
		</th>
		<td class="navi-button">
			<a style="display: block" href="../../../24/01/text/" title="Next issue"><span class="fas fa-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../59/text/" title="Last page"><span class="fas fa-fast-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../32/text/" title="Next page"><span class="fas fa-play" aria-hidden=true></span></a>
		</td>
	</tr>
</table>

<!-- navi-footer.php / $Date: 2023-03-11 15:22:20 +0100 (Sa, 11. Mrz 2023) $ -->

<!--********************************************************************************-->

	</div>

	<nav class="nav flex-column flex-md-row style-navbar-bottom robots-nocontent"> <!--nav-pills-->
		<a class="sm-fill nav-link" href="#top"><span title="Nach oben" class="fa fa-chevron-up" aria-hidden=true></span></a>
		<a class="sm-fill nav-link" href="../">Graphic</a>
		<a class="sm-fill nav-link" href="https://80bus.co.uk.mirror.jloh.de/publications/magazines/80bus_news_23.pdf#page=31" target="_blank">PDF</a>
		<a class="sm-fill nav-link" href="../../../../../../datenschutzerklaerung/">Privacy Statement</a>
		<a class="sm-fill nav-link" href="../../../../../../impressum/">Imprint</a>
	</nav>

	<!--bootstrap-->
	<script src="../../../../../../cdn/bootstrap/js/bootstrap.bundle.min.js"></script>
</body>

<!-- /navi-footer.php -->
</html>

<!-- /page.php -->