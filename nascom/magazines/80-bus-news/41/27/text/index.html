<!doctype html>
<html lang="de">

<!-- navi-head.php / $Date: 2025-01-05 17:13:18 +0100 (So, 05. Jan 2025) $ -->
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta charset="utf-8">

	<link rel="shortcut icon" type="image/x-icon" href="../../../../../../nascom/nascom.ico">
	<link rel="icon" type="image/png" href="../../../../../../nascom/apple-touch-icon.png" sizes="32x32">
	<link rel="icon" type="image/png" href="../../../../../../nascom/apple-touch-icon.png" sizes="96x96">
	<link rel="apple-touch-icon" sizes="180x180" href="../../../../../../nascom/apple-touch-icon.png">

	<!--bootstrap-->
	<link rel="stylesheet" href="../../../../../../cdn/bootstrap/css/bootstrap.min.css">

	<!--font awesome-->
	<link rel="stylesheet" href="../../../../../../cdn/fontawesome/css/fontawesome.min.css">
	<link rel="stylesheet" href="../../../../../../cdn/fontawesome/css/solid.min.css">

	<link rel="stylesheet" type="text/css" href="../../../../../../style.css">
	<link rel="canonical" href="https://tupel.jloh.de/nascom/magazines/80-bus-news/41/27/text/">
<!-- /navi-head.php -->

	<!-- page.php / $Date: 2024-07-13 18:55:41 +0200 (Sa, 13. Jul 2024) $ -->

	<title>80-Bus News - Spring 1985 - Volume 4 - Issue 1</title>
	<!-- Sun, 05 Jan 2025 16:13:18 GMT -->
	<meta name="keywords" content="80-Bus News, Nascom Computer, Nascom 1, Nascom 2">
	<link rel="stylesheet" type="text/css" href="../../../style.css">
<!-- navi-body.php -->
</head>

<body>
	<nav class="navbar navbar-expand-md navbar-light bg-light style-navbar-top" id="top">
	<div class="container-fluid">
		<a class="navbar-brand" href="https://jloh.de/">
			<img src="../../../../../../favicon.ico" width="32" height="32" alt="JL" title="Homepage von JÃ¼rgen Loh">
		</a>
		<button
			class="navbar-toggler"
			type="button"
			data-bs-toggle="collapse"
			data-bs-target="#navbarSupportedContent"
			aria-controls="navbarSupportedContent"
			aria-expanded="false"
			aria-label="Toggle navigation"
		>
			<span class="navbar-toggler-icon"></span>
		</button>
		<div class="collapse navbar-collapse robots-nocontent" id="navbarSupportedContent">
			<ul class="navbar-nav md-auto">
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../z80-kit/">Z80-KIT</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../nascom/1/">Nascom 1</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../nascom/">Nascom Journal</a>
				</li>
				<li class="nav-item">
					<a class="nav-link active" href="../../../../../../nascom/magazines/issues/">Nascom Magazines</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../pico/">PICO</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../cpm-plus/">CP/M</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../">Tupel BBS</a>
				</li>
			</ul>
		</div>
	</div>
	</nav>

	<div class="container" style="max-width: 750px; color: #000; padding: 0 15px 0; background-color: #FFF">

<!--********************************************************************************-->

<!-- /navi-body.php / $Date: 2024-12-30 14:10:13 +0100 (Mo, 30. Dez 2024) $ -->
<table class="style-table-zeropadding" style="width: 100%">
<tr>
<td>
<h1 class="h1Navi">80-Bus News</h1>
</td>
<td>&nbsp;&nbsp;</td>
<td style="vertical-align:top">
<h2 class="h2Navi">Spring 1985 &middot; <span class="nowrap">Volume 4 &middot;</span> <span class="nowrap">Issue 1</span></h2>
</td>
</tr>
</table>
<!-- Navigation top -->
<table class="robots-nocontent style-table-zeropadding" style="width: 100%">
	<tr>
		<td class="navi-button">
			<a style="display: block" href="../../26/text/" title="Previous page"><span class="mirror-horizontal fas fa-play" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../01/text/" title="First page"><span class="mirror-horizontal fas fa-fast-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../../36/01/text/" title="Previous issue"><span class="mirror-horizontal fas fa-forward" aria-hidden=true></span></a>
		</td>
		<th class="navi-button">
			<a style="display: block" href="../../text/" title="Table of Contents">Page 27 of 31</a>
		</th>
		<td class="navi-button">
			<a style="display: block" href="../../../42/01/text/" title="Next issue"><span class="fas fa-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../31/text/" title="Last page"><span class="fas fa-fast-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../28/text/" title="Next page"><span class="fas fa-play" aria-hidden=true></span></a>
		</td>
	</tr>
</table>
<!-- The page -->
<div class="row" lang="en">
<div class="col-sm-12 mag-80-bus-news issue-41 page-27" style="border: 1px solid #000; padding-top: 1em; padding-bottom: 1em;" lang="en" id="page">
<!-- 2(2) columns: start --><div><div class="style-multi-column-2 hyphenate 2">
<h2 id="article1">
Things your Mother never told you about M80 and L80
</h2>
<h3>
by D.W.Parkinson
</h3>
<p>
Having looked at some of the comments on
returned 80-BUS questionnaires, this article will
please some readers, but irritate others. I trust that
those that don&rsquo;t use CP/M-80 and Microsoft&rsquo;s M80
and L80 package will bear with me &ndash; after all this
article may prompt you to go back and read about
the more obscure features of your assembler/&#x200b;high
level language. The article assumes that the reader
has a reasonable working knowledge of M80 and L80.
</p>
<h4>
Microsoft&rsquo;s M80
</h4>
<p>
First I&rsquo;ll start with Microsoft&rsquo;s M80 macro assembler.
(CAVEAT &ndash; The features exploited in these
examples are present in release 3.44 of the
assembler (09 Dec 1981) and do not necessarily
apply to earlier releases.)
</p>
<p>
M80 includes a pseudo-op &mdash; &lsquo;.printx&rsquo; &mdash; that prints
a message on the system console whenever it is
encountered during an assembly. If you ever
assemble large files, then this can be used to keep
you informed of the progress of the assembly and
is a useful indicator that things are progressing as
they should. The syntax of the command is:
</p>
<pre>
.printx &lt;marker&gt;&lt;text&gt;&lt;marker&gt;
e.g. .printx &starf; I/O section reached &starf;</pre>
<p>
i.e. Following the &lsquo;.printx&rsquo; command M80 takes the
first non-space (or non-tab) character that it finds,
and then sends that character and the following
text to the console. It stops when it sees the same
marker character again. I tend to use the &lsquo;&starf;&rsquo;
character as my marker.
</p>
<p>
As well as indicating when certain &lsquo;landmarks&rsquo; are
reached, it can be used to confirm that the
assembler is actually doing what you think it is
doing, and also that your assembled program
matches any particular system requirements. The
former obviously covers the case where an
assembler program utilizes the conditional assembly
feature of M80, and confirms that you have
your conditional flags set correctly. (If you have
several slightly different versions of a program to
match differing environments, then it is easier to
maintain one copy of the program than several.) In
the latter case, you may require a certain point of
your program to fall at a particular address. This
can be done with an &lsquo;ORG&rsquo; statement, but you may
inadvertently add some extra code to the start of
the program some months later, forgetting that this
will cause one bit of code to overlay another later
on in the program!<br>
e.g.
</p>
<pre>
ifdef <span class="uppercase">Nascom</span> ; If we have defined <span class="uppercase">Nascom</span> version
.printx &starf; <span class="uppercase">Nascom</span> version &starf;
else
.printx &starf; <span class="uppercase">Gemini</span> version &starf;
endif
</pre>
<p>
&amp;
</p>
<pre>
....      ; End of section of code
ret
if $.GE.66h ; Check it ends before start of NMI routine
.printx &starf; ++++ error NMI routine clobbered +++++ &starf;
endif
org 66h
; Start of NMI routine
.....
</pre>
<p>
Occasionally you may want to know the size of a
program &mdash; perhaps it has to fit within an EPROM.
In the past I used to enter a single line at the end of
the program consisting of the one word &lsquo;error&rsquo;. The
assembler always threw this out as an error, and
from the error message I could see the address that
the program had reached. With version 3.44 of M80
a much better way of achieving this effect appeared.
It makes use of the macro feature of M80
together with parameter substitution.
</p>
<p>
Suppose you are assembling a program and want
to know several things:
</p>
<p class="indent2">
(i) &nbsp; The length of the code segment of
the program.<br>
(ii) &nbsp;  the length of the data segment of
the program.<br>
(iii) &nbsp; the length of a particular routine
within the program. (Perhaps in some
circumstances it might have to be
overlayed by an alternative routine.)
</p>
<p>
There are two steps you have to take to achieve
this:
</p>
<p class="indent">
Step 1 is to ensure that you have labels within
the program to which the assembler
will assign the appropriate values. (e.g.
&lsquo;lcode equ $-start&rsquo; at the end of the code
segment.)<br>
Step 2 is to create a macro to print out what
you want to see:<br>
e.g.
</p>
<pre>
show   macro   a,b,c
.printx &starf; Program code length is a bytes &starf;
.printx &starf; Program data length is b bytes &starf;
.printx &starf; Access subroutine length is c bytes &starf;
endm
</pre>
<p>
If you use the macro in the normal way (show
lcode,&#x200b;ldata,&#x200b;alength) the result would be the
useless messages
</p>
<pre>
&starf; program code length is lcode bytes &starf;
</pre>
<p>
&hellip; and so on, with just the direct substitution of
</p>
<!-- 2 columns: end --></div></div>

</div>
</div>
<!-- /The page -->
<!-- Navigation bottom -->
<table class="robots-nocontent style-table-zeropadding" style="width: 100%">
	<tr>
		<td class="navi-button">
			<a style="display: block" href="../../26/text/" title="Previous page"><span class="mirror-horizontal fas fa-play" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../01/text/" title="First page"><span class="mirror-horizontal fas fa-fast-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../../36/01/text/" title="Previous issue"><span class="mirror-horizontal fas fa-forward" aria-hidden=true></span></a>
		</td>
		<th class="navi-button">
			<a style="display: block" href="../../text/" title="Table of Contents">Page 27 of 31</a>
		</th>
		<td class="navi-button">
			<a style="display: block" href="../../../42/01/text/" title="Next issue"><span class="fas fa-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../31/text/" title="Last page"><span class="fas fa-fast-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../28/text/" title="Next page"><span class="fas fa-play" aria-hidden=true></span></a>
		</td>
	</tr>
</table>

<!-- navi-footer.php / $Date: 2023-03-11 15:22:20 +0100 (Sa, 11. Mrz 2023) $ -->

<!--********************************************************************************-->

	</div>

	<nav class="nav flex-column flex-md-row style-navbar-bottom robots-nocontent"> <!--nav-pills-->
		<a class="sm-fill nav-link" href="#top"><span title="Nach oben" class="fa fa-chevron-up" aria-hidden=true></span></a>
		<a class="sm-fill nav-link" href="../">Graphic</a>
		<a class="sm-fill nav-link" href="https://80bus.co.uk.mirror.jloh.de/publications/magazines/80bus_news_41.pdf#page=27" target="_blank">PDF</a>
		<a class="sm-fill nav-link" href="../../../../../../datenschutzerklaerung/">Privacy Statement</a>
		<a class="sm-fill nav-link" href="../../../../../../impressum/">Imprint</a>
	</nav>

	<!--bootstrap-->
	<script src="../../../../../../cdn/bootstrap/js/bootstrap.bundle.min.js"></script>
</body>

<!-- /navi-footer.php -->
</html>

<!-- /page.php -->