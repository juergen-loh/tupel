<!doctype html>
<html lang="de">

<!-- navi-head.php / $Date: 2025-01-05 17:13:18 +0100 (So, 05. Jan 2025) $ -->
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta charset="utf-8">

	<link rel="shortcut icon" type="image/x-icon" href="../../../../../../nascom/nascom.ico">
	<link rel="icon" type="image/png" href="../../../../../../nascom/apple-touch-icon.png" sizes="32x32">
	<link rel="icon" type="image/png" href="../../../../../../nascom/apple-touch-icon.png" sizes="96x96">
	<link rel="apple-touch-icon" sizes="180x180" href="../../../../../../nascom/apple-touch-icon.png">

	<!--bootstrap-->
	<link rel="stylesheet" href="../../../../../../cdn/bootstrap/css/bootstrap.min.css">

	<!--font awesome-->
	<link rel="stylesheet" href="../../../../../../cdn/fontawesome/css/fontawesome.min.css">
	<link rel="stylesheet" href="../../../../../../cdn/fontawesome/css/solid.min.css">

	<link rel="stylesheet" type="text/css" href="../../../../../../style.css">
	<link rel="canonical" href="https://tupel.jloh.de/nascom/magazines/micropower/14/30/text/">
<!-- /navi-head.php -->

	<!-- page.php / $Date: 2024-07-13 18:55:41 +0200 (Sa, 13. Jul 2024) $ -->

	<title>Micropower - Volume 1 - Number 4 - December 1981</title>
	<!-- Sun, 16 Mar 2025 14:14:42 GMT -->
	<meta name="keywords" content="Micro&shy;power, Nascom Computer, Nascom 1, Nascom 2">
	<link rel="stylesheet" type="text/css" href="../../../style.css">
<!-- navi-body.php -->
</head>

<body>
	<nav class="navbar navbar-expand-md navbar-light bg-light style-navbar-top" id="top">
	<div class="container-fluid">
		<a class="navbar-brand" href="https://jloh.de/">
			<img src="../../../../../../favicon.ico" width="32" height="32" alt="JL" title="Homepage von JÃ¼rgen Loh">
		</a>
		<button
			class="navbar-toggler"
			type="button"
			data-bs-toggle="collapse"
			data-bs-target="#navbarSupportedContent"
			aria-controls="navbarSupportedContent"
			aria-expanded="false"
			aria-label="Toggle navigation"
		>
			<span class="navbar-toggler-icon"></span>
		</button>
		<div class="collapse navbar-collapse robots-nocontent" id="navbarSupportedContent">
			<ul class="navbar-nav md-auto">
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../z80-kit/">Z80-KIT</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../nascom/1/">Nascom 1</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../nascom/">Nascom Journal</a>
				</li>
				<li class="nav-item">
					<a class="nav-link active" href="../../../../../../nascom/magazines/issues/">Nascom Magazines</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../pico/">PICO</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../cpm-plus/">CP/M</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../">Tupel BBS</a>
				</li>
			</ul>
		</div>
	</div>
	</nav>

	<div class="container" style="max-width: 750px; color: #000; padding: 0 15px 0; background-color: #FFF">

<!--********************************************************************************-->

<!-- /navi-body.php / $Date: 2025-03-16 15:14:42 +0100 (So, 16. Mrz 2025) $ -->
<table class="style-table-zeropadding" style="width: 100%">
<tr>
<td>
<h1 class="h1Navi">Micro&shy;power</h1>
</td>
<td>&nbsp;&nbsp;</td>
<td style="vertical-align:top">
<h2 class="h2Navi"><span class="nowrap">Volume 1 &middot;</span> <span class="nowrap">Number 4 &middot;</span> <span class="nowrap">December 1981</span></h2>
</td>
</tr>
</table>
<!-- Navigation top -->
<table class="robots-nocontent style-table-zeropadding" style="width: 100%">
	<tr>
		<td class="navi-button">
			<a style="display: block" href="../../29/text/" title="Previous page"><span class="mirror-horizontal fas fa-play" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../-1/text/" title="First page"><span class="mirror-horizontal fas fa-fast-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../../13/-1/text/" title="Previous issue"><span class="mirror-horizontal fas fa-forward" aria-hidden=true></span></a>
		</td>
		<th class="navi-button">
			<a style="display: block" href="../../text/" title="Table of Contents">Page 30 of 33</a>
		</th>
		<td class="navi-button">
			<a style="display: block" href="../../../21/-1/text/" title="Next issue"><span class="fas fa-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../33/text/" title="Last page"><span class="fas fa-fast-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../31/text/" title="Next page"><span class="fas fa-play" aria-hidden=true></span></a>
		</td>
	</tr>
</table>
<!-- The page -->
<div class="row" lang="en">
<div class="col-sm-12 mag-micropower issue-14 page-30" style="border: 1px solid #000; padding-top: 1em; padding-bottom: 1em;" lang="en" id="page">
<!-- 1 column: start --><div>
<h3>
WRITE W xxxx yyyy
</h3>
<p>
The write routine first switches on the cassette LED; it then waits for
approximately one second, which allows the cassette recorder speed to stabilise if
you are using the LED signal to control your recorder. The output table pointer is then
reset to its normal value, so that output is sent only to screen. This ensures that a
user routine will not interfere with the operation of the write routine. The address
stored at &pound;0C73 is saved on the stack, and restored at the end of the write routine.
</p>
<p>
After 256 nulls have been output to the serial port the data is output in blocks of
256 bytes, preceded by a null and four &lsquo;FF&rsquo;s, a header which gives the start address
of the block, the length and number of the block, and a checksum for the header
data. The start address and the length and number of the block are printed on the
screen, but all other bytes are output only to the serial port; output through this port is
by direct call to the serial routine, and does not use the output table and its pointer.
The block of data is then output, followed by ten nulls. The purpose of all these nulls
is to ensure that if several bytes of data are missed when the tape is read, the start of
the next block header, marked by four &lsquo;FF&rsquo;s, will not be missed. If there were no nulls
the READ routine would continue until it detected the correct number of bytes,
accepting one or more of the &lsquo;FF&rsquo;s, and it would then miss the following block and
only start reading again when the next block start was detected.
</p>
<p>
When all the data has been written the routine jumps to the end of the READ
routine, using the same code to reset the output pointer. If you wish to make several
copies of the same data, which is always advisable, you do not need to re-enter the
arguments &ndash; just enter W and the previous arguments, which are still at 0C0C and
0C0E, will be used again. If you are too lazy to do even this, a simple modification to
the WRITE routine will make it unnecessary. Instead of jumping to the end of READ,
first execute the following code:&ndash;
</p>
<div class="table-responsive">
<table class="indent2" style="width: 80%">
<tr><td>21 10 0C</td><td>LD HL, &pound;0C10</td><td>; Point HL to ARG3     </td></tr>
<tr><td>35      </td><td>DEC (HL)          </td><td>; Decrement ARG3       </td></tr>
<tr><td>C2 XX XX</td><td>JP NZ, REWRT      </td><td>; Continue if non-zero </td></tr>
<tr><td>C3 YY YY</td><td>JP RDEND          </td><td>; Jump to end of READ  </td></tr>
</table>
</div>
<p>
For Nas-Sys&nbsp;1 the address XXXX is &pound;04EF; for Nas-Sys&nbsp;3 it is &pound;502. Address
YYYY is the end of the READ routine, where the table pointer is reset. If you use the
modified READ routine given in the
<a href="../../../13/26/text/#article1">last article</a>,
you will find that there is room for
extra WRITE code at the end, and the final jump can be a relative one. Incidentally,
there is a misprint in the
<a href="../../../13/30/text/#article1">listing on page&nbsp;30 of the last issue</a>;
from line 32 it should
read:&ndash;
</p>
<div class="table-responsive">
<table class="indent2" style="width: 80%">
<tr><td>CF  </td><td>R2</td><td>RST RIN  </td><td>; GET CHARACTER         </td></tr>
<tr><td>3C  </td><td>  </td><td>INC A    </td><td>; IS IT FF?             </td></tr>
<tr><td>20FA</td><td>  </td><td>JR NZ, R1</td><td>; IF NOT, KEEP LOOKING  </td></tr>
</table>
</div>
<h4 class="article-stopper">
&ndash; &nbsp; &nbsp; &nbsp;
&ndash; &nbsp; &nbsp; &nbsp;
&ndash; &nbsp; &nbsp; &nbsp;
&ndash; &nbsp; &nbsp; &nbsp;
&ndash; &nbsp; &nbsp; &nbsp;
&ndash; &nbsp; &nbsp; &nbsp;
&ndash; &nbsp; &nbsp; &nbsp;
&ndash; &nbsp; &nbsp; &nbsp;
&ndash; &nbsp; &nbsp; &nbsp;
&ndash; &nbsp; &nbsp; &nbsp;
&ndash; &nbsp; &nbsp; &nbsp;
&ndash; &nbsp; &nbsp; &nbsp;
&ndash;
</h4>
<!-- 1 column: end --></div>

</div>
</div>
<!-- /The page -->
<!-- Navigation bottom -->
<table class="robots-nocontent style-table-zeropadding" style="width: 100%">
	<tr>
		<td class="navi-button">
			<a style="display: block" href="../../29/text/" title="Previous page"><span class="mirror-horizontal fas fa-play" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../-1/text/" title="First page"><span class="mirror-horizontal fas fa-fast-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../../13/-1/text/" title="Previous issue"><span class="mirror-horizontal fas fa-forward" aria-hidden=true></span></a>
		</td>
		<th class="navi-button">
			<a style="display: block" href="../../text/" title="Table of Contents">Page 30 of 33</a>
		</th>
		<td class="navi-button">
			<a style="display: block" href="../../../21/-1/text/" title="Next issue"><span class="fas fa-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../33/text/" title="Last page"><span class="fas fa-fast-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../31/text/" title="Next page"><span class="fas fa-play" aria-hidden=true></span></a>
		</td>
	</tr>
</table>

<!-- navi-footer.php / $Date: 2023-03-11 15:22:20 +0100 (Sa, 11. Mrz 2023) $ -->

<!--********************************************************************************-->

	</div>

	<nav class="nav flex-column flex-md-row style-navbar-bottom robots-nocontent"> <!--nav-pills-->
		<a class="sm-fill nav-link" href="#top"><span title="Nach oben" class="fa fa-chevron-up" aria-hidden=true></span></a>
		<a class="sm-fill nav-link" href="../">Graphic</a>
		<a class="sm-fill nav-link" href="https://80bus.co.uk.mirror.jloh.de/publications/magazines/Micropower-1-4.pdf#page=32" target="_blank">PDF</a>
		<a class="sm-fill nav-link" href="../../../../../../datenschutzerklaerung/">Privacy Statement</a>
		<a class="sm-fill nav-link" href="../../../../../../impressum/">Imprint</a>
	</nav>

	<!--bootstrap-->
	<script src="../../../../../../cdn/bootstrap/js/bootstrap.bundle.min.js"></script>
</body>

<!-- /navi-footer.php -->
</html>

<!-- /page.php -->