<!doctype html>
<html lang="de">

<!-- navi-head.php / $Date: 2025-01-05 17:13:18 +0100 (So, 05. Jan 2025) $ -->
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta charset="utf-8">

	<link rel="shortcut icon" type="image/x-icon" href="../../../../../../nascom/nascom.ico">
	<link rel="icon" type="image/png" href="../../../../../../nascom/apple-touch-icon.png" sizes="32x32">
	<link rel="icon" type="image/png" href="../../../../../../nascom/apple-touch-icon.png" sizes="96x96">
	<link rel="apple-touch-icon" sizes="180x180" href="../../../../../../nascom/apple-touch-icon.png">

	<!--bootstrap-->
	<link rel="stylesheet" href="../../../../../../cdn/bootstrap/css/bootstrap.min.css">

	<!--font awesome-->
	<link rel="stylesheet" href="../../../../../../cdn/fontawesome/css/fontawesome.min.css">
	<link rel="stylesheet" href="../../../../../../cdn/fontawesome/css/solid.min.css">

	<link rel="stylesheet" type="text/css" href="../../../../../../style.css">
	<link rel="canonical" href="https://tupel.jloh.de/nascom/magazines/micropower/12/29/text/">
<!-- /navi-head.php -->

	<!-- page.php / $Date: 2024-07-13 18:55:41 +0200 (Sa, 13. Jul 2024) $ -->

	<title>Micropower - Volume 1 - Number 2 - September 1981</title>
	<!-- Sun, 16 Mar 2025 14:14:42 GMT -->
	<meta name="keywords" content="Micro&shy;power, Nascom Computer, Nascom 1, Nascom 2">
	<link rel="stylesheet" type="text/css" href="../../../style.css">
<!-- navi-body.php -->
</head>

<body>
	<nav class="navbar navbar-expand-md navbar-light bg-light style-navbar-top" id="top">
	<div class="container-fluid">
		<a class="navbar-brand" href="https://jloh.de/">
			<img src="../../../../../../favicon.ico" width="32" height="32" alt="JL" title="Homepage von JÃ¼rgen Loh">
		</a>
		<button
			class="navbar-toggler"
			type="button"
			data-bs-toggle="collapse"
			data-bs-target="#navbarSupportedContent"
			aria-controls="navbarSupportedContent"
			aria-expanded="false"
			aria-label="Toggle navigation"
		>
			<span class="navbar-toggler-icon"></span>
		</button>
		<div class="collapse navbar-collapse robots-nocontent" id="navbarSupportedContent">
			<ul class="navbar-nav md-auto">
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../z80-kit/">Z80-KIT</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../nascom/1/">Nascom 1</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../nascom/">Nascom Journal</a>
				</li>
				<li class="nav-item">
					<a class="nav-link active" href="../../../../../../nascom/magazines/issues/">Nascom Magazines</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../pico/">PICO</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../cpm-plus/">CP/M</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../">Tupel BBS</a>
				</li>
			</ul>
		</div>
	</div>
	</nav>

	<div class="container" style="max-width: 750px; color: #000; padding: 0 15px 0; background-color: #FFF">

<!--********************************************************************************-->

<!-- /navi-body.php / $Date: 2025-03-16 15:14:42 +0100 (So, 16. Mrz 2025) $ -->
<table class="style-table-zeropadding" style="width: 100%">
<tr>
<td>
<h1 class="h1Navi">Micro&shy;power</h1>
</td>
<td>&nbsp;&nbsp;</td>
<td style="vertical-align:top">
<h2 class="h2Navi"><span class="nowrap">Volume 1 &middot;</span> <span class="nowrap">Number 2 &middot;</span> <span class="nowrap">September 1981</span></h2>
</td>
</tr>
</table>
<!-- Navigation top -->
<table class="robots-nocontent style-table-zeropadding" style="width: 100%">
	<tr>
		<td class="navi-button">
			<a style="display: block" href="../../28/text/" title="Previous page"><span class="mirror-horizontal fas fa-play" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../-1/text/" title="First page"><span class="mirror-horizontal fas fa-fast-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../../11/-1/text/" title="Previous issue"><span class="mirror-horizontal fas fa-forward" aria-hidden=true></span></a>
		</td>
		<th class="navi-button">
			<a style="display: block" href="../../text/" title="Table of Contents">Page 29 of 33</a>
		</th>
		<td class="navi-button">
			<a style="display: block" href="../../../13/-1/text/" title="Next issue"><span class="fas fa-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../33/text/" title="Last page"><span class="fas fa-fast-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../30/text/" title="Next page"><span class="fas fa-play" aria-hidden=true></span></a>
		</td>
	</tr>
</table>
<!-- The page -->
<div class="row" lang="en">
<div class="col-sm-12 mag-micropower issue-12 page-29" style="border: 1px solid #000; padding-top: 1em; padding-bottom: 1em;" lang="en" id="page">
<!-- 1 column: start --><div>
<p class="continued">
the NMI handling routine. Here bit 3 of port 0 is reset, and CONFLG is tested to see if
the program has arrived at this point from an E command (in which case CONFLG is
not zero), or from some other source, such as a single step command, a breakpoint,
or a hardware NMI. If it came an E command CONFLG is now set to zero, so that a
subsequent NMI is handled correctly, if a breakpoint has been entered Restart 32
(&pound;E7) is inserted, and the NMI handling routine jumps back to the executed program
with a RETN. At last the program you started with Exxxx is running. You will see what
happens if CONFLG is zero when we discuss the single step command.
</p>
<h3 id="article1">
F (Error)
</h3>
<p>
F is not a valid command letter in either Nas-Sys&nbsp;1 or Nas-Sys&nbsp;3, and an error
message is produced when it is entered. I use the command for a Find routine, which
searches from a specified address for a string of up to 9 bytes.
</p>
<table class="indent" style="width: 90%">
<tr><td>2B</td><td>FIND</td><td>DEC HL</td><td>HL holds start address</td></tr>
<tr><td class="nowrap">3A 0B 0C</td><td></td><td>LD A, (ARGN)</td><td>Get number of values</td></tr>
<tr><td>FE 02</td><td></td><td>CP 2</td><td>Must be at least 2</td></tr>
<tr><td>30 03</td><td></td><td>JR NC, VALID</td><td>If so, continue</td></tr>
<tr><td>DF 6B</td><td></td><td>SCAL ERRM</td><td>iF not, print Error</td></tr>
<tr><td>C9</td><td></td><td>RET</td><td>and end routine</td></tr>
<tr><td>3D</td><td>VALID</td><td>DEC A</td><td>Get string length</td></tr>
<tr><td>4F</td><td></td><td>LD C, A</td><td>Save string length in C</td></tr>
<tr><td>41</td><td>SRCHLP</td><td>LD B, C</td><td>Transfer to B</td></tr>
<tr><td>11 0E 0C</td><td></td><td>LD DE, &pound;0C0E</td><td>Point DE to first byte</td></tr>
<tr><td>1A</td><td></td><td>LD A, (DE)</td><td>Get first byte</td></tr>
<tr><td>23</td><td>SRCH1</td><td>INC HL</td><td>Look for first byte</td></tr>
<tr><td>BE</td><td></td><td>CP (HL)</td><td>Found it?</td></tr>
<tr><td>20 FC</td><td></td><td>JR NZ, SRCH1</td><td>If not, continue to look</td></tr>
<tr><td>05</td><td></td><td>DEC B</td><td>Only on byte to find</td></tr>
<tr><td>28 09</td><td></td><td>JR Z, CALLDS</td><td>If so, go to display</td></tr>
<tr><td>13</td><td>SRCH2</td><td>INC DE</td><td>If not, look for second</td></tr>
<tr><td>13</td><td></td><td>INC DE</td><td>Get next in string</td></tr>
<tr><td>1A</td><td></td><td>LD A, (DE)</td><td>Go to next memory byte</td></tr>
<tr><td>23</td><td></td><td>INC HL</td><td>Are they the same?</td></tr>
<tr><td>BE</td><td></td><td>CP (HL)</td><td>If not, start again</td></tr>
<tr><td>20 ED</td><td></td><td>JR NZ, SRCHLP</td><td>Look for rest of string</td></tr>
<tr><td>10 F7</td><td></td><td>DJNZ SRCH2</td><td>All found, so tabulate</td></tr>
<tr><td>D7 08</td><td></td><td>RCAL TAB</td><td>Wait for keypress</td></tr>
<tr><td>CF</td><td></td><td>RST 8</td><td>Is it an escape?</td></tr>
<tr><td>FE 1B</td><td></td><td>CP "ESCAPE"</td><td>Look for next string</td></tr>
<tr><td>20 E4</td><td></td><td>JR NZ, SRCHLP</td><td>Output, CR</td></tr>
<tr><td>DF 6A</td><td></td><td>SCAL CRLF</td><td>End routine</td></tr>
<tr><td>C9</td><td></td><td>RET</td><td></td></tr>
</table>
<p>
* * TAB routine starts here * *
</p>
<p>
The TAB routine used by the above program is the same as the one in the
comparison routine, and the code for this should be entered at the position marked
above. Of course, if you use both the compare and the Find routine,
</p>
<!-- 1 column: end --></div>

</div>
</div>
<!-- /The page -->
<!-- Navigation bottom -->
<table class="robots-nocontent style-table-zeropadding" style="width: 100%">
	<tr>
		<td class="navi-button">
			<a style="display: block" href="../../28/text/" title="Previous page"><span class="mirror-horizontal fas fa-play" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../-1/text/" title="First page"><span class="mirror-horizontal fas fa-fast-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../../11/-1/text/" title="Previous issue"><span class="mirror-horizontal fas fa-forward" aria-hidden=true></span></a>
		</td>
		<th class="navi-button">
			<a style="display: block" href="../../text/" title="Table of Contents">Page 29 of 33</a>
		</th>
		<td class="navi-button">
			<a style="display: block" href="../../../13/-1/text/" title="Next issue"><span class="fas fa-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../33/text/" title="Last page"><span class="fas fa-fast-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../30/text/" title="Next page"><span class="fas fa-play" aria-hidden=true></span></a>
		</td>
	</tr>
</table>

<!-- navi-footer.php / $Date: 2023-03-11 15:22:20 +0100 (Sa, 11. Mrz 2023) $ -->

<!--********************************************************************************-->

	</div>

	<nav class="nav flex-column flex-md-row style-navbar-bottom robots-nocontent"> <!--nav-pills-->
		<a class="sm-fill nav-link" href="#top"><span title="Nach oben" class="fa fa-chevron-up" aria-hidden=true></span></a>
		<a class="sm-fill nav-link" href="../">Graphic</a>
		<a class="sm-fill nav-link" href="https://80bus.co.uk.mirror.jloh.de/publications/magazines/Micropower-1-2.pdf#page=31" target="_blank">PDF</a>
		<a class="sm-fill nav-link" href="../../../../../../datenschutzerklaerung/">Privacy Statement</a>
		<a class="sm-fill nav-link" href="../../../../../../impressum/">Imprint</a>
	</nav>

	<!--bootstrap-->
	<script src="../../../../../../cdn/bootstrap/js/bootstrap.bundle.min.js"></script>
</body>

<!-- /navi-footer.php -->
</html>

<!-- /page.php -->