<!doctype html>
<html lang="de">

<!-- navi-head.php / $Date: 2025-01-05 17:13:18 +0100 (So, 05. Jan 2025) $ -->
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta charset="utf-8">

	<link rel="shortcut icon" type="image/x-icon" href="../../../../../../nascom/nascom.ico">
	<link rel="icon" type="image/png" href="../../../../../../nascom/apple-touch-icon.png" sizes="32x32">
	<link rel="icon" type="image/png" href="../../../../../../nascom/apple-touch-icon.png" sizes="96x96">
	<link rel="apple-touch-icon" sizes="180x180" href="../../../../../../nascom/apple-touch-icon.png">

	<!--bootstrap-->
	<link rel="stylesheet" href="../../../../../../cdn/bootstrap/css/bootstrap.min.css">

	<!--font awesome-->
	<link rel="stylesheet" href="../../../../../../cdn/fontawesome/css/fontawesome.min.css">
	<link rel="stylesheet" href="../../../../../../cdn/fontawesome/css/solid.min.css">

	<link rel="stylesheet" type="text/css" href="../../../../../../style.css">
	<link rel="canonical" href="https://tupel.jloh.de/nascom/magazines/micropower/11/29/text/">
<!-- /navi-head.php -->

	<!-- page.php / $Date: 2024-07-13 18:55:41 +0200 (Sa, 13. Jul 2024) $ -->

	<title>Micropower - Volume 1 - Number 1 - August 1981</title>
	<!-- Sun, 05 Jan 2025 16:13:18 GMT -->
	<meta name="keywords" content="Micro&shy;power, Nascom Computer, Nascom 1, Nascom 2">
	<link rel="stylesheet" type="text/css" href="../../../style.css">
<!-- navi-body.php -->
</head>

<body>
	<nav class="navbar navbar-expand-md navbar-light bg-light style-navbar-top" id="top">
	<div class="container-fluid">
		<a class="navbar-brand" href="https://jloh.de/">
			<img src="../../../../../../favicon.ico" width="32" height="32" alt="JL" title="Homepage von JÃ¼rgen Loh">
		</a>
		<button
			class="navbar-toggler"
			type="button"
			data-bs-toggle="collapse"
			data-bs-target="#navbarSupportedContent"
			aria-controls="navbarSupportedContent"
			aria-expanded="false"
			aria-label="Toggle navigation"
		>
			<span class="navbar-toggler-icon"></span>
		</button>
		<div class="collapse navbar-collapse robots-nocontent" id="navbarSupportedContent">
			<ul class="navbar-nav md-auto">
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../z80-kit/">Z80-KIT</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../nascom/1/">Nascom 1</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../nascom/">Nascom Journal</a>
				</li>
				<li class="nav-item">
					<a class="nav-link active" href="../../../../../../nascom/magazines/issues/">Nascom Magazines</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../pico/">PICO</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../cpm-plus/">CP/M</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../../../../../../">Tupel BBS</a>
				</li>
			</ul>
		</div>
	</div>
	</nav>

	<div class="container" style="max-width: 750px; color: #000; padding: 0 15px 0; background-color: #FFF">

<!--********************************************************************************-->

<!-- /navi-body.php / $Date: 2024-12-30 14:10:13 +0100 (Mo, 30. Dez 2024) $ -->
<table class="style-table-zeropadding" style="width: 100%">
<tr>
<td>
<h1 class="h1Navi">Micro&shy;power</h1>
</td>
<td>&nbsp;&nbsp;</td>
<td style="vertical-align:top">
<h2 class="h2Navi"><span class="nowrap">Volume 1 &middot;</span> <span class="nowrap">Number 1 &middot;</span> <span class="nowrap">August 1981</span></h2>
</td>
</tr>
</table>
<!-- Navigation top -->
<table class="robots-nocontent style-table-zeropadding" style="width: 100%">
	<tr>
		<td class="navi-button">
			<a style="display: block" href="../../28/text/" title="Previous page"><span class="mirror-horizontal fas fa-play" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../-1/text/" title="First page"><span class="mirror-horizontal fas fa-fast-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			
		</td>
		<th class="navi-button">
			<a style="display: block" href="../../text/" title="Table of Contents">Page 29 of 33</a>
		</th>
		<td class="navi-button">
			<a style="display: block" href="../../../12/-1/text/" title="Next issue"><span class="fas fa-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../33/text/" title="Last page"><span class="fas fa-fast-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../30/text/" title="Next page"><span class="fas fa-play" aria-hidden=true></span></a>
		</td>
	</tr>
</table>
<!-- The page -->
<div class="row" lang="en">
<div class="col-sm-12 mag-micropower issue-11 page-29" style="border: 1px solid #000; padding-top: 1em; padding-bottom: 1em;" lang="en" id="page">
<!-- 1 column: start --><div>
<p class="noindent">
The Nas-Sys&nbsp;3 table contains a repeat keyboard routine, which is not available under
Nas-Sys&nbsp;1.
</p>
<p>
The next two restarts (relative call, &pound;D7, and subroutine call, &pound;DF) both use the
byte following the restart code to determine the address of the routine they are
accessing. In a relative call the second byte is used as an offset to the routine being
accessed, and as in the case of a relative jump instruction the distance is measured
from the code following the second byte. If the offset lies in the range &pound;80 &ndash; &pound;FF the
subroutine will precede the instruction calling it.
</p>
<table>
<tr><td style="padding-right: 3em">.</td><td></td><td></td></tr>
<tr><td>FB</td><td></td><td style="text-align: center; padding-right: 33%">&uarr;</td></tr>
<tr><td>FC</td><td></td><td style="text-align: center; padding-right: 33%">|</td></tr>
<tr><td>FD</td><td></td><td>Negative offsets</td></tr>
<tr><td>D7 XX</td><td>&lt;</td><td>Position of relative call</td></tr>
<tr><td>00</td><td>&lt;</td><td>Distances measured from here</td></tr>
<tr><td>01</td><td></td><td>Positive offsets</td></tr>
<tr><td>02</td><td></td><td style="text-align: center; padding-right: 33%">|</td></tr>
<tr><td>03</td><td></td><td style="text-align: center; padding-right: 33%">&darr;</td></tr>
<tr><td>.</td><td></td><td></td></tr>
</table>
<p>
By using the relative call routine you can write programs that are completely
relocatable &ndash; that is, they will work at any address without modification. This is
particularly useful for programs that are to be stored in EPROM, as you can plug
the device in any spare socket. Of course, you don&rsquo;t get this for nothing; the routine
has quite a lot of software manipulation to carry out, and consequently it is much
slower than a normal subroutine call. So, if you want a program to run as quickly
as possible you will have to avoid relative calls in the critical parts of the code.
</p>
<p>
The subroutine call, &pound;DF, uses the second byte to access a table which contains
the addresses of monitor subroutines. In Nas-sys&nbsp;3 this table starts at &pound;0782; the
first 26 addresses are the routines for the single letter commands. Only F and L are
unused, and the table contains the address of the error-message routine for these
letters. If you have an EPROM blower you can add extra commands by using these
letters, or by replacing any of the standard commands that you don&rsquo;t use. As an
example, here is a routine which compares two blocks of memory and list four lines
of each block whenever it finds a difference.
</p>
<div class="table-responsive">
<table style="width: 100%">
<tr><td>1B</td><td></td><td>DEC DE</td><td>; On entry DE and HL point</td></tr>
<tr><td>2B</td><td></td><td>DEC HL</td><td>; to the start of the blocks</td></tr>
<tr><td>13</td><td>CPLOOP</td><td>INC DE</td><td>; Increment the block pointers</td></tr>
<tr><td>23</td><td></td><td>INC HL</td><td></td></tr>
<tr><td>1A</td><td></td><td>LD A (DE)</td><td>; Get byte from block 1 in</td></tr>
<tr><td>BE</td><td></td><td>CP (HL)</td><td>; Is it the same as block 2?</td></tr>
<tr><td>28 FA</td><td></td><td class="nowrap">JR Z CPLOOP</td><td>; If so, keep going</td></tr>
<tr><td>D7 0C</td><td></td><td>RCAL TAB</td><td>; Tabulate first block</td></tr>
<tr><td>EB</td><td></td><td>EX DE HL</td><td>; Swap the pointers to the blocks</td></tr>
<tr><td>D7 09</td><td></td><td>RCAL TAB</td><td>; Tabulate the second block</td></tr>
<tr><td>EB</td><td></td><td>EX DE HL</td><td>; Swap pointers back</td></tr>
<tr><td>CF</td><td></td><td>RST 8</td><td>; Wait for user to press any key</td></tr>
</table>
</div>
<!-- 1 column: end --></div>

</div>
</div>
<!-- /The page -->
<!-- Navigation bottom -->
<table class="robots-nocontent style-table-zeropadding" style="width: 100%">
	<tr>
		<td class="navi-button">
			<a style="display: block" href="../../28/text/" title="Previous page"><span class="mirror-horizontal fas fa-play" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../-1/text/" title="First page"><span class="mirror-horizontal fas fa-fast-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			
		</td>
		<th class="navi-button">
			<a style="display: block" href="../../text/" title="Table of Contents">Page 29 of 33</a>
		</th>
		<td class="navi-button">
			<a style="display: block" href="../../../12/-1/text/" title="Next issue"><span class="fas fa-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../33/text/" title="Last page"><span class="fas fa-fast-forward" aria-hidden=true></span></a>
		</td>
		<td class="navi-button">
			<a style="display: block" href="../../30/text/" title="Next page"><span class="fas fa-play" aria-hidden=true></span></a>
		</td>
	</tr>
</table>

<!-- navi-footer.php / $Date: 2023-03-11 15:22:20 +0100 (Sa, 11. Mrz 2023) $ -->

<!--********************************************************************************-->

	</div>

	<nav class="nav flex-column flex-md-row style-navbar-bottom robots-nocontent"> <!--nav-pills-->
		<a class="sm-fill nav-link" href="#top"><span title="Nach oben" class="fa fa-chevron-up" aria-hidden=true></span></a>
		<a class="sm-fill nav-link" href="../">Graphic</a>
		<a class="sm-fill nav-link" href="https://80bus.co.uk.mirror.jloh.de/publications/magazines/Micropower-1-1.pdf#page=31" target="_blank">PDF</a>
		<a class="sm-fill nav-link" href="../../../../../../datenschutzerklaerung/">Privacy Statement</a>
		<a class="sm-fill nav-link" href="../../../../../../impressum/">Imprint</a>
	</nav>

	<!--bootstrap-->
	<script src="../../../../../../cdn/bootstrap/js/bootstrap.bundle.min.js"></script>
</body>

<!-- /navi-footer.php -->
</html>

<!-- /page.php -->